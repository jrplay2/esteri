(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function Rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Fc={exports:{}},jo={},zc={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function mv(){if(up)return Pe;up=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),V=Symbol.iterator;function D(N){return N===null||typeof N!="object"?null:(N=V&&N[V]||N["@@iterator"],typeof N=="function"?N:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,J={};function $(N,B,ue){this.props=N,this.context=B,this.refs=J,this.updater=ue||j}$.prototype.isReactComponent={},$.prototype.setState=function(N,B){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,B,"setState")},$.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Se(){}Se.prototype=$.prototype;function ge(N,B,ue){this.props=N,this.context=B,this.refs=J,this.updater=ue||j}var Ee=ge.prototype=new Se;Ee.constructor=ge,Y(Ee,$.prototype),Ee.isPureReactComponent=!0;var Ae=Array.isArray,tt=Object.prototype.hasOwnProperty,ke={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function w(N,B,ue){var Ie,Ce={},Ve=null,Me=null;if(B!=null)for(Ie in B.ref!==void 0&&(Me=B.ref),B.key!==void 0&&(Ve=""+B.key),B)tt.call(B,Ie)&&!k.hasOwnProperty(Ie)&&(Ce[Ie]=B[Ie]);var je=arguments.length-2;if(je===1)Ce.children=ue;else if(1<je){for(var Qe=Array(je),ht=0;ht<je;ht++)Qe[ht]=arguments[ht+2];Ce.children=Qe}if(N&&N.defaultProps)for(Ie in je=N.defaultProps,je)Ce[Ie]===void 0&&(Ce[Ie]=je[Ie]);return{$$typeof:i,type:N,key:Ve,ref:Me,props:Ce,_owner:ke.current}}function A(N,B){return{$$typeof:i,type:N.type,key:B,ref:N.ref,props:N.props,_owner:N._owner}}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function x(N){var B={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ue){return B[ue]})}var O=/\/+/g;function S(N,B){return typeof N=="object"&&N!==null&&N.key!=null?x(""+N.key):B.toString(36)}function Le(N,B,ue,Ie,Ce){var Ve=typeof N;(Ve==="undefined"||Ve==="boolean")&&(N=null);var Me=!1;if(N===null)Me=!0;else switch(Ve){case"string":case"number":Me=!0;break;case"object":switch(N.$$typeof){case i:case e:Me=!0}}if(Me)return Me=N,Ce=Ce(Me),N=Ie===""?"."+S(Me,0):Ie,Ae(Ce)?(ue="",N!=null&&(ue=N.replace(O,"$&/")+"/"),Le(Ce,B,ue,"",function(ht){return ht})):Ce!=null&&(R(Ce)&&(Ce=A(Ce,ue+(!Ce.key||Me&&Me.key===Ce.key?"":(""+Ce.key).replace(O,"$&/")+"/")+N)),B.push(Ce)),1;if(Me=0,Ie=Ie===""?".":Ie+":",Ae(N))for(var je=0;je<N.length;je++){Ve=N[je];var Qe=Ie+S(Ve,je);Me+=Le(Ve,B,ue,Qe,Ce)}else if(Qe=D(N),typeof Qe=="function")for(N=Qe.call(N),je=0;!(Ve=N.next()).done;)Ve=Ve.value,Qe=Ie+S(Ve,je++),Me+=Le(Ve,B,ue,Qe,Ce);else if(Ve==="object")throw B=String(N),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Me}function mt(N,B,ue){if(N==null)return N;var Ie=[],Ce=0;return Le(N,Ie,"","",function(Ve){return B.call(ue,Ve,Ce++)}),Ie}function It(N){if(N._status===-1){var B=N._result;B=B(),B.then(function(ue){(N._status===0||N._status===-1)&&(N._status=1,N._result=ue)},function(ue){(N._status===0||N._status===-1)&&(N._status=2,N._result=ue)}),N._status===-1&&(N._status=0,N._result=B)}if(N._status===1)return N._result.default;throw N._result}var be={current:null},W={transition:null},he={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:W,ReactCurrentOwner:ke};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:mt,forEach:function(N,B,ue){mt(N,function(){B.apply(this,arguments)},ue)},count:function(N){var B=0;return mt(N,function(){B++}),B},toArray:function(N){return mt(N,function(B){return B})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Pe.Component=$,Pe.Fragment=n,Pe.Profiler=l,Pe.PureComponent=ge,Pe.StrictMode=s,Pe.Suspense=v,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Pe.act=ee,Pe.cloneElement=function(N,B,ue){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ie=Y({},N.props),Ce=N.key,Ve=N.ref,Me=N._owner;if(B!=null){if(B.ref!==void 0&&(Ve=B.ref,Me=ke.current),B.key!==void 0&&(Ce=""+B.key),N.type&&N.type.defaultProps)var je=N.type.defaultProps;for(Qe in B)tt.call(B,Qe)&&!k.hasOwnProperty(Qe)&&(Ie[Qe]=B[Qe]===void 0&&je!==void 0?je[Qe]:B[Qe])}var Qe=arguments.length-2;if(Qe===1)Ie.children=ue;else if(1<Qe){je=Array(Qe);for(var ht=0;ht<Qe;ht++)je[ht]=arguments[ht+2];Ie.children=je}return{$$typeof:i,type:N.type,key:Ce,ref:Ve,props:Ie,_owner:Me}},Pe.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Pe.createElement=w,Pe.createFactory=function(N){var B=w.bind(null,N);return B.type=N,B},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(N){return{$$typeof:g,render:N}},Pe.isValidElement=R,Pe.lazy=function(N){return{$$typeof:I,_payload:{_status:-1,_result:N},_init:It}},Pe.memo=function(N,B){return{$$typeof:E,type:N,compare:B===void 0?null:B}},Pe.startTransition=function(N){var B=W.transition;W.transition={};try{N()}finally{W.transition=B}},Pe.unstable_act=ee,Pe.useCallback=function(N,B){return be.current.useCallback(N,B)},Pe.useContext=function(N){return be.current.useContext(N)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(N){return be.current.useDeferredValue(N)},Pe.useEffect=function(N,B){return be.current.useEffect(N,B)},Pe.useId=function(){return be.current.useId()},Pe.useImperativeHandle=function(N,B,ue){return be.current.useImperativeHandle(N,B,ue)},Pe.useInsertionEffect=function(N,B){return be.current.useInsertionEffect(N,B)},Pe.useLayoutEffect=function(N,B){return be.current.useLayoutEffect(N,B)},Pe.useMemo=function(N,B){return be.current.useMemo(N,B)},Pe.useReducer=function(N,B,ue){return be.current.useReducer(N,B,ue)},Pe.useRef=function(N){return be.current.useRef(N)},Pe.useState=function(N){return be.current.useState(N)},Pe.useSyncExternalStore=function(N,B,ue){return be.current.useSyncExternalStore(N,B,ue)},Pe.useTransition=function(){return be.current.useTransition()},Pe.version="18.3.1",Pe}var cp;function vh(){return cp||(cp=1,zc.exports=mv()),zc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function gv(){if(hp)return jo;hp=1;var i=vh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,v,E){var I,V={},D=null,j=null;E!==void 0&&(D=""+E),v.key!==void 0&&(D=""+v.key),v.ref!==void 0&&(j=v.ref);for(I in v)s.call(v,I)&&!c.hasOwnProperty(I)&&(V[I]=v[I]);if(g&&g.defaultProps)for(I in v=g.defaultProps,v)V[I]===void 0&&(V[I]=v[I]);return{$$typeof:e,type:g,key:D,ref:j,props:V,_owner:l.current}}return jo.Fragment=n,jo.jsx=f,jo.jsxs=f,jo}var fp;function yv(){return fp||(fp=1,Fc.exports=gv()),Fc.exports}var X=yv(),et=vh();const vv=Rm(et);var Il={},Uc={exports:{}},nn={},jc={exports:{}},Bc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function _v(){return dp||(dp=1,function(i){function e(W,he){var ee=W.length;W.push(he);e:for(;0<ee;){var N=ee-1>>>1,B=W[N];if(0<l(B,he))W[N]=he,W[ee]=B,ee=N;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var he=W[0],ee=W.pop();if(ee!==he){W[0]=ee;e:for(var N=0,B=W.length,ue=B>>>1;N<ue;){var Ie=2*(N+1)-1,Ce=W[Ie],Ve=Ie+1,Me=W[Ve];if(0>l(Ce,ee))Ve<B&&0>l(Me,Ce)?(W[N]=Me,W[Ve]=ee,N=Ve):(W[N]=Ce,W[Ie]=ee,N=Ie);else if(Ve<B&&0>l(Me,ee))W[N]=Me,W[Ve]=ee,N=Ve;else break e}}return he}function l(W,he){var ee=W.sortIndex-he.sortIndex;return ee!==0?ee:W.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var v=[],E=[],I=1,V=null,D=3,j=!1,Y=!1,J=!1,$=typeof setTimeout=="function"?setTimeout:null,Se=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ee(W){for(var he=n(E);he!==null;){if(he.callback===null)s(E);else if(he.startTime<=W)s(E),he.sortIndex=he.expirationTime,e(v,he);else break;he=n(E)}}function Ae(W){if(J=!1,Ee(W),!Y)if(n(v)!==null)Y=!0,It(tt);else{var he=n(E);he!==null&&be(Ae,he.startTime-W)}}function tt(W,he){Y=!1,J&&(J=!1,Se(w),w=-1),j=!0;var ee=D;try{for(Ee(he),V=n(v);V!==null&&(!(V.expirationTime>he)||W&&!x());){var N=V.callback;if(typeof N=="function"){V.callback=null,D=V.priorityLevel;var B=N(V.expirationTime<=he);he=i.unstable_now(),typeof B=="function"?V.callback=B:V===n(v)&&s(v),Ee(he)}else s(v);V=n(v)}if(V!==null)var ue=!0;else{var Ie=n(E);Ie!==null&&be(Ae,Ie.startTime-he),ue=!1}return ue}finally{V=null,D=ee,j=!1}}var ke=!1,k=null,w=-1,A=5,R=-1;function x(){return!(i.unstable_now()-R<A)}function O(){if(k!==null){var W=i.unstable_now();R=W;var he=!0;try{he=k(!0,W)}finally{he?S():(ke=!1,k=null)}}else ke=!1}var S;if(typeof ge=="function")S=function(){ge(O)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,mt=Le.port2;Le.port1.onmessage=O,S=function(){mt.postMessage(null)}}else S=function(){$(O,0)};function It(W){k=W,ke||(ke=!0,S())}function be(W,he){w=$(function(){W(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_continueExecution=function(){Y||j||(Y=!0,It(tt))},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_getFirstCallbackNode=function(){return n(v)},i.unstable_next=function(W){switch(D){case 1:case 2:case 3:var he=3;break;default:he=D}var ee=D;D=he;try{return W()}finally{D=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(W,he){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=D;D=W;try{return he()}finally{D=ee}},i.unstable_scheduleCallback=function(W,he,ee){var N=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?N+ee:N):ee=N,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ee+B,W={id:I++,callback:he,priorityLevel:W,startTime:ee,expirationTime:B,sortIndex:-1},ee>N?(W.sortIndex=ee,e(E,W),n(v)===null&&W===n(E)&&(J?(Se(w),w=-1):J=!0,be(Ae,ee-N))):(W.sortIndex=B,e(v,W),Y||j||(Y=!0,It(tt))),W},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(W){var he=D;return function(){var ee=D;D=he;try{return W.apply(this,arguments)}finally{D=ee}}}}(Bc)),Bc}var pp;function Ev(){return pp||(pp=1,jc.exports=_v()),jc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function Tv(){if(mp)return nn;mp=1;var i=vh(),e=Ev();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(l[t]=r,t=0;t<r.length;t++)s.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},V={};function D(t){return v.call(V,t)?!0:v.call(I,t)?!1:E.test(t)?V[t]=!0:(I[t]=!0,!1)}function j(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y(t,r,o,u){if(r===null||typeof r>"u"||j(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function J(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$[t]=new J(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];$[r]=new J(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){$[t]=new J(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$[t]=new J(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$[t]=new J(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){$[t]=new J(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){$[t]=new J(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){$[t]=new J(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){$[t]=new J(t,5,!1,t.toLowerCase(),null,!1,!1)});var Se=/[\-:]([a-z])/g;function ge(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Se,ge);$[r]=new J(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Se,ge);$[r]=new J(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Se,ge);$[r]=new J(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){$[t]=new J(t,1,!1,t.toLowerCase(),null,!1,!1)}),$.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){$[t]=new J(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ee(t,r,o,u){var h=$.hasOwnProperty(r)?$[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Y(r,o,h,u)&&(o=null),u||h===null?D(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Ae=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tt=Symbol.for("react.element"),ke=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),W=Symbol.iterator;function he(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,N;function B(t){if(N===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var ue=!1;function Ie(t,r){if(!t||ue)return"";ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(z){var u=z}Reflect.construct(t,[],r)}else{try{r.call()}catch(z){u=z}t.call(r.prototype)}else{try{throw Error()}catch(z){u=z}t()}}catch(z){if(z&&u&&typeof z.stack=="string"){for(var h=z.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,T=p.length-1;1<=y&&0<=T&&h[y]!==p[T];)T--;for(;1<=y&&0<=T;y--,T--)if(h[y]!==p[T]){if(y!==1||T!==1)do if(y--,T--,0>T||h[y]!==p[T]){var C=`
`+h[y].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=y&&0<=T);break}}}finally{ue=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?B(t):""}function Ce(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function Ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case ke:return"Portal";case A:return"Profiler";case w:return"StrictMode";case S:return"Suspense";case Le:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case R:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mt:return r=t.displayName||null,r!==null?r:Ve(t.type)||"Memo";case It:r=t._payload,t=t._init;try{return Ve(t(r))}catch{}}return null}function Me(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function je(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qe(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ht(t){var r=Qe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function An(t){t._valueTracker||(t._valueTracker=ht(t))}function Cr(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Qe(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function bn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sr(t,r){var o=r.checked;return ee({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Rr(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=je(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function se(t,r){r=r.checked,r!=null&&Ee(t,"checked",r,!1)}function ce(t,r){se(t,r);var o=je(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?xe(t,r.type,o):r.hasOwnProperty("defaultValue")&&xe(t,r.type,je(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function ae(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function xe(t,r,o){(r!=="number"||bn(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var ye=Array.isArray;function Ne(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+je(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function xt(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function st(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(ye(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:je(o)}}function sn(t,r){var o=je(r.value),u=je(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function or(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function gt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?gt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ar,Ks=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ar.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Pr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){ci.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ui[r]=ui[t]})});function Ys(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ui.hasOwnProperty(t)&&ui[t]?(""+r).trim():r+"px"}function Xs(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Ys(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var Js=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zs(t,r){if(r){if(Js[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function eo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function Hi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,dn=null,$n=null;function Qi(t){if(t=Ao(t)){if(typeof qi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Ua(r),qi(t.stateNode,t.type,r))}}function Hn(t){dn?$n?$n.push(t):$n=[t]:dn=t}function to(){if(dn){var t=dn,r=$n;if($n=dn=null,Qi(t),r)for(t=0;t<r.length;t++)Qi(r[t])}}function fi(t,r){return t(r)}function no(){}var lr=!1;function ro(t,r,o){if(lr)return t(r,o);lr=!0;try{return fi(t,r,o)}finally{lr=!1,(dn!==null||$n!==null)&&(no(),to())}}function lt(t,r){var o=t.stateNode;if(o===null)return null;var u=Ua(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Gi=!1;if(g)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{Gi=!1}function di(t,r,o,u,h,p,y,T,C){var z=Array.prototype.slice.call(arguments,3);try{r.apply(o,z)}catch(q){this.onError(q)}}var pi=!1,Wi=null,Rn=!1,io=null,hu={onError:function(t){pi=!0,Wi=t}};function Ki(t,r,o,u,h,p,y,T,C){pi=!1,Wi=null,di.apply(hu,arguments)}function ca(t,r,o,u,h,p,y,T,C){if(Ki.apply(this,arguments),pi){if(pi){var z=Wi;pi=!1,Wi=null}else throw Error(n(198));Rn||(Rn=!0,io=z)}}function Pn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function mi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function kn(t){if(Pn(t)!==t)throw Error(n(188))}function ha(t){var r=t.alternate;if(!r){if(r=Pn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return kn(h),t;if(p===u)return kn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,T=h.child;T;){if(T===o){y=!0,o=h,u=p;break}if(T===u){y=!0,u=h,o=p;break}T=T.sibling}if(!y){for(T=p.child;T;){if(T===o){y=!0,o=p,u=h;break}if(T===u){y=!0,u=p,o=h;break}T=T.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function so(t){return t=ha(t),t!==null?Yi(t):null}function Yi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Yi(t);if(r!==null)return r;t=t.sibling}return null}var Xi=e.unstable_scheduleCallback,oo=e.unstable_cancelCallback,fa=e.unstable_shouldYield,fu=e.unstable_requestPaint,We=e.unstable_now,da=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,kr=e.unstable_UserBlockingPriority,pn=e.unstable_NormalPriority,ao=e.unstable_LowPriority,pa=e.unstable_IdlePriority,yi=null,on=null;function ma(t){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:ya,lo=Math.log,ga=Math.LN2;function ya(t){return t>>>=0,t===0?32:31-(lo(t)/ga|0)|0}var Ji=64,Zi=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var T=y&~h;T!==0?u=xr(T):(p&=y,p!==0&&(u=xr(p)))}else y=o&~h,y!==0?u=xr(y):p!==0&&(u=xr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-qt(r),h=1<<o,u|=t[o],r&=~h;return u}function du(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-qt(p),T=1<<y,C=h[y];C===-1?((T&o)===0||(T&u)!==0)&&(h[y]=du(T,r)):C<=r&&(t.expiredLanes|=T),p&=~T}}function an(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _i(){var t=Ji;return Ji<<=1,(Ji&4194240)===0&&(Ji=64),t}function Vr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Dr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-qt(r),t[r]=o}function Ge(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-qt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Nr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-qt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Oe=0;function Or(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var va,es,_a,Ea,Ta,uo=!1,qn=[],Vt=null,xn=null,Vn=null,Lr=new Map,mn=new Map,Qn=[],pu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wa(t,r){switch(t){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Lr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":mn.delete(r.pointerId)}}function Kt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ao(r),r!==null&&es(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function mu(t,r,o,u,h){switch(r){case"focusin":return Vt=Kt(Vt,t,r,o,u,h),!0;case"dragenter":return xn=Kt(xn,t,r,o,u,h),!0;case"mouseover":return Vn=Kt(Vn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Lr.set(p,Kt(Lr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,mn.set(p,Kt(mn.get(p)||null,t,r,o,u,h)),!0}return!1}function Sa(t){var r=Ii(t.target);if(r!==null){var o=Pn(r);if(o!==null){if(r=o.tag,r===13){if(r=mi(o),r!==null){t.blockedOn=r,Ta(t.priority,function(){_a(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ts(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);hi=u,o.target.dispatchEvent(u),hi=null}else return r=Ao(o),r!==null&&es(r),t.blockedOn=o,!1;r.shift()}return!0}function Ei(t,r,o){cr(t)&&o.delete(r)}function Ia(){uo=!1,Vt!==null&&cr(Vt)&&(Vt=null),xn!==null&&cr(xn)&&(xn=null),Vn!==null&&cr(Vn)&&(Vn=null),Lr.forEach(Ei),mn.forEach(Ei)}function Dn(t,r){t.blockedOn===r&&(t.blockedOn=null,uo||(uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ia)))}function Nn(t){function r(h){return Dn(h,t)}if(0<qn.length){Dn(qn[0],t);for(var o=1;o<qn.length;o++){var u=qn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Vt!==null&&Dn(Vt,t),xn!==null&&Dn(xn,t),Vn!==null&&Dn(Vn,t),Lr.forEach(r),mn.forEach(r),o=0;o<Qn.length;o++)u=Qn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Qn.length&&(o=Qn[0],o.blockedOn===null);)Sa(o),o.blockedOn===null&&Qn.shift()}var hr=Ae.ReactCurrentBatchConfig,Mr=!0;function Je(t,r,o,u){var h=Oe,p=hr.transition;hr.transition=null;try{Oe=1,co(t,r,o,u)}finally{Oe=h,hr.transition=p}}function gu(t,r,o,u){var h=Oe,p=hr.transition;hr.transition=null;try{Oe=4,co(t,r,o,u)}finally{Oe=h,hr.transition=p}}function co(t,r,o,u){if(Mr){var h=ts(t,r,o,u);if(h===null)Ru(t,r,u,Ti,o),wa(t,u);else if(mu(h,t,r,o,u))u.stopPropagation();else if(wa(t,u),r&4&&-1<pu.indexOf(t)){for(;h!==null;){var p=Ao(h);if(p!==null&&va(p),p=ts(t,r,o,u),p===null&&Ru(t,r,u,Ti,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Ru(t,r,u,null,o)}}var Ti=null;function ts(t,r,o,u){if(Ti=null,t=Hi(u),t=Ii(t),t!==null)if(r=Pn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=mi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ti=t,null}function ho(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(da()){case gi:return 1;case kr:return 4;case pn:case ao:return 16;case pa:return 536870912;default:return 16}default:return 16}}var ln=null,ns=null,Yt=null;function fo(){if(Yt)return Yt;var t,r=ns,o=r.length,u,h="value"in ln?ln.value:ln.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return Yt=h.slice(t,1<u?1-u:void 0)}function rs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Gn(){return!0}function po(){return!1}function Dt(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Gn:po,this.isPropagationStopped=po,this}return ee(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),r}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Dt(On),Wn=ee({},On,{view:0,detail:0}),yu=Dt(Wn),ss,fr,Fr,wi=ee({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(ss=t.screenX-Fr.screenX,fr=t.screenY-Fr.screenY):fr=ss=0,Fr=t),ss)},movementY:function(t){return"movementY"in t?t.movementY:fr}}),os=Dt(wi),mo=ee({},wi,{dataTransfer:0}),Aa=Dt(mo),as=ee({},Wn,{relatedTarget:0}),ls=Dt(as),Ca=ee({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=Dt(Ca),Ra=ee({},On,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pa=Dt(Ra),ka=ee({},On,{data:0}),go=Dt(ka),us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Va(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=xa[t])?!!r[t]:!1}function Kn(){return Va}var a=ee({},Wn,{key:function(t){if(t.key){var r=us[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(t){return t.type==="keypress"?rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Dt(a),m=ee({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_=Dt(m),L=ee({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn}),U=Dt(L),Z=ee({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Dt(Z),vt=ee({},wi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Dt(vt),At=[9,13,27,32],ft=g&&"CompositionEvent"in window,gn=null;g&&"documentMode"in document&&(gn=document.documentMode);var un=g&&"TextEvent"in window&&!gn,Si=g&&(!ft||gn&&8<gn&&11>=gn),cs=" ",nf=!1;function rf(t,r){switch(t){case"keyup":return At.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function fy(t,r){switch(t){case"compositionend":return sf(r);case"keypress":return r.which!==32?null:(nf=!0,cs);case"textInput":return t=r.data,t===cs&&nf?null:t;default:return null}}function dy(t,r){if(hs)return t==="compositionend"||!ft&&rf(t,r)?(t=fo(),Yt=ns=ln=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Si&&r.locale!=="ko"?null:r.data;default:return null}}var py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function of(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!py[t.type]:r==="textarea"}function af(t,r,o,u){Hn(u),r=Ma(r,"onChange"),0<r.length&&(o=new is("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var yo=null,vo=null;function my(t){Af(t,0)}function Da(t){var r=gs(t);if(Cr(r))return t}function gy(t,r){if(t==="change")return r}var lf=!1;if(g){var vu;if(g){var _u="oninput"in document;if(!_u){var uf=document.createElement("div");uf.setAttribute("oninput","return;"),_u=typeof uf.oninput=="function"}vu=_u}else vu=!1;lf=vu&&(!document.documentMode||9<document.documentMode)}function cf(){yo&&(yo.detachEvent("onpropertychange",hf),vo=yo=null)}function hf(t){if(t.propertyName==="value"&&Da(vo)){var r=[];af(r,vo,t,Hi(t)),ro(my,r)}}function yy(t,r,o){t==="focusin"?(cf(),yo=r,vo=o,yo.attachEvent("onpropertychange",hf)):t==="focusout"&&cf()}function vy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Da(vo)}function _y(t,r){if(t==="click")return Da(r)}function Ey(t,r){if(t==="input"||t==="change")return Da(r)}function Ty(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ln=typeof Object.is=="function"?Object.is:Ty;function _o(t,r){if(Ln(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(r,h)||!Ln(t[h],r[h]))return!1}return!0}function ff(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function df(t,r){var o=ff(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ff(o)}}function pf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?pf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function mf(){for(var t=window,r=bn();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=bn(t.document)}return r}function Eu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function wy(t){var r=mf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&pf(o.ownerDocument.documentElement,o)){if(u!==null&&Eu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=df(o,p);var y=df(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sy=g&&"documentMode"in document&&11>=document.documentMode,fs=null,Tu=null,Eo=null,wu=!1;function gf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;wu||fs==null||fs!==bn(u)||(u=fs,"selectionStart"in u&&Eu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Eo&&_o(Eo,u)||(Eo=u,u=Ma(Tu,"onSelect"),0<u.length&&(r=new is("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=fs)))}function Na(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ds={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Su={},yf={};g&&(yf=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Oa(t){if(Su[t])return Su[t];if(!ds[t])return t;var r=ds[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in yf)return Su[t]=r[o];return t}var vf=Oa("animationend"),_f=Oa("animationiteration"),Ef=Oa("animationstart"),Tf=Oa("transitionend"),wf=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,r){wf.set(t,r),c(r,[t])}for(var Iu=0;Iu<Sf.length;Iu++){var Au=Sf[Iu],Iy=Au.toLowerCase(),Ay=Au[0].toUpperCase()+Au.slice(1);zr(Iy,"on"+Ay)}zr(vf,"onAnimationEnd"),zr(_f,"onAnimationIteration"),zr(Ef,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Tf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cy=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function If(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,ca(u,r,void 0,t),t.currentTarget=null}function Af(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var T=u[y],C=T.instance,z=T.currentTarget;if(T=T.listener,C!==p&&h.isPropagationStopped())break e;If(h,T,z),p=C}else for(y=0;y<u.length;y++){if(T=u[y],C=T.instance,z=T.currentTarget,T=T.listener,C!==p&&h.isPropagationStopped())break e;If(h,T,z),p=C}}}if(Rn)throw t=io,Rn=!1,io=null,t}function Ye(t,r){var o=r[Nu];o===void 0&&(o=r[Nu]=new Set);var u=t+"__bubble";o.has(u)||(Cf(r,t,2,!1),o.add(u))}function Cu(t,r,o){var u=0;r&&(u|=4),Cf(o,t,u,r)}var La="_reactListening"+Math.random().toString(36).slice(2);function wo(t){if(!t[La]){t[La]=!0,s.forEach(function(o){o!=="selectionchange"&&(Cy.has(o)||Cu(o,!1,t),Cu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[La]||(r[La]=!0,Cu("selectionchange",!1,r))}}function Cf(t,r,o,u){switch(ho(r)){case 1:var h=Je;break;case 4:h=gu;break;default:h=co}o=h.bind(null,r,o,t),h=void 0,!Gi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Ru(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var C=y.tag;if((C===3||C===4)&&(C=y.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;y=y.return}for(;T!==null;){if(y=Ii(T),y===null)return;if(C=y.tag,C===5||C===6){u=p=y;continue e}T=T.parentNode}}u=u.return}ro(function(){var z=p,q=Hi(o),Q=[];e:{var H=wf.get(t);if(H!==void 0){var te=is,ie=t;switch(t){case"keypress":if(rs(o)===0)break e;case"keydown":case"keyup":te=d;break;case"focusin":ie="focus",te=ls;break;case"focusout":ie="blur",te=ls;break;case"beforeblur":case"afterblur":te=ls;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=os;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=U;break;case vf:case _f:case Ef:te=dr;break;case Tf:te=qe;break;case"scroll":te=yu;break;case"wheel":te=Fe;break;case"copy":case"cut":case"paste":te=Pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=_}var oe=(r&4)!==0,ut=!oe&&t==="scroll",M=oe?H!==null?H+"Capture":null:H;oe=[];for(var P=z,F;P!==null;){F=P;var K=F.stateNode;if(F.tag===5&&K!==null&&(F=K,M!==null&&(K=lt(P,M),K!=null&&oe.push(So(P,K,F)))),ut)break;P=P.return}0<oe.length&&(H=new te(H,ie,null,o,q),Q.push({event:H,listeners:oe}))}}if((r&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",H&&o!==hi&&(ie=o.relatedTarget||o.fromElement)&&(Ii(ie)||ie[pr]))break e;if((te||H)&&(H=q.window===q?q:(H=q.ownerDocument)?H.defaultView||H.parentWindow:window,te?(ie=o.relatedTarget||o.toElement,te=z,ie=ie?Ii(ie):null,ie!==null&&(ut=Pn(ie),ie!==ut||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(te=null,ie=z),te!==ie)){if(oe=os,K="onMouseLeave",M="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(oe=_,K="onPointerLeave",M="onPointerEnter",P="pointer"),ut=te==null?H:gs(te),F=ie==null?H:gs(ie),H=new oe(K,P+"leave",te,o,q),H.target=ut,H.relatedTarget=F,K=null,Ii(q)===z&&(oe=new oe(M,P+"enter",ie,o,q),oe.target=F,oe.relatedTarget=ut,K=oe),ut=K,te&&ie)t:{for(oe=te,M=ie,P=0,F=oe;F;F=ps(F))P++;for(F=0,K=M;K;K=ps(K))F++;for(;0<P-F;)oe=ps(oe),P--;for(;0<F-P;)M=ps(M),F--;for(;P--;){if(oe===M||M!==null&&oe===M.alternate)break t;oe=ps(oe),M=ps(M)}oe=null}else oe=null;te!==null&&Rf(Q,H,te,oe,!1),ie!==null&&ut!==null&&Rf(Q,ut,ie,oe,!0)}}e:{if(H=z?gs(z):window,te=H.nodeName&&H.nodeName.toLowerCase(),te==="select"||te==="input"&&H.type==="file")var le=gy;else if(of(H))if(lf)le=Ey;else{le=vy;var fe=yy}else(te=H.nodeName)&&te.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(le=_y);if(le&&(le=le(t,z))){af(Q,le,o,q);break e}fe&&fe(t,H,z),t==="focusout"&&(fe=H._wrapperState)&&fe.controlled&&H.type==="number"&&xe(H,"number",H.value)}switch(fe=z?gs(z):window,t){case"focusin":(of(fe)||fe.contentEditable==="true")&&(fs=fe,Tu=z,Eo=null);break;case"focusout":Eo=Tu=fs=null;break;case"mousedown":wu=!0;break;case"contextmenu":case"mouseup":case"dragend":wu=!1,gf(Q,o,q);break;case"selectionchange":if(Sy)break;case"keydown":case"keyup":gf(Q,o,q)}var de;if(ft)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else hs?rf(t,o)&&(_e="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(_e="onCompositionStart");_e&&(Si&&o.locale!=="ko"&&(hs||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&hs&&(de=fo()):(ln=q,ns="value"in ln?ln.value:ln.textContent,hs=!0)),fe=Ma(z,_e),0<fe.length&&(_e=new go(_e,t,null,o,q),Q.push({event:_e,listeners:fe}),de?_e.data=de:(de=sf(o),de!==null&&(_e.data=de)))),(de=un?fy(t,o):dy(t,o))&&(z=Ma(z,"onBeforeInput"),0<z.length&&(q=new go("onBeforeInput","beforeinput",null,o,q),Q.push({event:q,listeners:z}),q.data=de))}Af(Q,r)})}function So(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ma(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=lt(t,o),p!=null&&u.unshift(So(t,p,h)),p=lt(t,r),p!=null&&u.push(So(t,p,h))),t=t.return}return u}function ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var T=o,C=T.alternate,z=T.stateNode;if(C!==null&&C===u)break;T.tag===5&&z!==null&&(T=z,h?(C=lt(o,p),C!=null&&y.unshift(So(o,C,T))):h||(C=lt(o,p),C!=null&&y.push(So(o,C,T)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var Ry=/\r\n?/g,Py=/\u0000|\uFFFD/g;function Pf(t){return(typeof t=="string"?t:""+t).replace(Ry,`
`).replace(Py,"")}function Fa(t,r,o){if(r=Pf(r),Pf(t)!==r&&o)throw Error(n(425))}function za(){}var Pu=null,ku=null;function xu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vu=typeof setTimeout=="function"?setTimeout:void 0,ky=typeof clearTimeout=="function"?clearTimeout:void 0,kf=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof kf<"u"?function(t){return kf.resolve(null).then(t).catch(Vy)}:Vu;function Vy(t){setTimeout(function(){throw t})}function Du(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Nn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Nn(r)}function Ur(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function xf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var ms=Math.random().toString(36).slice(2),Yn="__reactFiber$"+ms,Io="__reactProps$"+ms,pr="__reactContainer$"+ms,Nu="__reactEvents$"+ms,Dy="__reactListeners$"+ms,Ny="__reactHandles$"+ms;function Ii(t){var r=t[Yn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[pr]||o[Yn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=xf(t);t!==null;){if(o=t[Yn])return o;t=xf(t)}return r}t=o,o=t.parentNode}return null}function Ao(t){return t=t[Yn]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Ua(t){return t[Io]||null}var Ou=[],ys=-1;function jr(t){return{current:t}}function Xe(t){0>ys||(t.current=Ou[ys],Ou[ys]=null,ys--)}function Ke(t,r){ys++,Ou[ys]=t.current,t.current=r}var Br={},zt=jr(Br),Xt=jr(!1),Ai=Br;function vs(t,r){var o=t.type.contextTypes;if(!o)return Br;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Jt(t){return t=t.childContextTypes,t!=null}function ja(){Xe(Xt),Xe(zt)}function Vf(t,r,o){if(zt.current!==Br)throw Error(n(168));Ke(zt,r),Ke(Xt,o)}function Df(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Me(t)||"Unknown",h));return ee({},o,u)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,Ai=zt.current,Ke(zt,t),Ke(Xt,Xt.current),!0}function Nf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Df(t,r,Ai),u.__reactInternalMemoizedMergedChildContext=t,Xe(Xt),Xe(zt),Ke(zt,t)):Xe(Xt),Ke(Xt,o)}var mr=null,ba=!1,Lu=!1;function Of(t){mr===null?mr=[t]:mr.push(t)}function Oy(t){ba=!0,Of(t)}function br(){if(!Lu&&mr!==null){Lu=!0;var t=0,r=Oe;try{var o=mr;for(Oe=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}mr=null,ba=!1}catch(h){throw mr!==null&&(mr=mr.slice(t+1)),Xi(gi,br),h}finally{Oe=r,Lu=!1}}return null}var _s=[],Es=0,$a=null,Ha=0,yn=[],vn=0,Ci=null,gr=1,yr="";function Ri(t,r){_s[Es++]=Ha,_s[Es++]=$a,$a=t,Ha=r}function Lf(t,r,o){yn[vn++]=gr,yn[vn++]=yr,yn[vn++]=Ci,Ci=t;var u=gr;t=yr;var h=32-qt(u)-1;u&=~(1<<h),o+=1;var p=32-qt(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,gr=1<<32-qt(r)+h|o<<h|u,yr=p+t}else gr=1<<p|o<<h|u,yr=t}function Mu(t){t.return!==null&&(Ri(t,1),Lf(t,1,0))}function Fu(t){for(;t===$a;)$a=_s[--Es],_s[Es]=null,Ha=_s[--Es],_s[Es]=null;for(;t===Ci;)Ci=yn[--vn],yn[vn]=null,yr=yn[--vn],yn[vn]=null,gr=yn[--vn],yn[vn]=null}var cn=null,hn=null,Ze=!1,Mn=null;function Mf(t,r){var o=wn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Ff(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,cn=t,hn=Ur(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,cn=t,hn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ci!==null?{id:gr,overflow:yr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=wn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,cn=t,hn=null,!0):!1;default:return!1}}function zu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uu(t){if(Ze){var r=hn;if(r){var o=r;if(!Ff(t,r)){if(zu(t))throw Error(n(418));r=Ur(o.nextSibling);var u=cn;r&&Ff(t,r)?Mf(u,o):(t.flags=t.flags&-4097|2,Ze=!1,cn=t)}}else{if(zu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ze=!1,cn=t}}}function zf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function qa(t){if(t!==cn)return!1;if(!Ze)return zf(t),Ze=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!xu(t.type,t.memoizedProps)),r&&(r=hn)){if(zu(t))throw Uf(),Error(n(418));for(;r;)Mf(t,r),r=Ur(r.nextSibling)}if(zf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){hn=Ur(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}hn=null}}else hn=cn?Ur(t.stateNode.nextSibling):null;return!0}function Uf(){for(var t=hn;t;)t=Ur(t.nextSibling)}function Ts(){hn=cn=null,Ze=!1}function ju(t){Mn===null?Mn=[t]:Mn.push(t)}var Ly=Ae.ReactCurrentBatchConfig;function Co(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var T=h.refs;y===null?delete T[p]:T[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Qa(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function jf(t){var r=t._init;return r(t._payload)}function Bf(t){function r(M,P){if(t){var F=M.deletions;F===null?(M.deletions=[P],M.flags|=16):F.push(P)}}function o(M,P){if(!t)return null;for(;P!==null;)r(M,P),P=P.sibling;return null}function u(M,P){for(M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function h(M,P){return M=Yr(M,P),M.index=0,M.sibling=null,M}function p(M,P,F){return M.index=F,t?(F=M.alternate,F!==null?(F=F.index,F<P?(M.flags|=2,P):F):(M.flags|=2,P)):(M.flags|=1048576,P)}function y(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,P,F,K){return P===null||P.tag!==6?(P=Vc(F,M.mode,K),P.return=M,P):(P=h(P,F),P.return=M,P)}function C(M,P,F,K){var le=F.type;return le===k?q(M,P,F.props.children,K,F.key):P!==null&&(P.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===It&&jf(le)===P.type)?(K=h(P,F.props),K.ref=Co(M,P,F),K.return=M,K):(K=gl(F.type,F.key,F.props,null,M.mode,K),K.ref=Co(M,P,F),K.return=M,K)}function z(M,P,F,K){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Dc(F,M.mode,K),P.return=M,P):(P=h(P,F.children||[]),P.return=M,P)}function q(M,P,F,K,le){return P===null||P.tag!==7?(P=Li(F,M.mode,K,le),P.return=M,P):(P=h(P,F),P.return=M,P)}function Q(M,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Vc(""+P,M.mode,F),P.return=M,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case tt:return F=gl(P.type,P.key,P.props,null,M.mode,F),F.ref=Co(M,null,P),F.return=M,F;case ke:return P=Dc(P,M.mode,F),P.return=M,P;case It:var K=P._init;return Q(M,K(P._payload),F)}if(ye(P)||he(P))return P=Li(P,M.mode,F,null),P.return=M,P;Qa(M,P)}return null}function H(M,P,F,K){var le=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return le!==null?null:T(M,P,""+F,K);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case tt:return F.key===le?C(M,P,F,K):null;case ke:return F.key===le?z(M,P,F,K):null;case It:return le=F._init,H(M,P,le(F._payload),K)}if(ye(F)||he(F))return le!==null?null:q(M,P,F,K,null);Qa(M,F)}return null}function te(M,P,F,K,le){if(typeof K=="string"&&K!==""||typeof K=="number")return M=M.get(F)||null,T(P,M,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case tt:return M=M.get(K.key===null?F:K.key)||null,C(P,M,K,le);case ke:return M=M.get(K.key===null?F:K.key)||null,z(P,M,K,le);case It:var fe=K._init;return te(M,P,F,fe(K._payload),le)}if(ye(K)||he(K))return M=M.get(F)||null,q(P,M,K,le,null);Qa(P,K)}return null}function ie(M,P,F,K){for(var le=null,fe=null,de=P,_e=P=0,Pt=null;de!==null&&_e<F.length;_e++){de.index>_e?(Pt=de,de=null):Pt=de.sibling;var $e=H(M,de,F[_e],K);if($e===null){de===null&&(de=Pt);break}t&&de&&$e.alternate===null&&r(M,de),P=p($e,P,_e),fe===null?le=$e:fe.sibling=$e,fe=$e,de=Pt}if(_e===F.length)return o(M,de),Ze&&Ri(M,_e),le;if(de===null){for(;_e<F.length;_e++)de=Q(M,F[_e],K),de!==null&&(P=p(de,P,_e),fe===null?le=de:fe.sibling=de,fe=de);return Ze&&Ri(M,_e),le}for(de=u(M,de);_e<F.length;_e++)Pt=te(de,M,_e,F[_e],K),Pt!==null&&(t&&Pt.alternate!==null&&de.delete(Pt.key===null?_e:Pt.key),P=p(Pt,P,_e),fe===null?le=Pt:fe.sibling=Pt,fe=Pt);return t&&de.forEach(function(Xr){return r(M,Xr)}),Ze&&Ri(M,_e),le}function oe(M,P,F,K){var le=he(F);if(typeof le!="function")throw Error(n(150));if(F=le.call(F),F==null)throw Error(n(151));for(var fe=le=null,de=P,_e=P=0,Pt=null,$e=F.next();de!==null&&!$e.done;_e++,$e=F.next()){de.index>_e?(Pt=de,de=null):Pt=de.sibling;var Xr=H(M,de,$e.value,K);if(Xr===null){de===null&&(de=Pt);break}t&&de&&Xr.alternate===null&&r(M,de),P=p(Xr,P,_e),fe===null?le=Xr:fe.sibling=Xr,fe=Xr,de=Pt}if($e.done)return o(M,de),Ze&&Ri(M,_e),le;if(de===null){for(;!$e.done;_e++,$e=F.next())$e=Q(M,$e.value,K),$e!==null&&(P=p($e,P,_e),fe===null?le=$e:fe.sibling=$e,fe=$e);return Ze&&Ri(M,_e),le}for(de=u(M,de);!$e.done;_e++,$e=F.next())$e=te(de,M,_e,$e.value,K),$e!==null&&(t&&$e.alternate!==null&&de.delete($e.key===null?_e:$e.key),P=p($e,P,_e),fe===null?le=$e:fe.sibling=$e,fe=$e);return t&&de.forEach(function(pv){return r(M,pv)}),Ze&&Ri(M,_e),le}function ut(M,P,F,K){if(typeof F=="object"&&F!==null&&F.type===k&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case tt:e:{for(var le=F.key,fe=P;fe!==null;){if(fe.key===le){if(le=F.type,le===k){if(fe.tag===7){o(M,fe.sibling),P=h(fe,F.props.children),P.return=M,M=P;break e}}else if(fe.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===It&&jf(le)===fe.type){o(M,fe.sibling),P=h(fe,F.props),P.ref=Co(M,fe,F),P.return=M,M=P;break e}o(M,fe);break}else r(M,fe);fe=fe.sibling}F.type===k?(P=Li(F.props.children,M.mode,K,F.key),P.return=M,M=P):(K=gl(F.type,F.key,F.props,null,M.mode,K),K.ref=Co(M,P,F),K.return=M,M=K)}return y(M);case ke:e:{for(fe=F.key;P!==null;){if(P.key===fe)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(M,P.sibling),P=h(P,F.children||[]),P.return=M,M=P;break e}else{o(M,P);break}else r(M,P);P=P.sibling}P=Dc(F,M.mode,K),P.return=M,M=P}return y(M);case It:return fe=F._init,ut(M,P,fe(F._payload),K)}if(ye(F))return ie(M,P,F,K);if(he(F))return oe(M,P,F,K);Qa(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(o(M,P.sibling),P=h(P,F),P.return=M,M=P):(o(M,P),P=Vc(F,M.mode,K),P.return=M,M=P),y(M)):o(M,P)}return ut}var ws=Bf(!0),bf=Bf(!1),Ga=jr(null),Wa=null,Ss=null,Bu=null;function bu(){Bu=Ss=Wa=null}function $u(t){var r=Ga.current;Xe(Ga),t._currentValue=r}function Hu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Is(t,r){Wa=t,Bu=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Zt=!0),t.firstContext=null)}function _n(t){var r=t._currentValue;if(Bu!==t)if(t={context:t,memoizedValue:r,next:null},Ss===null){if(Wa===null)throw Error(n(308));Ss=t,Wa.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return r}var Pi=null;function qu(t){Pi===null?Pi=[t]:Pi.push(t)}function $f(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,qu(r)):(o.next=h.next,h.next=o),r.interleaved=o,vr(t,u)}function vr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var $r=!1;function Qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Hr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Be&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,vr(t,o)}return h=u.interleaved,h===null?(r.next=r,qu(u)):(r.next=h.next,h.next=r),u.interleaved=r,vr(t,o)}function Ka(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Nr(t,o)}}function qf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Ya(t,r,o,u){var h=t.updateQueue;$r=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,z=C.next;C.next=null,y===null?p=z:y.next=z,y=C;var q=t.alternate;q!==null&&(q=q.updateQueue,T=q.lastBaseUpdate,T!==y&&(T===null?q.firstBaseUpdate=z:T.next=z,q.lastBaseUpdate=C))}if(p!==null){var Q=h.baseState;y=0,q=z=C=null,T=p;do{var H=T.lane,te=T.eventTime;if((u&H)===H){q!==null&&(q=q.next={eventTime:te,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ie=t,oe=T;switch(H=r,te=o,oe.tag){case 1:if(ie=oe.payload,typeof ie=="function"){Q=ie.call(te,Q,H);break e}Q=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=oe.payload,H=typeof ie=="function"?ie.call(te,Q,H):ie,H==null)break e;Q=ee({},Q,H);break e;case 2:$r=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,H=h.effects,H===null?h.effects=[T]:H.push(T))}else te={eventTime:te,lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},q===null?(z=q=te,C=Q):q=q.next=te,y|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);if(q===null&&(C=Q),h.baseState=C,h.firstBaseUpdate=z,h.lastBaseUpdate=q,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Vi|=y,t.lanes=y,t.memoizedState=Q}}function Qf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Ro={},Xn=jr(Ro),Po=jr(Ro),ko=jr(Ro);function ki(t){if(t===Ro)throw Error(n(174));return t}function Gu(t,r){switch(Ke(ko,r),Ke(Po,t),Ke(Xn,Ro),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:yt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=yt(r,t)}Xe(Xn),Ke(Xn,r)}function As(){Xe(Xn),Xe(Po),Xe(ko)}function Gf(t){ki(ko.current);var r=ki(Xn.current),o=yt(r,t.type);r!==o&&(Ke(Po,t),Ke(Xn,o))}function Wu(t){Po.current===t&&(Xe(Xn),Xe(Po))}var nt=jr(0);function Xa(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ku=[];function Yu(){for(var t=0;t<Ku.length;t++)Ku[t]._workInProgressVersionPrimary=null;Ku.length=0}var Ja=Ae.ReactCurrentDispatcher,Xu=Ae.ReactCurrentBatchConfig,xi=0,rt=null,_t=null,Ct=null,Za=!1,xo=!1,Vo=0,My=0;function Ut(){throw Error(n(321))}function Ju(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Ln(t[o],r[o]))return!1;return!0}function Zu(t,r,o,u,h,p){if(xi=p,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ja.current=t===null||t.memoizedState===null?jy:By,t=o(u,h),xo){p=0;do{if(xo=!1,Vo=0,25<=p)throw Error(n(301));p+=1,Ct=_t=null,r.updateQueue=null,Ja.current=by,t=o(u,h)}while(xo)}if(Ja.current=nl,r=_t!==null&&_t.next!==null,xi=0,Ct=_t=rt=null,Za=!1,r)throw Error(n(300));return t}function ec(){var t=Vo!==0;return Vo=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?rt.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function En(){if(_t===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var r=Ct===null?rt.memoizedState:Ct.next;if(r!==null)Ct=r,_t=t;else{if(t===null)throw Error(n(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Ct===null?rt.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Do(t,r){return typeof r=="function"?r(t):r}function tc(t){var r=En(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=_t,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=y=null,C=null,z=p;do{var q=z.lane;if((xi&q)===q)C!==null&&(C=C.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),u=z.hasEagerState?z.eagerState:t(u,z.action);else{var Q={lane:q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};C===null?(T=C=Q,y=u):C=C.next=Q,rt.lanes|=q,Vi|=q}z=z.next}while(z!==null&&z!==p);C===null?y=u:C.next=T,Ln(u,r.memoizedState)||(Zt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=C,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,rt.lanes|=p,Vi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function nc(t){var r=En(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);Ln(p,r.memoizedState)||(Zt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Wf(){}function Kf(t,r){var o=rt,u=En(),h=r(),p=!Ln(u.memoizedState,h);if(p&&(u.memoizedState=h,Zt=!0),u=u.queue,rc(Jf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||Ct!==null&&Ct.memoizedState.tag&1){if(o.flags|=2048,No(9,Xf.bind(null,o,u,h,r),void 0,null),Rt===null)throw Error(n(349));(xi&30)!==0||Yf(o,r,h)}return h}function Yf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Xf(t,r,o,u){r.value=o,r.getSnapshot=u,Zf(r)&&ed(t)}function Jf(t,r,o){return o(function(){Zf(r)&&ed(t)})}function Zf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Ln(t,o)}catch{return!0}}function ed(t){var r=vr(t,1);r!==null&&jn(r,t,1,-1)}function td(t){var r=Jn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},r.queue=t,t=t.dispatch=Uy.bind(null,rt,t),[r.memoizedState,t]}function No(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function nd(){return En().memoizedState}function el(t,r,o,u){var h=Jn();rt.flags|=t,h.memoizedState=No(1|r,o,void 0,u===void 0?null:u)}function tl(t,r,o,u){var h=En();u=u===void 0?null:u;var p=void 0;if(_t!==null){var y=_t.memoizedState;if(p=y.destroy,u!==null&&Ju(u,y.deps)){h.memoizedState=No(r,o,p,u);return}}rt.flags|=t,h.memoizedState=No(1|r,o,p,u)}function rd(t,r){return el(8390656,8,t,r)}function rc(t,r){return tl(2048,8,t,r)}function id(t,r){return tl(4,2,t,r)}function sd(t,r){return tl(4,4,t,r)}function od(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ad(t,r,o){return o=o!=null?o.concat([t]):null,tl(4,4,od.bind(null,r,t),o)}function ic(){}function ld(t,r){var o=En();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ju(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function ud(t,r){var o=En();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ju(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function cd(t,r,o){return(xi&21)===0?(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=o):(Ln(o,r)||(o=_i(),rt.lanes|=o,Vi|=o,t.baseState=!0),r)}function Fy(t,r){var o=Oe;Oe=o!==0&&4>o?o:4,t(!0);var u=Xu.transition;Xu.transition={};try{t(!1),r()}finally{Oe=o,Xu.transition=u}}function hd(){return En().memoizedState}function zy(t,r,o){var u=Wr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},fd(t))dd(r,o);else if(o=$f(t,r,o,u),o!==null){var h=Wt();jn(o,t,u,h),pd(o,r,u)}}function Uy(t,r,o){var u=Wr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(fd(t))dd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,T=p(y,o);if(h.hasEagerState=!0,h.eagerState=T,Ln(T,y)){var C=r.interleaved;C===null?(h.next=h,qu(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}finally{}o=$f(t,r,h,u),o!==null&&(h=Wt(),jn(o,t,u,h),pd(o,r,u))}}function fd(t){var r=t.alternate;return t===rt||r!==null&&r===rt}function dd(t,r){xo=Za=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function pd(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Nr(t,o)}}var nl={readContext:_n,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},jy={readContext:_n,useCallback:function(t,r){return Jn().memoizedState=[t,r===void 0?null:r],t},useContext:_n,useEffect:rd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,el(4194308,4,od.bind(null,r,t),o)},useLayoutEffect:function(t,r){return el(4194308,4,t,r)},useInsertionEffect:function(t,r){return el(4,2,t,r)},useMemo:function(t,r){var o=Jn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Jn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=zy.bind(null,rt,t),[u.memoizedState,t]},useRef:function(t){var r=Jn();return t={current:t},r.memoizedState=t},useState:td,useDebugValue:ic,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=td(!1),r=t[0];return t=Fy.bind(null,t[1]),Jn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=rt,h=Jn();if(Ze){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Rt===null)throw Error(n(349));(xi&30)!==0||Yf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,rd(Jf.bind(null,u,p,t),[t]),u.flags|=2048,No(9,Xf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Jn(),r=Rt.identifierPrefix;if(Ze){var o=yr,u=gr;o=(u&~(1<<32-qt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Vo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=My++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},By={readContext:_n,useCallback:ld,useContext:_n,useEffect:rc,useImperativeHandle:ad,useInsertionEffect:id,useLayoutEffect:sd,useMemo:ud,useReducer:tc,useRef:nd,useState:function(){return tc(Do)},useDebugValue:ic,useDeferredValue:function(t){var r=En();return cd(r,_t.memoizedState,t)},useTransition:function(){var t=tc(Do)[0],r=En().memoizedState;return[t,r]},useMutableSource:Wf,useSyncExternalStore:Kf,useId:hd,unstable_isNewReconciler:!1},by={readContext:_n,useCallback:ld,useContext:_n,useEffect:rc,useImperativeHandle:ad,useInsertionEffect:id,useLayoutEffect:sd,useMemo:ud,useReducer:nc,useRef:nd,useState:function(){return nc(Do)},useDebugValue:ic,useDeferredValue:function(t){var r=En();return _t===null?r.memoizedState=t:cd(r,_t.memoizedState,t)},useTransition:function(){var t=nc(Do)[0],r=En().memoizedState;return[t,r]},useMutableSource:Wf,useSyncExternalStore:Kf,useId:hd,unstable_isNewReconciler:!1};function Fn(t,r){if(t&&t.defaultProps){r=ee({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function sc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ee({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var rl={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Wt(),h=Wr(t),p=_r(u,h);p.payload=r,o!=null&&(p.callback=o),r=Hr(t,p,h),r!==null&&(jn(r,t,h,u),Ka(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Wt(),h=Wr(t),p=_r(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Hr(t,p,h),r!==null&&(jn(r,t,h,u),Ka(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Wt(),u=Wr(t),h=_r(o,u);h.tag=2,r!=null&&(h.callback=r),r=Hr(t,h,u),r!==null&&(jn(r,t,u,o),Ka(r,t,u))}};function md(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!_o(o,u)||!_o(h,p):!0}function gd(t,r,o){var u=!1,h=Br,p=r.contextType;return typeof p=="object"&&p!==null?p=_n(p):(h=Jt(r)?Ai:zt.current,u=r.contextTypes,p=(u=u!=null)?vs(t,h):Br),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=rl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function yd(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&rl.enqueueReplaceState(r,r.state,null)}function oc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Qu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=_n(p):(p=Jt(r)?Ai:zt.current,h.context=vs(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(sc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&rl.enqueueReplaceState(h,h.state,null),Ya(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Cs(t,r){try{var o="",u=r;do o+=Ce(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function ac(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function lc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var $y=typeof WeakMap=="function"?WeakMap:Map;function vd(t,r,o){o=_r(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){cl||(cl=!0,Sc=u),lc(t,r)},o}function _d(t,r,o){o=_r(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){lc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){lc(t,r),typeof u!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function Ed(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new $y;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=rv.bind(null,t,r,o),r.then(t,t))}function Td(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function wd(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=_r(-1,1),r.tag=2,Hr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Hy=Ae.ReactCurrentOwner,Zt=!1;function Gt(t,r,o,u){r.child=t===null?bf(r,null,o,u):ws(r,t.child,o,u)}function Sd(t,r,o,u,h){o=o.render;var p=r.ref;return Is(r,h),u=Zu(t,r,o,u,p,h),o=ec(),t!==null&&!Zt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Er(t,r,h)):(Ze&&o&&Mu(r),r.flags|=1,Gt(t,r,u,h),r.child)}function Id(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!xc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Ad(t,r,p,u,h)):(t=gl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:_o,o(y,u)&&t.ref===r.ref)return Er(t,r,h)}return r.flags|=1,t=Yr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Ad(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(_o(p,u)&&t.ref===r.ref)if(Zt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Zt=!0);else return r.lanes=t.lanes,Er(t,r,h)}return uc(t,r,o,u,h)}function Cd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Ps,fn),fn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ke(Ps,fn),fn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Ke(Ps,fn),fn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,Ke(Ps,fn),fn|=u;return Gt(t,r,h,o),r.child}function Rd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function uc(t,r,o,u,h){var p=Jt(o)?Ai:zt.current;return p=vs(r,p),Is(r,h),o=Zu(t,r,o,u,p,h),u=ec(),t!==null&&!Zt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Er(t,r,h)):(Ze&&u&&Mu(r),r.flags|=1,Gt(t,r,o,h),r.child)}function Pd(t,r,o,u,h){if(Jt(o)){var p=!0;Ba(r)}else p=!1;if(Is(r,h),r.stateNode===null)sl(t,r),gd(r,o,u),oc(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,T=r.memoizedProps;y.props=T;var C=y.context,z=o.contextType;typeof z=="object"&&z!==null?z=_n(z):(z=Jt(o)?Ai:zt.current,z=vs(r,z));var q=o.getDerivedStateFromProps,Q=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function";Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==u||C!==z)&&yd(r,y,u,z),$r=!1;var H=r.memoizedState;y.state=H,Ya(r,u,y,h),C=r.memoizedState,T!==u||H!==C||Xt.current||$r?(typeof q=="function"&&(sc(r,o,q,u),C=r.memoizedState),(T=$r||md(r,o,T,u,H,C,z))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=C),y.props=u,y.state=C,y.context=z,u=T):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Hf(t,r),T=r.memoizedProps,z=r.type===r.elementType?T:Fn(r.type,T),y.props=z,Q=r.pendingProps,H=y.context,C=o.contextType,typeof C=="object"&&C!==null?C=_n(C):(C=Jt(o)?Ai:zt.current,C=vs(r,C));var te=o.getDerivedStateFromProps;(q=typeof te=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==Q||H!==C)&&yd(r,y,u,C),$r=!1,H=r.memoizedState,y.state=H,Ya(r,u,y,h);var ie=r.memoizedState;T!==Q||H!==ie||Xt.current||$r?(typeof te=="function"&&(sc(r,o,te,u),ie=r.memoizedState),(z=$r||md(r,o,z,u,H,ie,C)||!1)?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ie,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ie,C)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ie),y.props=u,y.state=ie,y.context=C,u=z):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),u=!1)}return cc(t,r,o,u,p,h)}function cc(t,r,o,u,h,p){Rd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Nf(r,o,!1),Er(t,r,p);u=r.stateNode,Hy.current=r;var T=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=ws(r,t.child,null,p),r.child=ws(r,null,T,p)):Gt(t,r,T,p),r.memoizedState=u.state,h&&Nf(r,o,!0),r.child}function kd(t){var r=t.stateNode;r.pendingContext?Vf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Vf(t,r.context,!1),Gu(t,r.containerInfo)}function xd(t,r,o,u,h){return Ts(),ju(h),r.flags|=256,Gt(t,r,o,u),r.child}var hc={dehydrated:null,treeContext:null,retryLane:0};function fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vd(t,r,o){var u=r.pendingProps,h=nt.current,p=!1,y=(r.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Ke(nt,h&1),t===null)return Uu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=yl(y,u,0,null),t=Li(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=fc(o),r.memoizedState=hc,t):dc(r,y));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return qy(t,r,y,u,T,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,T=h.sibling;var C={mode:"hidden",children:u.children};return(y&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=C,r.deletions=null):(u=Yr(h,C),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Yr(T,p):(p=Li(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?fc(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=hc,u}return p=t.child,t=p.sibling,u=Yr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function dc(t,r){return r=yl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function il(t,r,o,u){return u!==null&&ju(u),ws(r,t.child,null,o),t=dc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function qy(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=ac(Error(n(422))),il(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=yl({mode:"visible",children:u.children},h,0,null),p=Li(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&ws(r,t.child,null,y),r.child.memoizedState=fc(y),r.memoizedState=hc,p);if((r.mode&1)===0)return il(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=ac(p,u,void 0),il(t,r,y,u)}if(T=(y&t.childLanes)!==0,Zt||T){if(u=Rt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|y))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,vr(t,h),jn(u,t,h,-1))}return kc(),u=ac(Error(n(421))),il(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=iv.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,hn=Ur(h.nextSibling),cn=r,Ze=!0,Mn=null,t!==null&&(yn[vn++]=gr,yn[vn++]=yr,yn[vn++]=Ci,gr=t.id,yr=t.overflow,Ci=r),r=dc(r,u.children),r.flags|=4096,r)}function Dd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Hu(t.return,r,o)}function pc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Nd(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Gt(t,r,u.children,o),u=nt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dd(t,o,r);else if(t.tag===19)Dd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ke(nt,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&Xa(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),pc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Xa(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}pc(r,!0,o,null,p);break;case"together":pc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function sl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Er(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Vi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Yr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Yr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Qy(t,r,o){switch(r.tag){case 3:kd(r),Ts();break;case 5:Gf(r);break;case 1:Jt(r.type)&&Ba(r);break;case 4:Gu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Ke(Ga,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Ke(nt,nt.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Vd(t,r,o):(Ke(nt,nt.current&1),t=Er(t,r,o),t!==null?t.sibling:null);Ke(nt,nt.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Nd(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ke(nt,nt.current),u)break;return null;case 22:case 23:return r.lanes=0,Cd(t,r,o)}return Er(t,r,o)}var Od,mc,Ld,Md;Od=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},mc=function(){},Ld=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,ki(Xn.current);var p=null;switch(o){case"input":h=sr(t,h),u=sr(t,u),p=[];break;case"select":h=ee({},h,{value:void 0}),u=ee({},u,{value:void 0}),p=[];break;case"textarea":h=xt(t,h),u=xt(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=za)}Zs(o,u);var y;o=null;for(z in h)if(!u.hasOwnProperty(z)&&h.hasOwnProperty(z)&&h[z]!=null)if(z==="style"){var T=h[z];for(y in T)T.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(l.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in u){var C=u[z];if(T=h!=null?h[z]:void 0,u.hasOwnProperty(z)&&C!==T&&(C!=null||T!=null))if(z==="style")if(T){for(y in T)!T.hasOwnProperty(y)||C&&C.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in C)C.hasOwnProperty(y)&&T[y]!==C[y]&&(o||(o={}),o[y]=C[y])}else o||(p||(p=[]),p.push(z,o)),o=C;else z==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,T=T?T.__html:void 0,C!=null&&T!==C&&(p=p||[]).push(z,C)):z==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(z,""+C):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(l.hasOwnProperty(z)?(C!=null&&z==="onScroll"&&Ye("scroll",t),p||T===C||(p=[])):(p=p||[]).push(z,C))}o&&(p=p||[]).push("style",o);var z=p;(r.updateQueue=z)&&(r.flags|=4)}},Md=function(t,r,o,u){o!==u&&(r.flags|=4)};function Oo(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Gy(t,r,o){var u=r.pendingProps;switch(Fu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(r),null;case 1:return Jt(r.type)&&ja(),jt(r),null;case 3:return u=r.stateNode,As(),Xe(Xt),Xe(zt),Yu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(qa(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Mn!==null&&(Cc(Mn),Mn=null))),mc(t,r),jt(r),null;case 5:Wu(r);var h=ki(ko.current);if(o=r.type,t!==null&&r.stateNode!=null)Ld(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return jt(r),null}if(t=ki(Xn.current),qa(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Yn]=r,u[Io]=p,t=(r.mode&1)!==0,o){case"dialog":Ye("cancel",u),Ye("close",u);break;case"iframe":case"object":case"embed":Ye("load",u);break;case"video":case"audio":for(h=0;h<To.length;h++)Ye(To[h],u);break;case"source":Ye("error",u);break;case"img":case"image":case"link":Ye("error",u),Ye("load",u);break;case"details":Ye("toggle",u);break;case"input":Rr(u,p),Ye("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ye("invalid",u);break;case"textarea":st(u,p),Ye("invalid",u)}Zs(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var T=p[y];y==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Fa(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Fa(u.textContent,T,t),h=["children",""+T]):l.hasOwnProperty(y)&&T!=null&&y==="onScroll"&&Ye("scroll",u)}switch(o){case"input":An(u),ae(u,p,!0);break;case"textarea":An(u),or(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=za)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[Yn]=r,t[Io]=u,Od(t,r,!1,!1),r.stateNode=t;e:{switch(y=eo(o,u),o){case"dialog":Ye("cancel",t),Ye("close",t),h=u;break;case"iframe":case"object":case"embed":Ye("load",t),h=u;break;case"video":case"audio":for(h=0;h<To.length;h++)Ye(To[h],t);h=u;break;case"source":Ye("error",t),h=u;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),h=u;break;case"details":Ye("toggle",t),h=u;break;case"input":Rr(t,u),h=sr(t,u),Ye("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ee({},u,{value:void 0}),Ye("invalid",t);break;case"textarea":st(t,u),h=xt(t,u),Ye("invalid",t);break;default:h=u}Zs(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var C=T[p];p==="style"?Xs(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Ks(t,C)):p==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&Pr(t,C):typeof C=="number"&&Pr(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(l.hasOwnProperty(p)?C!=null&&p==="onScroll"&&Ye("scroll",t):C!=null&&Ee(t,p,C,y))}switch(o){case"input":An(t),ae(t,u,!1);break;case"textarea":An(t),or(t);break;case"option":u.value!=null&&t.setAttribute("value",""+je(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Ne(t,!!u.multiple,p,!1):u.defaultValue!=null&&Ne(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=za)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return jt(r),null;case 6:if(t&&r.stateNode!=null)Md(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=ki(ko.current),ki(Xn.current),qa(r)){if(u=r.stateNode,o=r.memoizedProps,u[Yn]=r,(p=u.nodeValue!==o)&&(t=cn,t!==null))switch(t.tag){case 3:Fa(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Yn]=r,r.stateNode=u}return jt(r),null;case 13:if(Xe(nt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&hn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Uf(),Ts(),r.flags|=98560,p=!1;else if(p=qa(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Yn]=r}else Ts(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),p=!1}else Mn!==null&&(Cc(Mn),Mn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(nt.current&1)!==0?Et===0&&(Et=3):kc())),r.updateQueue!==null&&(r.flags|=4),jt(r),null);case 4:return As(),mc(t,r),t===null&&wo(r.stateNode.containerInfo),jt(r),null;case 10:return $u(r.type._context),jt(r),null;case 17:return Jt(r.type)&&ja(),jt(r),null;case 19:if(Xe(nt),p=r.memoizedState,p===null)return jt(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Oo(p,!1);else{if(Et!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(y=Xa(t),y!==null){for(r.flags|=128,Oo(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Ke(nt,nt.current&1|2),r.child}t=t.sibling}p.tail!==null&&We()>ks&&(r.flags|=128,u=!0,Oo(p,!1),r.lanes=4194304)}else{if(!u)if(t=Xa(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Oo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Ze)return jt(r),null}else 2*We()-p.renderingStartTime>ks&&o!==1073741824&&(r.flags|=128,u=!0,Oo(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=We(),r.sibling=null,o=nt.current,Ke(nt,u?o&1|2:o&1),r):(jt(r),null);case 22:case 23:return Pc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(fn&1073741824)!==0&&(jt(r),r.subtreeFlags&6&&(r.flags|=8192)):jt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Wy(t,r){switch(Fu(r),r.tag){case 1:return Jt(r.type)&&ja(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return As(),Xe(Xt),Xe(zt),Yu(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Wu(r),null;case 13:if(Xe(nt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ts()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Xe(nt),null;case 4:return As(),null;case 10:return $u(r.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var ol=!1,Bt=!1,Ky=typeof WeakSet=="function"?WeakSet:Set,re=null;function Rs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){ot(t,r,u)}else o.current=null}function gc(t,r,o){try{o()}catch(u){ot(t,r,u)}}var Fd=!1;function Yy(t,r){if(Pu=Mr,t=mf(),Eu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,T=-1,C=-1,z=0,q=0,Q=t,H=null;t:for(;;){for(var te;Q!==o||h!==0&&Q.nodeType!==3||(T=y+h),Q!==p||u!==0&&Q.nodeType!==3||(C=y+u),Q.nodeType===3&&(y+=Q.nodeValue.length),(te=Q.firstChild)!==null;)H=Q,Q=te;for(;;){if(Q===t)break t;if(H===o&&++z===h&&(T=y),H===p&&++q===u&&(C=y),(te=Q.nextSibling)!==null)break;Q=H,H=Q.parentNode}Q=te}o=T===-1||C===-1?null:{start:T,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(ku={focusedElem:t,selectionRange:o},Mr=!1,re=r;re!==null;)if(r=re,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,re=t;else for(;re!==null;){r=re;try{var ie=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var oe=ie.memoizedProps,ut=ie.memoizedState,M=r.stateNode,P=M.getSnapshotBeforeUpdate(r.elementType===r.type?oe:Fn(r.type,oe),ut);M.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){ot(r,r.return,K)}if(t=r.sibling,t!==null){t.return=r.return,re=t;break}re=r.return}return ie=Fd,Fd=!1,ie}function Lo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&gc(r,o,p)}h=h.next}while(h!==u)}}function al(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function yc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function zd(t){var r=t.alternate;r!==null&&(t.alternate=null,zd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Yn],delete r[Io],delete r[Nu],delete r[Dy],delete r[Ny])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ud(t){return t.tag===5||t.tag===3||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ud(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=za));else if(u!==4&&(t=t.child,t!==null))for(vc(t,r,o),t=t.sibling;t!==null;)vc(t,r,o),t=t.sibling}function _c(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(_c(t,r,o),t=t.sibling;t!==null;)_c(t,r,o),t=t.sibling}var Nt=null,zn=!1;function qr(t,r,o){for(o=o.child;o!==null;)Bd(t,r,o),o=o.sibling}function Bd(t,r,o){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(yi,o)}catch{}switch(o.tag){case 5:Bt||Rs(o,r);case 6:var u=Nt,h=zn;Nt=null,qr(t,r,o),Nt=u,zn=h,Nt!==null&&(zn?(t=Nt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Nt.removeChild(o.stateNode));break;case 18:Nt!==null&&(zn?(t=Nt,o=o.stateNode,t.nodeType===8?Du(t.parentNode,o):t.nodeType===1&&Du(t,o),Nn(t)):Du(Nt,o.stateNode));break;case 4:u=Nt,h=zn,Nt=o.stateNode.containerInfo,zn=!0,qr(t,r,o),Nt=u,zn=h;break;case 0:case 11:case 14:case 15:if(!Bt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&gc(o,r,y),h=h.next}while(h!==u)}qr(t,r,o);break;case 1:if(!Bt&&(Rs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){ot(o,r,T)}qr(t,r,o);break;case 21:qr(t,r,o);break;case 22:o.mode&1?(Bt=(u=Bt)||o.memoizedState!==null,qr(t,r,o),Bt=u):qr(t,r,o);break;default:qr(t,r,o)}}function bd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Ky),r.forEach(function(u){var h=sv.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Un(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,T=y;e:for(;T!==null;){switch(T.tag){case 5:Nt=T.stateNode,zn=!1;break e;case 3:Nt=T.stateNode.containerInfo,zn=!0;break e;case 4:Nt=T.stateNode.containerInfo,zn=!0;break e}T=T.return}if(Nt===null)throw Error(n(160));Bd(p,y,h),Nt=null,zn=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(z){ot(h,r,z)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)$d(r,t),r=r.sibling}function $d(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(r,t),Zn(t),u&4){try{Lo(3,t,t.return),al(3,t)}catch(oe){ot(t,t.return,oe)}try{Lo(5,t,t.return)}catch(oe){ot(t,t.return,oe)}}break;case 1:Un(r,t),Zn(t),u&512&&o!==null&&Rs(o,o.return);break;case 5:if(Un(r,t),Zn(t),u&512&&o!==null&&Rs(o,o.return),t.flags&32){var h=t.stateNode;try{Pr(h,"")}catch(oe){ot(t,t.return,oe)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,T=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&se(h,p),eo(T,y);var z=eo(T,p);for(y=0;y<C.length;y+=2){var q=C[y],Q=C[y+1];q==="style"?Xs(h,Q):q==="dangerouslySetInnerHTML"?Ks(h,Q):q==="children"?Pr(h,Q):Ee(h,q,Q,z)}switch(T){case"input":ce(h,p);break;case"textarea":sn(h,p);break;case"select":var H=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var te=p.value;te!=null?Ne(h,!!p.multiple,te,!1):H!==!!p.multiple&&(p.defaultValue!=null?Ne(h,!!p.multiple,p.defaultValue,!0):Ne(h,!!p.multiple,p.multiple?[]:"",!1))}h[Io]=p}catch(oe){ot(t,t.return,oe)}}break;case 6:if(Un(r,t),Zn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(oe){ot(t,t.return,oe)}}break;case 3:if(Un(r,t),Zn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Nn(r.containerInfo)}catch(oe){ot(t,t.return,oe)}break;case 4:Un(r,t),Zn(t);break;case 13:Un(r,t),Zn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(wc=We())),u&4&&bd(t);break;case 22:if(q=o!==null&&o.memoizedState!==null,t.mode&1?(Bt=(z=Bt)||q,Un(r,t),Bt=z):Un(r,t),Zn(t),u&8192){if(z=t.memoizedState!==null,(t.stateNode.isHidden=z)&&!q&&(t.mode&1)!==0)for(re=t,q=t.child;q!==null;){for(Q=re=q;re!==null;){switch(H=re,te=H.child,H.tag){case 0:case 11:case 14:case 15:Lo(4,H,H.return);break;case 1:Rs(H,H.return);var ie=H.stateNode;if(typeof ie.componentWillUnmount=="function"){u=H,o=H.return;try{r=u,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(oe){ot(u,o,oe)}}break;case 5:Rs(H,H.return);break;case 22:if(H.memoizedState!==null){Qd(Q);continue}}te!==null?(te.return=H,re=te):Qd(Q)}q=q.sibling}e:for(q=null,Q=t;;){if(Q.tag===5){if(q===null){q=Q;try{h=Q.stateNode,z?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=Q.stateNode,C=Q.memoizedProps.style,y=C!=null&&C.hasOwnProperty("display")?C.display:null,T.style.display=Ys("display",y))}catch(oe){ot(t,t.return,oe)}}}else if(Q.tag===6){if(q===null)try{Q.stateNode.nodeValue=z?"":Q.memoizedProps}catch(oe){ot(t,t.return,oe)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===t)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===t)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===t)break e;q===Q&&(q=null),Q=Q.return}q===Q&&(q=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Un(r,t),Zn(t),u&4&&bd(t);break;case 21:break;default:Un(r,t),Zn(t)}}function Zn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Ud(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Pr(h,""),u.flags&=-33);var p=jd(t);_c(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,T=jd(t);vc(t,T,y);break;default:throw Error(n(161))}}catch(C){ot(t,t.return,C)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Xy(t,r,o){re=t,Hd(t)}function Hd(t,r,o){for(var u=(t.mode&1)!==0;re!==null;){var h=re,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||ol;if(!y){var T=h.alternate,C=T!==null&&T.memoizedState!==null||Bt;T=ol;var z=Bt;if(ol=y,(Bt=C)&&!z)for(re=h;re!==null;)y=re,C=y.child,y.tag===22&&y.memoizedState!==null?Gd(h):C!==null?(C.return=y,re=C):Gd(h);for(;p!==null;)re=p,Hd(p),p=p.sibling;re=h,ol=T,Bt=z}qd(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,re=p):qd(t)}}function qd(t){for(;re!==null;){var r=re;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Bt||al(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Bt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Fn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Qf(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Qf(r,y,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var z=r.alternate;if(z!==null){var q=z.memoizedState;if(q!==null){var Q=q.dehydrated;Q!==null&&Nn(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bt||r.flags&512&&yc(r)}catch(H){ot(r,r.return,H)}}if(r===t){re=null;break}if(o=r.sibling,o!==null){o.return=r.return,re=o;break}re=r.return}}function Qd(t){for(;re!==null;){var r=re;if(r===t){re=null;break}var o=r.sibling;if(o!==null){o.return=r.return,re=o;break}re=r.return}}function Gd(t){for(;re!==null;){var r=re;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{al(4,r)}catch(C){ot(r,o,C)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(C){ot(r,h,C)}}var p=r.return;try{yc(r)}catch(C){ot(r,p,C)}break;case 5:var y=r.return;try{yc(r)}catch(C){ot(r,y,C)}}}catch(C){ot(r,r.return,C)}if(r===t){re=null;break}var T=r.sibling;if(T!==null){T.return=r.return,re=T;break}re=r.return}}var Jy=Math.ceil,ll=Ae.ReactCurrentDispatcher,Ec=Ae.ReactCurrentOwner,Tn=Ae.ReactCurrentBatchConfig,Be=0,Rt=null,dt=null,Ot=0,fn=0,Ps=jr(0),Et=0,Mo=null,Vi=0,ul=0,Tc=0,Fo=null,en=null,wc=0,ks=1/0,Tr=null,cl=!1,Sc=null,Qr=null,hl=!1,Gr=null,fl=0,zo=0,Ic=null,dl=-1,pl=0;function Wt(){return(Be&6)!==0?We():dl!==-1?dl:dl=We()}function Wr(t){return(t.mode&1)===0?1:(Be&2)!==0&&Ot!==0?Ot&-Ot:Ly.transition!==null?(pl===0&&(pl=_i()),pl):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:ho(t.type)),t)}function jn(t,r,o,u){if(50<zo)throw zo=0,Ic=null,Error(n(185));Dr(t,o,u),((Be&2)===0||t!==Rt)&&(t===Rt&&((Be&2)===0&&(ul|=o),Et===4&&Kr(t,Ot)),tn(t,u),o===1&&Be===0&&(r.mode&1)===0&&(ks=We()+500,ba&&br()))}function tn(t,r){var o=t.callbackNode;ur(t,r);var u=vi(t,t===Rt?Ot:0);if(u===0)o!==null&&oo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&oo(o),r===1)t.tag===0?Oy(Kd.bind(null,t)):Of(Kd.bind(null,t)),xy(function(){(Be&6)===0&&br()}),o=null;else{switch(Or(u)){case 1:o=gi;break;case 4:o=kr;break;case 16:o=pn;break;case 536870912:o=pa;break;default:o=pn}o=rp(o,Wd.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Wd(t,r){if(dl=-1,pl=0,(Be&6)!==0)throw Error(n(327));var o=t.callbackNode;if(xs()&&t.callbackNode!==o)return null;var u=vi(t,t===Rt?Ot:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=ml(t,u);else{r=u;var h=Be;Be|=2;var p=Xd();(Rt!==t||Ot!==r)&&(Tr=null,ks=We()+500,Ni(t,r));do try{tv();break}catch(T){Yd(t,T)}while(!0);bu(),ll.current=p,Be=h,dt!==null?r=0:(Rt=null,Ot=0,r=Et)}if(r!==0){if(r===2&&(h=an(t),h!==0&&(u=h,r=Ac(t,h))),r===1)throw o=Mo,Ni(t,0),Kr(t,u),tn(t,We()),o;if(r===6)Kr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Zy(h)&&(r=ml(t,u),r===2&&(p=an(t),p!==0&&(u=p,r=Ac(t,p))),r===1))throw o=Mo,Ni(t,0),Kr(t,u),tn(t,We()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Oi(t,en,Tr);break;case 3:if(Kr(t,u),(u&130023424)===u&&(r=wc+500-We(),10<r)){if(vi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Wt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Vu(Oi.bind(null,t,en,Tr),r);break}Oi(t,en,Tr);break;case 4:if(Kr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-qt(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=We()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Jy(u/1960))-u,10<u){t.timeoutHandle=Vu(Oi.bind(null,t,en,Tr),u);break}Oi(t,en,Tr);break;case 5:Oi(t,en,Tr);break;default:throw Error(n(329))}}}return tn(t,We()),t.callbackNode===o?Wd.bind(null,t):null}function Ac(t,r){var o=Fo;return t.current.memoizedState.isDehydrated&&(Ni(t,r).flags|=256),t=ml(t,r),t!==2&&(r=en,en=o,r!==null&&Cc(r)),t}function Cc(t){en===null?en=t:en.push.apply(en,t)}function Zy(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Ln(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kr(t,r){for(r&=~Tc,r&=~ul,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-qt(r),u=1<<o;t[o]=-1,r&=~u}}function Kd(t){if((Be&6)!==0)throw Error(n(327));xs();var r=vi(t,0);if((r&1)===0)return tn(t,We()),null;var o=ml(t,r);if(t.tag!==0&&o===2){var u=an(t);u!==0&&(r=u,o=Ac(t,u))}if(o===1)throw o=Mo,Ni(t,0),Kr(t,r),tn(t,We()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Oi(t,en,Tr),tn(t,We()),null}function Rc(t,r){var o=Be;Be|=1;try{return t(r)}finally{Be=o,Be===0&&(ks=We()+500,ba&&br())}}function Di(t){Gr!==null&&Gr.tag===0&&(Be&6)===0&&xs();var r=Be;Be|=1;var o=Tn.transition,u=Oe;try{if(Tn.transition=null,Oe=1,t)return t()}finally{Oe=u,Tn.transition=o,Be=r,(Be&6)===0&&br()}}function Pc(){fn=Ps.current,Xe(Ps)}function Ni(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,ky(o)),dt!==null)for(o=dt.return;o!==null;){var u=o;switch(Fu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ja();break;case 3:As(),Xe(Xt),Xe(zt),Yu();break;case 5:Wu(u);break;case 4:As();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:$u(u.type._context);break;case 22:case 23:Pc()}o=o.return}if(Rt=t,dt=t=Yr(t.current,null),Ot=fn=r,Et=0,Mo=null,Tc=ul=Vi=0,en=Fo=null,Pi!==null){for(r=0;r<Pi.length;r++)if(o=Pi[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}Pi=null}return t}function Yd(t,r){do{var o=dt;try{if(bu(),Ja.current=nl,Za){for(var u=rt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Za=!1}if(xi=0,Ct=_t=rt=null,xo=!1,Vo=0,Ec.current=null,o===null||o.return===null){Et=1,Mo=r,dt=null;break}e:{var p=t,y=o.return,T=o,C=r;if(r=Ot,T.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var z=C,q=T,Q=q.tag;if((q.mode&1)===0&&(Q===0||Q===11||Q===15)){var H=q.alternate;H?(q.updateQueue=H.updateQueue,q.memoizedState=H.memoizedState,q.lanes=H.lanes):(q.updateQueue=null,q.memoizedState=null)}var te=Td(y);if(te!==null){te.flags&=-257,wd(te,y,T,p,r),te.mode&1&&Ed(p,z,r),r=te,C=z;var ie=r.updateQueue;if(ie===null){var oe=new Set;oe.add(C),r.updateQueue=oe}else ie.add(C);break e}else{if((r&1)===0){Ed(p,z,r),kc();break e}C=Error(n(426))}}else if(Ze&&T.mode&1){var ut=Td(y);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),wd(ut,y,T,p,r),ju(Cs(C,T));break e}}p=C=Cs(C,T),Et!==4&&(Et=2),Fo===null?Fo=[p]:Fo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=vd(p,C,r);qf(p,M);break e;case 1:T=C;var P=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Qr===null||!Qr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var K=_d(p,T,r);qf(p,K);break e}}p=p.return}while(p!==null)}Zd(o)}catch(le){r=le,dt===o&&o!==null&&(dt=o=o.return);continue}break}while(!0)}function Xd(){var t=ll.current;return ll.current=nl,t===null?nl:t}function kc(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||(Vi&268435455)===0&&(ul&268435455)===0||Kr(Rt,Ot)}function ml(t,r){var o=Be;Be|=2;var u=Xd();(Rt!==t||Ot!==r)&&(Tr=null,Ni(t,r));do try{ev();break}catch(h){Yd(t,h)}while(!0);if(bu(),Be=o,ll.current=u,dt!==null)throw Error(n(261));return Rt=null,Ot=0,Et}function ev(){for(;dt!==null;)Jd(dt)}function tv(){for(;dt!==null&&!fa();)Jd(dt)}function Jd(t){var r=np(t.alternate,t,fn);t.memoizedProps=t.pendingProps,r===null?Zd(t):dt=r,Ec.current=null}function Zd(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Gy(o,r,fn),o!==null){dt=o;return}}else{if(o=Wy(o,r),o!==null){o.flags&=32767,dt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,dt=null;return}}if(r=r.sibling,r!==null){dt=r;return}dt=r=t}while(r!==null);Et===0&&(Et=5)}function Oi(t,r,o){var u=Oe,h=Tn.transition;try{Tn.transition=null,Oe=1,nv(t,r,o,u)}finally{Tn.transition=h,Oe=u}return null}function nv(t,r,o,u){do xs();while(Gr!==null);if((Be&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Ge(t,p),t===Rt&&(dt=Rt=null,Ot=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||hl||(hl=!0,rp(pn,function(){return xs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=Tn.transition,Tn.transition=null;var y=Oe;Oe=1;var T=Be;Be|=4,Ec.current=null,Yy(t,o),$d(o,t),wy(ku),Mr=!!Pu,ku=Pu=null,t.current=o,Xy(o),fu(),Be=T,Oe=y,Tn.transition=p}else t.current=o;if(hl&&(hl=!1,Gr=t,fl=h),p=t.pendingLanes,p===0&&(Qr=null),ma(o.stateNode),tn(t,We()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(cl)throw cl=!1,t=Sc,Sc=null,t;return(fl&1)!==0&&t.tag!==0&&xs(),p=t.pendingLanes,(p&1)!==0?t===Ic?zo++:(zo=0,Ic=t):zo=0,br(),null}function xs(){if(Gr!==null){var t=Or(fl),r=Tn.transition,o=Oe;try{if(Tn.transition=null,Oe=16>t?16:t,Gr===null)var u=!1;else{if(t=Gr,Gr=null,fl=0,(Be&6)!==0)throw Error(n(331));var h=Be;for(Be|=4,re=t.current;re!==null;){var p=re,y=p.child;if((re.flags&16)!==0){var T=p.deletions;if(T!==null){for(var C=0;C<T.length;C++){var z=T[C];for(re=z;re!==null;){var q=re;switch(q.tag){case 0:case 11:case 15:Lo(8,q,p)}var Q=q.child;if(Q!==null)Q.return=q,re=Q;else for(;re!==null;){q=re;var H=q.sibling,te=q.return;if(zd(q),q===z){re=null;break}if(H!==null){H.return=te,re=H;break}re=te}}}var ie=p.alternate;if(ie!==null){var oe=ie.child;if(oe!==null){ie.child=null;do{var ut=oe.sibling;oe.sibling=null,oe=ut}while(oe!==null)}}re=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,re=y;else e:for(;re!==null;){if(p=re,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Lo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,re=M;break e}re=p.return}}var P=t.current;for(re=P;re!==null;){y=re;var F=y.child;if((y.subtreeFlags&2064)!==0&&F!==null)F.return=y,re=F;else e:for(y=P;re!==null;){if(T=re,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:al(9,T)}}catch(le){ot(T,T.return,le)}if(T===y){re=null;break e}var K=T.sibling;if(K!==null){K.return=T.return,re=K;break e}re=T.return}}if(Be=h,br(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(yi,t)}catch{}u=!0}return u}finally{Oe=o,Tn.transition=r}}return!1}function ep(t,r,o){r=Cs(o,r),r=vd(t,r,1),t=Hr(t,r,1),r=Wt(),t!==null&&(Dr(t,1,r),tn(t,r))}function ot(t,r,o){if(t.tag===3)ep(t,t,o);else for(;r!==null;){if(r.tag===3){ep(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qr===null||!Qr.has(u))){t=Cs(o,t),t=_d(r,t,1),r=Hr(r,t,1),t=Wt(),r!==null&&(Dr(r,1,t),tn(r,t));break}}r=r.return}}function rv(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Wt(),t.pingedLanes|=t.suspendedLanes&o,Rt===t&&(Ot&o)===o&&(Et===4||Et===3&&(Ot&130023424)===Ot&&500>We()-wc?Ni(t,0):Tc|=o),tn(t,r)}function tp(t,r){r===0&&((t.mode&1)===0?r=1:(r=Zi,Zi<<=1,(Zi&130023424)===0&&(Zi=4194304)));var o=Wt();t=vr(t,r),t!==null&&(Dr(t,r,o),tn(t,o))}function iv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),tp(t,o)}function sv(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),tp(t,o)}var np;np=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Xt.current)Zt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Zt=!1,Qy(t,r,o);Zt=(t.flags&131072)!==0}else Zt=!1,Ze&&(r.flags&1048576)!==0&&Lf(r,Ha,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;sl(t,r),t=r.pendingProps;var h=vs(r,zt.current);Is(r,o),h=Zu(null,r,u,t,h,o);var p=ec();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Jt(u)?(p=!0,Ba(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Qu(r),h.updater=rl,r.stateNode=h,h._reactInternals=r,oc(r,u,t,o),r=cc(null,r,u,!0,p,o)):(r.tag=0,Ze&&p&&Mu(r),Gt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(sl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=av(u),t=Fn(u,t),h){case 0:r=uc(null,r,u,t,o);break e;case 1:r=Pd(null,r,u,t,o);break e;case 11:r=Sd(null,r,u,t,o);break e;case 14:r=Id(null,r,u,Fn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Fn(u,h),uc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Fn(u,h),Pd(t,r,u,h,o);case 3:e:{if(kd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Hf(t,r),Ya(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Cs(Error(n(423)),r),r=xd(t,r,u,o,h);break e}else if(u!==h){h=Cs(Error(n(424)),r),r=xd(t,r,u,o,h);break e}else for(hn=Ur(r.stateNode.containerInfo.firstChild),cn=r,Ze=!0,Mn=null,o=bf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ts(),u===h){r=Er(t,r,o);break e}Gt(t,r,u,o)}r=r.child}return r;case 5:return Gf(r),t===null&&Uu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,xu(u,h)?y=null:p!==null&&xu(u,p)&&(r.flags|=32),Rd(t,r),Gt(t,r,y,o),r.child;case 6:return t===null&&Uu(r),null;case 13:return Vd(t,r,o);case 4:return Gu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ws(r,null,u,o):Gt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Fn(u,h),Sd(t,r,u,h,o);case 7:return Gt(t,r,r.pendingProps,o),r.child;case 8:return Gt(t,r,r.pendingProps.children,o),r.child;case 12:return Gt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,Ke(Ga,u._currentValue),u._currentValue=y,p!==null)if(Ln(p.value,y)){if(p.children===h.children&&!Xt.current){r=Er(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){y=p.child;for(var C=T.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=_r(-1,o&-o),C.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var q=z.pending;q===null?C.next=C:(C.next=q.next,q.next=C),z.pending=C}}p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Hu(p.return,o,r),T.lanes|=o;break}C=C.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,T=y.alternate,T!==null&&(T.lanes|=o),Hu(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Gt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Is(r,o),h=_n(h),u=u(h),r.flags|=1,Gt(t,r,u,o),r.child;case 14:return u=r.type,h=Fn(u,r.pendingProps),h=Fn(u.type,h),Id(t,r,u,h,o);case 15:return Ad(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Fn(u,h),sl(t,r),r.tag=1,Jt(u)?(t=!0,Ba(r)):t=!1,Is(r,o),gd(r,u,h),oc(r,u,h,o),cc(null,r,u,!0,t,o);case 19:return Nd(t,r,o);case 22:return Cd(t,r,o)}throw Error(n(156,r.tag))};function rp(t,r){return Xi(t,r)}function ov(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,r,o,u){return new ov(t,r,o,u)}function xc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function av(t){if(typeof t=="function")return xc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===mt)return 14}return 2}function Yr(t,r){var o=t.alternate;return o===null?(o=wn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function gl(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")xc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case k:return Li(o.children,h,p,r);case w:y=8,h|=8;break;case A:return t=wn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=wn(13,o,r,h),t.elementType=S,t.lanes=p,t;case Le:return t=wn(19,o,r,h),t.elementType=Le,t.lanes=p,t;case be:return yl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:y=10;break e;case x:y=9;break e;case O:y=11;break e;case mt:y=14;break e;case It:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=wn(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Li(t,r,o,u){return t=wn(7,t,u,r),t.lanes=o,t}function yl(t,r,o,u){return t=wn(22,t,u,r),t.elementType=be,t.lanes=o,t.stateNode={isHidden:!1},t}function Vc(t,r,o){return t=wn(6,t,null,r),t.lanes=o,t}function Dc(t,r,o){return r=wn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function lv(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vr(0),this.expirationTimes=Vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Nc(t,r,o,u,h,p,y,T,C){return t=new lv(t,r,o,T,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=wn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qu(p),t}function uv(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ke,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function ip(t){if(!t)return Br;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Jt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Jt(o))return Df(t,o,r)}return r}function sp(t,r,o,u,h,p,y,T,C){return t=Nc(o,u,!0,t,h,p,y,T,C),t.context=ip(null),o=t.current,u=Wt(),h=Wr(o),p=_r(u,h),p.callback=r??null,Hr(o,p,h),t.current.lanes=h,Dr(t,h,u),tn(t,u),t}function vl(t,r,o,u){var h=r.current,p=Wt(),y=Wr(h);return o=ip(o),r.context===null?r.context=o:r.pendingContext=o,r=_r(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Hr(h,r,y),t!==null&&(jn(t,h,y,p),Ka(t,h,y)),y}function _l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function op(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Oc(t,r){op(t,r),(t=t.alternate)&&op(t,r)}function cv(){return null}var ap=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lc(t){this._internalRoot=t}El.prototype.render=Lc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));vl(t,r,null,null)},El.prototype.unmount=Lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Di(function(){vl(null,t,null,null)}),r[pr]=null}};function El(t){this._internalRoot=t}El.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ea();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Qn.length&&r!==0&&r<Qn[o].priority;o++);Qn.splice(o,0,t),o===0&&Sa(t)}};function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lp(){}function hv(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var z=_l(y);p.call(z)}}var y=sp(r,u,t,0,null,!1,!1,"",lp);return t._reactRootContainer=y,t[pr]=y.current,wo(t.nodeType===8?t.parentNode:t),Di(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var z=_l(C);T.call(z)}}var C=Nc(t,0,!1,null,null,!1,!1,"",lp);return t._reactRootContainer=C,t[pr]=C.current,wo(t.nodeType===8?t.parentNode:t),Di(function(){vl(r,C,o,u)}),C}function wl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var T=h;h=function(){var C=_l(y);T.call(C)}}vl(r,y,t,h)}else y=hv(o,r,t,h,u);return _l(y)}va=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=xr(r.pendingLanes);o!==0&&(Nr(r,o|1),tn(r,We()),(Be&6)===0&&(ks=We()+500,br()))}break;case 13:Di(function(){var u=vr(t,1);if(u!==null){var h=Wt();jn(u,t,1,h)}}),Oc(t,1)}},es=function(t){if(t.tag===13){var r=vr(t,134217728);if(r!==null){var o=Wt();jn(r,t,134217728,o)}Oc(t,134217728)}},_a=function(t){if(t.tag===13){var r=Wr(t),o=vr(t,r);if(o!==null){var u=Wt();jn(o,t,r,u)}Oc(t,r)}},Ea=function(){return Oe},Ta=function(t,r){var o=Oe;try{return Oe=t,r()}finally{Oe=o}},qi=function(t,r,o){switch(r){case"input":if(ce(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Ua(u);if(!h)throw Error(n(90));Cr(u),ce(u,h)}}}break;case"textarea":sn(t,o);break;case"select":r=o.value,r!=null&&Ne(t,!!o.multiple,r,!1)}},fi=Rc,no=Di;var fv={usingClientEntryPoint:!1,Events:[Ao,gs,Ua,Hn,to,Rc]},Uo={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dv={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=so(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{yi=Sl.inject(dv),on=Sl}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fv,nn.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(r))throw Error(n(200));return uv(t,r,null,o)},nn.createRoot=function(t,r){if(!Mc(t))throw Error(n(299));var o=!1,u="",h=ap;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Nc(t,1,!1,null,null,o,!1,u,h),t[pr]=r.current,wo(t.nodeType===8?t.parentNode:t),new Lc(r)},nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=so(r),t=t===null?null:t.stateNode,t},nn.flushSync=function(t){return Di(t)},nn.hydrate=function(t,r,o){if(!Tl(r))throw Error(n(200));return wl(null,t,r,!0,o)},nn.hydrateRoot=function(t,r,o){if(!Mc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=ap;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=sp(r,null,t,1,o??null,h,!1,p,y),t[pr]=r.current,wo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new El(r)},nn.render=function(t,r,o){if(!Tl(r))throw Error(n(200));return wl(null,t,r,!1,o)},nn.unmountComponentAtNode=function(t){if(!Tl(t))throw Error(n(40));return t._reactRootContainer?(Di(function(){wl(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1},nn.unstable_batchedUpdates=Rc,nn.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Tl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return wl(t,r,o,!1,u)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var gp;function wv(){if(gp)return Uc.exports;gp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Uc.exports=Tv(),Uc.exports}var yp;function Sv(){if(yp)return Il;yp=1;var i=wv();return Il.createRoot=i.createRoot,Il.hydrateRoot=i.hydrateRoot,Il}var Iv=Sv();const Av=Rm(Iv),Cv=()=>{};var vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Rv=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const l=i[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=i[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=i[n++],f=i[n++],g=i[n++],v=((l&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},km={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<i.length;l+=3){const c=i[l],f=l+1<i.length,g=f?i[l+1]:0,v=l+2<i.length,E=v?i[l+2]:0,I=c>>2,V=(c&3)<<4|g>>4;let D=(g&15)<<2|E>>6,j=E&63;v||(j=64,f||(D=64)),s.push(n[I],n[V],n[D],n[j])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Pm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Rv(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<i.length;){const c=n[i.charAt(l++)],g=l<i.length?n[i.charAt(l)]:0;++l;const E=l<i.length?n[i.charAt(l)]:64;++l;const V=l<i.length?n[i.charAt(l)]:64;if(++l,c==null||g==null||E==null||V==null)throw new Pv;const D=c<<2|g>>4;if(s.push(D),E!==64){const j=g<<4&240|E>>2;if(s.push(j),V!==64){const Y=E<<6&192|V;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Pv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kv=function(i){const e=Pm(i);return km.encodeByteArray(e,!0)},Fl=function(i){return kv(i).replace(/\./g,"")},xv=function(i){try{return km.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=()=>Vv().__FIREBASE_DEFAULTS__,Nv=()=>{if(typeof process>"u"||typeof vp>"u")return;const i=vp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Ov=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&xv(i[1]);return e&&JSON.parse(e)},_h=()=>{try{return Cv()||Dv()||Nv()||Ov()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Lv=i=>{var e,n;return(n=(e=_h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Mv=i=>{const e=Lv(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},xm=()=>{var i;return(i=_h())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i){return i.endsWith(".cloudworkstations.dev")}async function zv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Fl(JSON.stringify(n)),Fl(JSON.stringify(f)),""].join(".")}const Ho={};function jv(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ho))Ho[e]?i.emulator.push(e):i.prod.push(e);return i}function Bv(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let _p=!1;function bv(i,e){if(typeof window>"u"||typeof document>"u"||!Eh(window.location.host)||Ho[i]===e||Ho[i]||_p)return;Ho[i]=e;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=jv().prod.length>0;function f(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function v(D,j){D.setAttribute("width","24"),D.setAttribute("id",j),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function E(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{_p=!0,f()},D}function I(D,j){D.setAttribute("id",j),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function V(){const D=Bv(s),j=n("text"),Y=document.getElementById(j)||document.createElement("span"),J=n("learnmore"),$=document.getElementById(J)||document.createElement("a"),Se=n("preprendIcon"),ge=document.getElementById(Se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const Ee=D.element;g(Ee),I($,J);const Ae=E();v(ge,Se),Ee.append(ge,Y,$,Ae),document.body.appendChild(Ee)}c?(Y.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",V):V()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hv(){var i;const e=(i=_h())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qv(){return!Hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qv(){try{return typeof indexedDB=="object"}catch{return!1}}function Gv(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="FirebaseError";class Hs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Wv,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vm.prototype.create)}}class Vm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?Kv(c,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new Hs(l,g,s)}}function Kv(i,e){return i.replace(Yv,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const Yv=/\{\$([^}]+)}/g;function zl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=i[l],f=e[l];if(Ep(c)&&Ep(f)){if(!zl(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Ep(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(i){return i&&i._delegate?i._delegate:i}class Ko{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Fv;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Zv(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(l,c);const f=this.instances.get(l);return f&&e(f,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Jv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Jv(i){return i===Mi?void 0:i}function Zv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Xv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const t_={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},n_=Ue.INFO,r_={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},i_=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),l=r_[e];if(l)console[l](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=n_,this._logHandler=i_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const s_=(i,e)=>e.some(n=>i instanceof n);let Tp,wp;function o_(){return Tp||(Tp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a_(){return wp||(wp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nm=new WeakMap,Xc=new WeakMap,Om=new WeakMap,bc=new WeakMap,Th=new WeakMap;function l_(i){const e=new Promise((n,s)=>{const l=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Zr(i.result)),l()},f=()=>{s(i.error),l()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Nm.set(n,i)}).catch(()=>{}),Th.set(e,i),e}function u_(i){if(Xc.has(i))return;const e=new Promise((n,s)=>{const l=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Xc.set(i,e)}let Jc={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Xc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Om.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function c_(i){Jc=i(Jc)}function h_(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call($c(this),e,...n);return Om.set(s,e.sort?e.sort():[e]),Zr(s)}:a_().includes(i)?function(...e){return i.apply($c(this),e),Zr(Nm.get(this))}:function(...e){return Zr(i.apply($c(this),e))}}function f_(i){return typeof i=="function"?h_(i):(i instanceof IDBTransaction&&u_(i),s_(i,o_())?new Proxy(i,Jc):i)}function Zr(i){if(i instanceof IDBRequest)return l_(i);if(bc.has(i))return bc.get(i);const e=f_(i);return e!==i&&(bc.set(i,e),Th.set(e,i)),e}const $c=i=>Th.get(i);function d_(i,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(i,e),g=Zr(f);return s&&f.addEventListener("upgradeneeded",v=>{s(Zr(f.result),v.oldVersion,v.newVersion,Zr(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),l&&v.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),g}const p_=["get","getKey","getAll","getAllKeys","count"],m_=["put","add","delete","clear"],Hc=new Map;function Sp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Hc.get(e))return Hc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=m_.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||p_.includes(n)))return;const c=async function(f,...g){const v=this.transaction(f,l?"readwrite":"readonly");let E=v.store;return s&&(E=E.index(g.shift())),(await Promise.all([E[n](...g),l&&v.done]))[0]};return Hc.set(e,c),c}c_(i=>({...i,get:(e,n,s)=>Sp(e,n)||i.get(e,n,s),has:(e,n)=>!!Sp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(y_(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function y_(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zc="@firebase/app",Ip="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Dm("@firebase/app"),v_="@firebase/app-compat",__="@firebase/analytics-compat",E_="@firebase/analytics",T_="@firebase/app-check-compat",w_="@firebase/app-check",S_="@firebase/auth",I_="@firebase/auth-compat",A_="@firebase/database",C_="@firebase/data-connect",R_="@firebase/database-compat",P_="@firebase/functions",k_="@firebase/functions-compat",x_="@firebase/installations",V_="@firebase/installations-compat",D_="@firebase/messaging",N_="@firebase/messaging-compat",O_="@firebase/performance",L_="@firebase/performance-compat",M_="@firebase/remote-config",F_="@firebase/remote-config-compat",z_="@firebase/storage",U_="@firebase/storage-compat",j_="@firebase/firestore",B_="@firebase/ai",b_="@firebase/firestore-compat",$_="firebase",H_="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="[DEFAULT]",q_={[Zc]:"fire-core",[v_]:"fire-core-compat",[E_]:"fire-analytics",[__]:"fire-analytics-compat",[w_]:"fire-app-check",[T_]:"fire-app-check-compat",[S_]:"fire-auth",[I_]:"fire-auth-compat",[A_]:"fire-rtdb",[C_]:"fire-data-connect",[R_]:"fire-rtdb-compat",[P_]:"fire-fn",[k_]:"fire-fn-compat",[x_]:"fire-iid",[V_]:"fire-iid-compat",[D_]:"fire-fcm",[N_]:"fire-fcm-compat",[O_]:"fire-perf",[L_]:"fire-perf-compat",[M_]:"fire-rc",[F_]:"fire-rc-compat",[z_]:"fire-gcs",[U_]:"fire-gcs-compat",[j_]:"fire-fst",[b_]:"fire-fst-compat",[B_]:"fire-vertex","fire-js":"fire-js",[$_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new Map,Q_=new Map,th=new Map;function Ap(i,e){try{i.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Bl(i){const e=i.name;if(th.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;th.set(e,i);for(const n of jl.values())Ap(n,i);for(const n of Q_.values())Ap(n,i);return!0}function G_(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function W_(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new Vm("app","Firebase",K_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=H_;function Lm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:eh,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw ei.create("bad-app-name",{appName:String(l)});if(n||(n=xm()),!n)throw ei.create("no-options");const c=jl.get(l);if(c){if(zl(n,c.options)&&zl(s,c.config))return c;throw ei.create("duplicate-app",{appName:l})}const f=new e_(l);for(const v of th.values())f.addComponent(v);const g=new Y_(n,s,f);return jl.set(l,g),g}function J_(i=eh){const e=jl.get(i);if(!e&&i===eh&&xm())return Lm();if(!e)throw ei.create("no-app",{appName:i});return e}function Ls(i,e,n){var s;let l=(s=q_[i])!==null&&s!==void 0?s:i;n&&(l+=`-${n}`);const c=l.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const g=[`Unable to register library "${l}" with version "${e}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(g.join(" "));return}Bl(new Ko(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="firebase-heartbeat-database",eE=1,Yo="firebase-heartbeat-store";let qc=null;function Mm(){return qc||(qc=d_(Z_,eE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Yo)}catch(n){console.warn(n)}}}}).catch(i=>{throw ei.create("idb-open",{originalErrorMessage:i.message})})),qc}async function tE(i){try{const n=(await Mm()).transaction(Yo),s=await n.objectStore(Yo).get(Fm(i));return await n.done,s}catch(e){if(e instanceof Hs)Sr.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function Cp(i,e){try{const s=(await Mm()).transaction(Yo,"readwrite");await s.objectStore(Yo).put(e,Fm(i)),await s.done}catch(n){if(n instanceof Hs)Sr.warn(n.message);else{const s=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(s.message)}}}function Fm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=1024,rE=30;class iE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Rp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>rE){const f=aE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Sr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rp(),{heartbeatsToSend:s,unsentEntries:l}=sE(this._heartbeatsCache.heartbeats),c=Fl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Sr.warn(n),""}}}function Rp(){return new Date().toISOString().substring(0,10)}function sE(i,e=nE){const n=[];let s=i.slice();for(const l of i){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),Pp(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Pp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class oE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qv()?Gv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Cp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Cp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function Pp(i){return Fl(JSON.stringify({version:2,heartbeats:i})).length}function aE(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(i){Bl(new Ko("platform-logger",e=>new g_(e),"PRIVATE")),Bl(new Ko("heartbeat",e=>new iE(e),"PRIVATE")),Ls(Zc,Ip,i),Ls(Zc,Ip,"esm2017"),Ls("fire-js","")}lE("");var uE="firebase",cE="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(uE,cE,"app");var kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,zm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function A(){}A.prototype=w.prototype,k.D=w.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(R,x,O){for(var S=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)S[Le-2]=arguments[Le];return w.prototype[x].apply(R,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(k,w,A){A||(A=0);var R=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)R[x]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(x=0;16>x;++x)R[x]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=k.g[0],A=k.g[1],x=k.g[2];var O=k.g[3],S=w+(O^A&(x^O))+R[0]+3614090360&4294967295;w=A+(S<<7&4294967295|S>>>25),S=O+(x^w&(A^x))+R[1]+3905402710&4294967295,O=w+(S<<12&4294967295|S>>>20),S=x+(A^O&(w^A))+R[2]+606105819&4294967295,x=O+(S<<17&4294967295|S>>>15),S=A+(w^x&(O^w))+R[3]+3250441966&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(O^A&(x^O))+R[4]+4118548399&4294967295,w=A+(S<<7&4294967295|S>>>25),S=O+(x^w&(A^x))+R[5]+1200080426&4294967295,O=w+(S<<12&4294967295|S>>>20),S=x+(A^O&(w^A))+R[6]+2821735955&4294967295,x=O+(S<<17&4294967295|S>>>15),S=A+(w^x&(O^w))+R[7]+4249261313&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(O^A&(x^O))+R[8]+1770035416&4294967295,w=A+(S<<7&4294967295|S>>>25),S=O+(x^w&(A^x))+R[9]+2336552879&4294967295,O=w+(S<<12&4294967295|S>>>20),S=x+(A^O&(w^A))+R[10]+4294925233&4294967295,x=O+(S<<17&4294967295|S>>>15),S=A+(w^x&(O^w))+R[11]+2304563134&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(O^A&(x^O))+R[12]+1804603682&4294967295,w=A+(S<<7&4294967295|S>>>25),S=O+(x^w&(A^x))+R[13]+4254626195&4294967295,O=w+(S<<12&4294967295|S>>>20),S=x+(A^O&(w^A))+R[14]+2792965006&4294967295,x=O+(S<<17&4294967295|S>>>15),S=A+(w^x&(O^w))+R[15]+1236535329&4294967295,A=x+(S<<22&4294967295|S>>>10),S=w+(x^O&(A^x))+R[1]+4129170786&4294967295,w=A+(S<<5&4294967295|S>>>27),S=O+(A^x&(w^A))+R[6]+3225465664&4294967295,O=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(O^w))+R[11]+643717713&4294967295,x=O+(S<<14&4294967295|S>>>18),S=A+(O^w&(x^O))+R[0]+3921069994&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(x^O&(A^x))+R[5]+3593408605&4294967295,w=A+(S<<5&4294967295|S>>>27),S=O+(A^x&(w^A))+R[10]+38016083&4294967295,O=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(O^w))+R[15]+3634488961&4294967295,x=O+(S<<14&4294967295|S>>>18),S=A+(O^w&(x^O))+R[4]+3889429448&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(x^O&(A^x))+R[9]+568446438&4294967295,w=A+(S<<5&4294967295|S>>>27),S=O+(A^x&(w^A))+R[14]+3275163606&4294967295,O=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(O^w))+R[3]+4107603335&4294967295,x=O+(S<<14&4294967295|S>>>18),S=A+(O^w&(x^O))+R[8]+1163531501&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(x^O&(A^x))+R[13]+2850285829&4294967295,w=A+(S<<5&4294967295|S>>>27),S=O+(A^x&(w^A))+R[2]+4243563512&4294967295,O=w+(S<<9&4294967295|S>>>23),S=x+(w^A&(O^w))+R[7]+1735328473&4294967295,x=O+(S<<14&4294967295|S>>>18),S=A+(O^w&(x^O))+R[12]+2368359562&4294967295,A=x+(S<<20&4294967295|S>>>12),S=w+(A^x^O)+R[5]+4294588738&4294967295,w=A+(S<<4&4294967295|S>>>28),S=O+(w^A^x)+R[8]+2272392833&4294967295,O=w+(S<<11&4294967295|S>>>21),S=x+(O^w^A)+R[11]+1839030562&4294967295,x=O+(S<<16&4294967295|S>>>16),S=A+(x^O^w)+R[14]+4259657740&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(A^x^O)+R[1]+2763975236&4294967295,w=A+(S<<4&4294967295|S>>>28),S=O+(w^A^x)+R[4]+1272893353&4294967295,O=w+(S<<11&4294967295|S>>>21),S=x+(O^w^A)+R[7]+4139469664&4294967295,x=O+(S<<16&4294967295|S>>>16),S=A+(x^O^w)+R[10]+3200236656&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(A^x^O)+R[13]+681279174&4294967295,w=A+(S<<4&4294967295|S>>>28),S=O+(w^A^x)+R[0]+3936430074&4294967295,O=w+(S<<11&4294967295|S>>>21),S=x+(O^w^A)+R[3]+3572445317&4294967295,x=O+(S<<16&4294967295|S>>>16),S=A+(x^O^w)+R[6]+76029189&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(A^x^O)+R[9]+3654602809&4294967295,w=A+(S<<4&4294967295|S>>>28),S=O+(w^A^x)+R[12]+3873151461&4294967295,O=w+(S<<11&4294967295|S>>>21),S=x+(O^w^A)+R[15]+530742520&4294967295,x=O+(S<<16&4294967295|S>>>16),S=A+(x^O^w)+R[2]+3299628645&4294967295,A=x+(S<<23&4294967295|S>>>9),S=w+(x^(A|~O))+R[0]+4096336452&4294967295,w=A+(S<<6&4294967295|S>>>26),S=O+(A^(w|~x))+R[7]+1126891415&4294967295,O=w+(S<<10&4294967295|S>>>22),S=x+(w^(O|~A))+R[14]+2878612391&4294967295,x=O+(S<<15&4294967295|S>>>17),S=A+(O^(x|~w))+R[5]+4237533241&4294967295,A=x+(S<<21&4294967295|S>>>11),S=w+(x^(A|~O))+R[12]+1700485571&4294967295,w=A+(S<<6&4294967295|S>>>26),S=O+(A^(w|~x))+R[3]+2399980690&4294967295,O=w+(S<<10&4294967295|S>>>22),S=x+(w^(O|~A))+R[10]+4293915773&4294967295,x=O+(S<<15&4294967295|S>>>17),S=A+(O^(x|~w))+R[1]+2240044497&4294967295,A=x+(S<<21&4294967295|S>>>11),S=w+(x^(A|~O))+R[8]+1873313359&4294967295,w=A+(S<<6&4294967295|S>>>26),S=O+(A^(w|~x))+R[15]+4264355552&4294967295,O=w+(S<<10&4294967295|S>>>22),S=x+(w^(O|~A))+R[6]+2734768916&4294967295,x=O+(S<<15&4294967295|S>>>17),S=A+(O^(x|~w))+R[13]+1309151649&4294967295,A=x+(S<<21&4294967295|S>>>11),S=w+(x^(A|~O))+R[4]+4149444226&4294967295,w=A+(S<<6&4294967295|S>>>26),S=O+(A^(w|~x))+R[11]+3174756917&4294967295,O=w+(S<<10&4294967295|S>>>22),S=x+(w^(O|~A))+R[2]+718787259&4294967295,x=O+(S<<15&4294967295|S>>>17),S=A+(O^(x|~w))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+x&4294967295,k.g[3]=k.g[3]+O&4294967295}s.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var A=w-this.blockSize,R=this.B,x=this.h,O=0;O<w;){if(x==0)for(;O<=A;)l(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<w;)if(R[x++]=k.charCodeAt(O++),x==this.blockSize){l(this,R),x=0;break}}else for(;O<w;)if(R[x++]=k[O++],x==this.blockSize){l(this,R),x=0;break}}this.h=x,this.o+=w},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var A=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=A&255,A/=256;for(this.u(k),k=Array(16),w=A=0;4>w;++w)for(var R=0;32>R;R+=8)k[A++]=this.g[w]>>>R&255;return k};function c(k,w){var A=g;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=w(k)}function f(k,w){this.h=w;for(var A=[],R=!0,x=k.length-1;0<=x;x--){var O=k[x]|0;R&&O==w||(A[x]=O,R=!1)}this.g=A}var g={};function v(k){return-128<=k&&128>k?c(k,function(w){return new f([w|0],0>w?-1:0)}):new f([k|0],0>k?-1:0)}function E(k){if(isNaN(k)||!isFinite(k))return V;if(0>k)return $(E(-k));for(var w=[],A=1,R=0;k>=A;R++)w[R]=k/A|0,A*=4294967296;return new f(w,0)}function I(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return $(I(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(w,8)),R=V,x=0;x<k.length;x+=8){var O=Math.min(8,k.length-x),S=parseInt(k.substring(x,x+O),w);8>O?(O=E(Math.pow(w,O)),R=R.j(O).add(E(S))):(R=R.j(A),R=R.add(E(S)))}return R}var V=v(0),D=v(1),j=v(16777216);i=f.prototype,i.m=function(){if(J(this))return-$(this).m();for(var k=0,w=1,A=0;A<this.g.length;A++){var R=this.i(A);k+=(0<=R?R:4294967296+R)*w,w*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(Y(this))return"0";if(J(this))return"-"+$(this).toString(k);for(var w=E(Math.pow(k,6)),A=this,R="";;){var x=Ae(A,w).g;A=Se(A,x.j(w));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=x,Y(A))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function Y(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function J(k){return k.h==-1}i.l=function(k){return k=Se(this,k),J(k)?-1:Y(k)?0:1};function $(k){for(var w=k.g.length,A=[],R=0;R<w;R++)A[R]=~k.g[R];return new f(A,~k.h).add(D)}i.abs=function(){return J(this)?$(this):this},i.add=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],R=0,x=0;x<=w;x++){var O=R+(this.i(x)&65535)+(k.i(x)&65535),S=(O>>>16)+(this.i(x)>>>16)+(k.i(x)>>>16);R=S>>>16,O&=65535,S&=65535,A[x]=S<<16|O}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Se(k,w){return k.add($(w))}i.j=function(k){if(Y(this)||Y(k))return V;if(J(this))return J(k)?$(this).j($(k)):$($(this).j(k));if(J(k))return $(this.j($(k)));if(0>this.l(j)&&0>k.l(j))return E(this.m()*k.m());for(var w=this.g.length+k.g.length,A=[],R=0;R<2*w;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var x=0;x<k.g.length;x++){var O=this.i(R)>>>16,S=this.i(R)&65535,Le=k.i(x)>>>16,mt=k.i(x)&65535;A[2*R+2*x]+=S*mt,ge(A,2*R+2*x),A[2*R+2*x+1]+=O*mt,ge(A,2*R+2*x+1),A[2*R+2*x+1]+=S*Le,ge(A,2*R+2*x+1),A[2*R+2*x+2]+=O*Le,ge(A,2*R+2*x+2)}for(R=0;R<w;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=w;R<2*w;R++)A[R]=0;return new f(A,0)};function ge(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function Ee(k,w){this.g=k,this.h=w}function Ae(k,w){if(Y(w))throw Error("division by zero");if(Y(k))return new Ee(V,V);if(J(k))return w=Ae($(k),w),new Ee($(w.g),$(w.h));if(J(w))return w=Ae(k,$(w)),new Ee($(w.g),w.h);if(30<k.g.length){if(J(k)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var A=D,R=w;0>=R.l(k);)A=tt(A),R=tt(R);var x=ke(A,1),O=ke(R,1);for(R=ke(R,2),A=ke(A,2);!Y(R);){var S=O.add(R);0>=S.l(k)&&(x=x.add(A),O=S),R=ke(R,1),A=ke(A,1)}return w=Se(k,x.j(w)),new Ee(x,w)}for(x=V;0<=k.l(w);){for(A=Math.max(1,Math.floor(k.m()/w.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=E(A),S=O.j(w);J(S)||0<S.l(k);)A-=R,O=E(A),S=O.j(w);Y(O)&&(O=D),x=x.add(O),k=Se(k,S)}return new Ee(x,k)}i.A=function(k){return Ae(this,k).h},i.and=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],R=0;R<w;R++)A[R]=this.i(R)&k.i(R);return new f(A,this.h&k.h)},i.or=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],R=0;R<w;R++)A[R]=this.i(R)|k.i(R);return new f(A,this.h|k.h)},i.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],R=0;R<w;R++)A[R]=this.i(R)^k.i(R);return new f(A,this.h^k.h)};function tt(k){for(var w=k.g.length+1,A=[],R=0;R<w;R++)A[R]=k.i(R)<<1|k.i(R-1)>>>31;return new f(A,k.h)}function ke(k,w){var A=w>>5;w%=32;for(var R=k.g.length-A,x=[],O=0;O<R;O++)x[O]=0<w?k.i(O+A)>>>w|k.i(O+A+1)<<32-w:k.i(O+A);return new f(x,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,zm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=I,ti=f}).apply(typeof kp<"u"?kp:typeof self<"u"?self:typeof window<"u"?window:{});var Al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Um,Bo,jm,Vl,nh,Bm,bm,$m;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,m){return a==Array.prototype||a==Object.prototype||(a[d]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Al=="object"&&Al];for(var d=0;d<a.length;++d){var m=a[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function l(a,d){if(d)e:{var m=s;a=a.split(".");for(var _=0;_<a.length-1;_++){var L=a[_];if(!(L in m))break e;m=m[L]}a=a[a.length-1],_=m[a],d=d(_),d!=_&&d!=null&&e(m,a,{configurable:!0,writable:!0,value:d})}}function c(a,d){a instanceof String&&(a+="");var m=0,_=!1,L={next:function(){if(!_&&m<a.length){var U=m++;return{value:d(U,a[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(a){return a||function(){return c(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function v(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function E(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function I(a,d,m){return a.call.apply(a.bind,arguments)}function V(a,d,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),a.apply(d,L)}}return function(){return a.apply(d,arguments)}}function D(a,d,m){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:V,D.apply(null,arguments)}function j(a,d){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function Y(a,d){function m(){}m.prototype=d.prototype,a.aa=d.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,L,U){for(var Z=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Z[qe-2]=arguments[qe];return d.prototype[L].apply(_,Z)}}function J(a){const d=a.length;if(0<d){const m=Array(d);for(let _=0;_<d;_++)m[_]=a[_];return m}return[]}function $(a,d){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(v(_)){const L=a.length||0,U=_.length||0;a.length=L+U;for(let Z=0;Z<U;Z++)a[L+Z]=_[Z]}else a.push(_)}}class Se{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ge(a){return/^[\s\xa0]*$/.test(a)}function Ee(){var a=g.navigator;return a&&(a=a.userAgent)?a:""}function Ae(a){return Ae[" "](a),a}Ae[" "]=function(){};var tt=Ee().indexOf("Gecko")!=-1&&!(Ee().toLowerCase().indexOf("webkit")!=-1&&Ee().indexOf("Edge")==-1)&&!(Ee().indexOf("Trident")!=-1||Ee().indexOf("MSIE")!=-1)&&Ee().indexOf("Edge")==-1;function ke(a,d,m){for(const _ in a)d.call(m,a[_],_,a)}function k(a,d){for(const m in a)d.call(void 0,a[m],m,a)}function w(a){const d={};for(const m in a)d[m]=a[m];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,d){let m,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(m in _)a[m]=_[m];for(let U=0;U<A.length;U++)m=A[U],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function x(a){var d=1;a=a.split(":");const m=[];for(;0<d&&a.length;)m.push(a.shift()),d--;return a.length&&m.push(a.join(":")),m}function O(a){g.setTimeout(()=>{throw a},0)}function S(){var a=he;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Le{constructor(){this.h=this.g=null}add(d,m){const _=mt.get();_.set(d,m),this.h?this.h.next=_:this.g=_,this.h=_}}var mt=new Se(()=>new It,a=>a.reset());class It{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let be,W=!1,he=new Le,ee=()=>{const a=g.Promise.resolve(void 0);be=()=>{a.then(N)}};var N=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(m){O(m)}var d=mt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};g.addEventListener("test",m,d),g.removeEventListener("test",m,d)}catch{}return a}();function Ce(a,d){if(ue.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(tt){e:{try{Ae(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else m=="mouseover"?d=a.fromElement:m=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ve[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ce.aa.h.call(this)}}Y(Ce,ue);var Ve={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),je=0;function Qe(a,d,m,_,L){this.listener=a,this.proxy=null,this.src=d,this.type=m,this.capture=!!_,this.ha=L,this.key=++je,this.da=this.fa=!1}function ht(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function An(a){this.src=a,this.g={},this.h=0}An.prototype.add=function(a,d,m,_,L){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var Z=bn(a,d,_,L);return-1<Z?(d=a[Z],m||(d.fa=!1)):(d=new Qe(d,this.src,U,!!_,L),d.fa=m,a.push(d)),d};function Cr(a,d){var m=d.type;if(m in a.g){var _=a.g[m],L=Array.prototype.indexOf.call(_,d,void 0),U;(U=0<=L)&&Array.prototype.splice.call(_,L,1),U&&(ht(d),a.g[m].length==0&&(delete a.g[m],a.h--))}}function bn(a,d,m,_){for(var L=0;L<a.length;++L){var U=a[L];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==_)return L}return-1}var sr="closure_lm_"+(1e6*Math.random()|0),Rr={};function se(a,d,m,_,L){if(Array.isArray(d)){for(var U=0;U<d.length;U++)se(a,d[U],m,_,L);return null}return m=or(m),a&&a[Me]?a.K(d,m,E(_)?!!_.capture:!1,L):ce(a,d,m,!1,_,L)}function ce(a,d,m,_,L,U){if(!d)throw Error("Invalid event type");var Z=E(L)?!!L.capture:!!L,qe=st(a);if(qe||(a[sr]=qe=new An(a)),m=qe.add(d,m,_,Z,U),m.proxy)return m;if(_=ae(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)Ie||(L=Z),L===void 0&&(L=!1),a.addEventListener(d.toString(),_,L);else if(a.attachEvent)a.attachEvent(Ne(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ae(){function a(m){return d.call(a.src,a.listener,m)}const d=xt;return a}function xe(a,d,m,_,L){if(Array.isArray(d))for(var U=0;U<d.length;U++)xe(a,d[U],m,_,L);else _=E(_)?!!_.capture:!!_,m=or(m),a&&a[Me]?(a=a.i,d=String(d).toString(),d in a.g&&(U=a.g[d],m=bn(U,m,_,L),-1<m&&(ht(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete a.g[d],a.h--)))):a&&(a=st(a))&&(d=a.g[d.toString()],a=-1,d&&(a=bn(d,m,_,L)),(m=-1<a?d[a]:null)&&ye(m))}function ye(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Me])Cr(d.i,a);else{var m=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(m,_,a.capture):d.detachEvent?d.detachEvent(Ne(m),_):d.addListener&&d.removeListener&&d.removeListener(_),(m=st(d))?(Cr(m,a),m.h==0&&(m.src=null,d[sr]=null)):ht(a)}}}function Ne(a){return a in Rr?Rr[a]:Rr[a]="on"+a}function xt(a,d){if(a.da)a=!0;else{d=new Ce(d,this);var m=a.listener,_=a.ha||a.src;a.fa&&ye(a),a=m.call(_,d)}return a}function st(a){return a=a[sr],a instanceof An?a:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function or(a){return typeof a=="function"?a:(a[sn]||(a[sn]=function(d){return a.handleEvent(d)}),a[sn])}function gt(){B.call(this),this.i=new An(this),this.M=this,this.F=null}Y(gt,B),gt.prototype[Me]=!0,gt.prototype.removeEventListener=function(a,d,m,_){xe(this,a,d,m,_)};function yt(a,d){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new ue(d,a);else if(d instanceof ue)d.target=d.target||a;else{var L=d;d=new ue(_,a),R(d,L)}if(L=!0,m)for(var U=m.length-1;0<=U;U--){var Z=d.g=m[U];L=ar(Z,_,!0,d)&&L}if(Z=d.g=a,L=ar(Z,_,!0,d)&&L,L=ar(Z,_,!1,d)&&L,m)for(U=0;U<m.length;U++)Z=d.g=m[U],L=ar(Z,_,!1,d)&&L}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var m=a.g[d],_=0;_<m.length;_++)ht(m[_]);delete a.g[d],a.h--}}this.F=null},gt.prototype.K=function(a,d,m,_){return this.i.add(String(a),d,!1,m,_)},gt.prototype.L=function(a,d,m,_){return this.i.add(String(a),d,!0,m,_)};function ar(a,d,m,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,U=0;U<d.length;++U){var Z=d[U];if(Z&&!Z.da&&Z.capture==m){var qe=Z.listener,vt=Z.ha||Z.src;Z.fa&&Cr(a.i,Z),L=qe.call(vt,_)!==!1&&L}}return L&&!_.defaultPrevented}function Ks(a,d,m){if(typeof a=="function")m&&(a=D(a,m));else if(a&&typeof a.handleEvent=="function")a=D(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:g.setTimeout(a,d||0)}function Pr(a){a.g=Ks(()=>{a.g=null,a.i&&(a.i=!1,Pr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ui extends B{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(a){B.call(this),this.h=a,this.g={}}Y(ci,B);var Ys=[];function Xs(a){ke(a.g,function(d,m){this.g.hasOwnProperty(m)&&ye(d)},a),a.g={}}ci.prototype.N=function(){ci.aa.N.call(this),Xs(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=g.JSON.stringify,Zs=g.JSON.parse,eo=class{stringify(a){return g.JSON.stringify(a,void 0)}parse(a){return g.JSON.parse(a,void 0)}};function hi(){}hi.prototype.h=null;function Hi(a){return a.h||(a.h=a.i())}function qi(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $n(){ue.call(this,"d")}Y($n,ue);function Qi(){ue.call(this,"c")}Y(Qi,ue);var Hn={},to=null;function fi(){return to=to||new gt}Hn.La="serverreachability";function no(a){ue.call(this,Hn.La,a)}Y(no,ue);function lr(a){const d=fi();yt(d,new no(d))}Hn.STAT_EVENT="statevent";function ro(a,d){ue.call(this,Hn.STAT_EVENT,a),this.stat=d}Y(ro,ue);function lt(a){const d=fi();yt(d,new ro(d,a))}Hn.Ma="timingevent";function Gi(a,d){ue.call(this,Hn.Ma,a),this.size=d}Y(Gi,ue);function Cn(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){a()},d)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function pi(a,d,m,_,L,U){a.info(function(){if(a.g)if(U)for(var Z="",qe=U.split("&"),vt=0;vt<qe.length;vt++){var Fe=qe[vt].split("=");if(1<Fe.length){var At=Fe[0];Fe=Fe[1];var ft=At.split("_");Z=2<=ft.length&&ft[1]=="type"?Z+(At+"="+Fe+"&"):Z+(At+"=redacted&")}}else Z=null;else Z=U;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+d+`
`+m+`
`+Z})}function Wi(a,d,m,_,L,U,Z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+d+`
`+m+`
`+U+" "+Z})}function Rn(a,d,m,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+hu(a,m)+(_?" "+_:"")})}function io(a,d){a.info(function(){return"TIMEOUT: "+d})}di.prototype.info=function(){};function hu(a,d){if(!a.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Z=1;Z<L.length;Z++)L[Z]=""}}}}return Js(m)}catch{return d}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ca={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function mi(){}Y(mi,hi),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Pn=new mi;function kn(a,d,m,_){this.j=a,this.i=d,this.l=m,this.R=_||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ha}function ha(){this.i=null,this.g="",this.h=!1}var so={},Yi={};function Xi(a,d,m){a.L=1,a.v=Nr(an(d)),a.m=m,a.P=!0,oo(a,null)}function oo(a,d){a.F=Date.now(),We(a),a.A=an(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Lr(m.i,"t",_),a.C=0,m=a.j.J,a.h=new ha,a.g=ka(a.j,m?d:null,!a.m),0<a.O&&(a.M=new ui(D(a.Y,a,a.g),a.O)),d=a.U,m=a.g,_=a.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ys[0]=L.toString()),L=Ys);for(var U=0;U<L.length;U++){var Z=se(m,L[U],_||d.handleEvent,!1,d.h||d);if(!Z)break;d.g[Z.key]=Z}d=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),lr(),pi(a.i,a.u,a.A,a.l,a.R,a.m)}kn.prototype.ca=function(a){a=a.target;const d=this.M;d&&Yt(a)==3?d.j():this.Y(a)},kn.prototype.Y=function(a){try{if(a==this.g)e:{const ft=Yt(this.g);var d=this.g.Ba();const gn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||fo(this.g)))){this.J||ft!=4||d==7||(d==8||0>=gn?lr(3):lr(2)),gi(this);var m=this.g.Z();this.X=m;t:if(fa(this)){var _=fo(this.g);a="";var L=_.length,U=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),kr(this);var Z="";break t}this.h.i=new g.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(U&&d==L-1)});_.length=0,this.h.g+=a,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,Wi(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,vt=this.g;if((qe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ge(qe)){var Fe=qe;break t}}Fe=null}if(m=Fe)Rn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,m);else{this.o=!1,this.s=3,lt(12),pn(this),kr(this);break e}}if(this.P){m=!0;let un;for(;!this.J&&this.C<Z.length;)if(un=fu(this,Z),un==Yi){ft==4&&(this.s=4,lt(14),m=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(un==so){this.s=4,lt(15),Rn(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else Rn(this.i,this.l,un,null),ao(this,un);if(fa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||Z.length!=0||this.h.h||(this.s=1,lt(16),m=!1),this.o=this.o&&m,!m)Rn(this.i,this.l,Z,"[Invalid Chunked Response]"),pn(this),kr(this);else if(0<Z.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),mo(At),At.M=!0,lt(11))}}else Rn(this.i,this.l,Z,null),ao(this,Z);ft==4&&pn(this),this.o&&!this.J&&(ft==4?ls(this.j,this):(this.o=!1,We(this)))}else rs(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),pn(this),kr(this)}}}catch{}finally{}};function fa(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function fu(a,d){var m=a.C,_=d.indexOf(`
`,m);return _==-1?Yi:(m=Number(d.substring(m,_)),isNaN(m)?so:(_+=1,_+m>d.length?Yi:(d=d.slice(_,_+m),a.C=_+m,d)))}kn.prototype.cancel=function(){this.J=!0,pn(this)};function We(a){a.S=Date.now()+a.I,da(a,a.I)}function da(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Cn(D(a.ba,a),d)}function gi(a){a.B&&(g.clearTimeout(a.B),a.B=null)}kn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(io(this.i,this.A),this.L!=2&&(lr(),lt(17)),pn(this),this.s=2,kr(this)):da(this,this.S-a)};function kr(a){a.j.G==0||a.J||ls(a.j,a)}function pn(a){gi(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Xs(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function ao(a,d){try{var m=a.j;if(m.G!=0&&(m.g==a||qt(m.h,a))){if(!a.K&&qt(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)as(m),On(m);else break e;os(m),lt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Cn(D(m.Za,m),6e3));if(1>=ma(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else dr(m,11)}else if((a.K||m.g==a)&&as(m),!ge(d))for(L=m.Da.g.parse(d),d=0;d<L.length;d++){let Fe=L[d];if(m.T=Fe[0],Fe=Fe[1],m.G==2)if(Fe[0]=="c"){m.K=Fe[1],m.ia=Fe[2];const At=Fe[3];At!=null&&(m.la=At,m.j.info("VER="+m.la));const ft=Fe[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const gn=Fe[5];gn!=null&&typeof gn=="number"&&0<gn&&(_=1.5*gn,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const un=a.g;if(un){const Si=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var U=_.h;U.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(lo(U,U.h),U.h=null))}if(_.D){const cs=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;cs&&(_.ya=cs,Ge(_.I,_.D,cs))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var Z=a;if(_.qa=Pa(_,_.J?_.ia:null,_.W),Z.K){ga(_.h,Z);var qe=Z,vt=_.L;vt&&(qe.I=vt),qe.B&&(gi(qe),We(qe)),_.g=Z}else wi(_);0<m.i.length&&Wn(m)}else Fe[0]!="stop"&&Fe[0]!="close"||dr(m,7);else m.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?dr(m,7):Dt(m):Fe[0]!="noop"&&m.l&&m.l.ta(Fe),m.v=0)}}lr(4)}catch{}}var pa=class{constructor(a,d){this.g=a,this.map=d}};function yi(a){this.l=a||10,g.PerformanceNavigationTiming?(a=g.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ma(a){return a.h?1:a.g?a.g.size:0}function qt(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function lo(a,d){a.g?a.g.add(d):a.h=d}function ga(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}yi.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ya(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const m of a.g.values())d=d.concat(m.D);return d}return J(a.i)}function Ji(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(v(a)){for(var d=[],m=a.length,_=0;_<m;_++)d.push(a[_]);return d}d=[],m=0;for(_ in a)d[m++]=a[_];return d}function Zi(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(v(a)||typeof a=="string"){var d=[];a=a.length;for(var m=0;m<a;m++)d.push(m);return d}d=[],m=0;for(const _ in a)d[m++]=_;return d}}}function xr(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(v(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var m=Zi(a),_=Ji(a),L=_.length,U=0;U<L;U++)d.call(void 0,_[U],m&&m[U],a)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function du(a,d){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),L=null;if(0<=_){var U=a[m].substring(0,_);L=a[m].substring(_+1)}else U=a[m];d(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ur(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ur){this.h=a.h,_i(this,a.j),this.o=a.o,this.g=a.g,Vr(this,a.s),this.l=a.l;var d=a.i,m=new qn;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Dr(this,m),this.m=a.m}else a&&(d=String(a).match(vi))?(this.h=!1,_i(this,d[1]||"",!0),this.o=Oe(d[2]||""),this.g=Oe(d[3]||"",!0),Vr(this,d[4]),this.l=Oe(d[5]||"",!0),Dr(this,d[6]||"",!0),this.m=Oe(d[7]||"")):(this.h=!1,this.i=new qn(null,this.h))}ur.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Or(d,es,!0),":");var m=this.g;return(m||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Or(d,es,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Or(m,m.charAt(0)=="/"?Ea:_a,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Or(m,uo)),a.join("")};function an(a){return new ur(a)}function _i(a,d,m){a.j=m?Oe(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Vr(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Dr(a,d,m){d instanceof qn?(a.i=d,Qn(a.i,a.h)):(m||(d=Or(d,Ta)),a.i=new qn(d,a.h))}function Ge(a,d,m){a.i.set(d,m)}function Nr(a){return Ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Oe(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Or(a,d,m){return typeof a=="string"?(a=encodeURI(a).replace(d,va),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function va(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var es=/[#\/\?@]/g,_a=/[#\?:]/g,Ea=/[#\?]/g,Ta=/[#\?@]/g,uo=/#/g;function qn(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Vt(a){a.g||(a.g=new Map,a.h=0,a.i&&du(a.i,function(d,m){a.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}i=qn.prototype,i.add=function(a,d){Vt(this),this.i=null,a=mn(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(d),this.h+=1,this};function xn(a,d){Vt(a),d=mn(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Vn(a,d){return Vt(a),d=mn(a,d),a.g.has(d)}i.forEach=function(a,d){Vt(this),this.g.forEach(function(m,_){m.forEach(function(L){a.call(d,L,_,this)},this)},this)},i.na=function(){Vt(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let _=0;_<d.length;_++){const L=a[_];for(let U=0;U<L.length;U++)m.push(d[_])}return m},i.V=function(a){Vt(this);let d=[];if(typeof a=="string")Vn(this,a)&&(d=d.concat(this.g.get(mn(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)d=d.concat(a[m])}return d},i.set=function(a,d){return Vt(this),this.i=null,a=mn(this,a),Vn(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},i.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Lr(a,d,m){xn(a,d),0<m.length&&(a.i=null,a.g.set(mn(a,d),J(m)),a.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var _=d[m];const U=encodeURIComponent(String(_)),Z=this.V(_);for(_=0;_<Z.length;_++){var L=U;Z[_]!==""&&(L+="="+encodeURIComponent(String(Z[_]))),a.push(L)}}return this.i=a.join("&")};function mn(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Qn(a,d){d&&!a.j&&(Vt(a),a.i=null,a.g.forEach(function(m,_){var L=_.toLowerCase();_!=L&&(xn(this,_),Lr(this,L,m))},a)),a.j=d}function pu(a,d){const m=new di;if(g.Image){const _=new Image;_.onload=j(Kt,m,"TestLoadImage: loaded",!0,d,_),_.onerror=j(Kt,m,"TestLoadImage: error",!1,d,_),_.onabort=j(Kt,m,"TestLoadImage: abort",!1,d,_),_.ontimeout=j(Kt,m,"TestLoadImage: timeout",!1,d,_),g.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function wa(a,d){const m=new di,_=new AbortController,L=setTimeout(()=>{_.abort(),Kt(m,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(U=>{clearTimeout(L),U.ok?Kt(m,"TestPingServer: ok",!0,d):Kt(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Kt(m,"TestPingServer: error",!1,d)})}function Kt(a,d,m,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(m)}catch{}}function mu(){this.g=new eo}function Sa(a,d,m){const _=m||"";try{xr(a,function(L,U){let Z=L;E(L)&&(Z=Js(L)),d.push(_+U+"="+encodeURIComponent(Z))})}catch(L){throw d.push(_+"type="+encodeURIComponent("_badmap")),L}}function cr(a){this.l=a.Ub||null,this.j=a.eb||!1}Y(cr,hi),cr.prototype.g=function(){return new Ei(this.l,this.j)},cr.prototype.i=function(a){return function(){return a}}({});function Ei(a,d){gt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(Ei,gt),i=Ei.prototype,i.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Nn(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||g).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dn(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ia(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ia(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Dn(this):Nn(this),this.readyState==3&&Ia(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,Dn(this))},i.Qa=function(a){this.g&&(this.response=a,Dn(this))},i.ga=function(){this.g&&Dn(this)};function Dn(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Nn(a)}i.setRequestHeader=function(a,d){this.u.append(a,d)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=d.next();return a.join(`\r
`)};function Nn(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function hr(a){let d="";return ke(a,function(m,_){d+=_,d+=":",d+=m,d+=`\r
`}),d}function Mr(a,d,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=hr(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Ge(a,d,m))}function Je(a){gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(Je,gt);var gu=/^https?$/i,co=["POST","PUT"];i=Je.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,d,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?Hi(this.o):Hi(Pn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(U){Ti(this,U);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)m.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())m.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),L=g.FormData&&a instanceof g.FormData,!(0<=Array.prototype.indexOf.call(co,d,void 0))||_||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of m)this.g.setRequestHeader(U,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ns(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){Ti(this,U)}};function Ti(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ts(a),ln(a)}function ts(a){a.A||(a.A=!0,yt(a,"complete"),yt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,yt(this,"complete"),yt(this,"abort"),ln(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),Je.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ho(this):this.bb())},i.bb=function(){ho(this)};function ho(a){if(a.h&&typeof f<"u"&&(!a.v[1]||Yt(a)!=4||a.Z()!=2)){if(a.u&&Yt(a)==4)Ks(a.Ea,0,a);else if(yt(a,"readystatechange"),Yt(a)==4){a.h=!1;try{const Z=a.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var _;if(_=Z===0){var L=String(a.D).match(vi)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),_=!gu.test(L?L.toLowerCase():"")}m=_}if(m)yt(a,"complete"),yt(a,"success");else{a.m=6;try{var U=2<Yt(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",ts(a)}}finally{ln(a)}}}}function ln(a,d){if(a.g){ns(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||yt(a,"ready");try{m.onreadystatechange=_}catch{}}}function ns(a){a.I&&(g.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function Yt(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Zs(d)}};function fo(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(a){const d={};a=(a.g&&2<=Yt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(ge(a[_]))continue;var m=x(a[_]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[L]||[];d[L]=U,U.push(m)}k(d,function(_){return _.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gn(a,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||d}function po(a){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gn("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gn("baseRetryDelayMs",5e3,a),this.cb=Gn("retryDelaySeedMs",1e4,a),this.Wa=Gn("forwardChannelMaxRetries",2,a),this.wa=Gn("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(a&&a.concurrentRequestLimit),this.Da=new mu,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=po.prototype,i.la=8,i.G=1,i.connect=function(a,d,m,_){lt(0),this.W=a,this.H=d||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Pa(this,null,this.W),Wn(this)};function Dt(a){if(is(a),a.G==3){var d=a.U++,m=an(a.I);if(Ge(m,"SID",a.K),Ge(m,"RID",d),Ge(m,"TYPE","terminate"),fr(a,m),d=new kn(a,a.j,d),d.L=2,d.v=Nr(an(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=d.v,m=!0),m||(d.g=ka(d.j,null),d.g.ea(d.v)),d.F=Date.now(),We(d)}Ra(a)}function On(a){a.g&&(mo(a),a.g.cancel(),a.g=null)}function is(a){On(a),a.u&&(g.clearTimeout(a.u),a.u=null),as(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&g.clearTimeout(a.s),a.s=null)}function Wn(a){if(!on(a.h)&&!a.s){a.s=!0;var d=a.Ga;be||ee(),W||(be(),W=!0),he.add(d,a),a.B=0}}function yu(a,d){return ma(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Cn(D(a.Ga,a,d),Ca(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new kn(this,this.j,a);let U=this.o;if(this.S&&(U?(U=w(U),R(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Fr(this,L,d),m=an(this.I),Ge(m,"RID",a),Ge(m,"CVER",22),this.D&&Ge(m,"X-HTTP-Session-Id",this.D),fr(this,m),U&&(this.O?d="headers="+encodeURIComponent(String(hr(U)))+"&"+d:this.m&&Mr(m,this.m,U)),lo(this.h,L),this.Ua&&Ge(m,"TYPE","init"),this.P?(Ge(m,"$req",d),Ge(m,"SID","null"),L.T=!0,Xi(L,m,null)):Xi(L,m,d),this.G=2}}else this.G==3&&(a?ss(this,a):this.i.length==0||on(this.h)||ss(this))};function ss(a,d){var m;d?m=d.l:m=a.U++;const _=an(a.I);Ge(_,"SID",a.K),Ge(_,"RID",m),Ge(_,"AID",a.T),fr(a,_),a.m&&a.o&&Mr(_,a.m,a.o),m=new kn(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Fr(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),lo(a.h,m),Xi(m,_,d)}function fr(a,d){a.H&&ke(a.H,function(m,_){Ge(d,_,m)}),a.l&&xr({},function(m,_){Ge(d,_,m)})}function Fr(a,d,m){m=Math.min(a.i.length,m);var _=a.l?D(a.l.Na,a.l,a):null;e:{var L=a.i;let U=-1;for(;;){const Z=["count="+m];U==-1?0<m?(U=L[0].g,Z.push("ofs="+U)):U=0:Z.push("ofs="+U);let qe=!0;for(let vt=0;vt<m;vt++){let Fe=L[vt].g;const At=L[vt].map;if(Fe-=U,0>Fe)U=Math.max(0,L[vt].g-100),qe=!1;else try{Sa(At,Z,"req"+Fe+"_")}catch{_&&_(At)}}if(qe){_=Z.join("&");break e}}}return a=a.i.splice(0,m),d.D=a,_}function wi(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;be||ee(),W||(be(),W=!0),he.add(d,a),a.v=0}}function os(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Cn(D(a.Fa,a),Ca(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Aa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Cn(D(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),On(this),Aa(this))};function mo(a){a.A!=null&&(g.clearTimeout(a.A),a.A=null)}function Aa(a){a.g=new kn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=an(a.qa);Ge(d,"RID","rpc"),Ge(d,"SID",a.K),Ge(d,"AID",a.T),Ge(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ge(d,"TO",a.ja),Ge(d,"TYPE","xmlhttp"),fr(a,d),a.m&&a.o&&Mr(d,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Nr(an(d)),m.m=null,m.P=!0,oo(m,a)}i.Za=function(){this.C!=null&&(this.C=null,On(this),os(this),lt(19))};function as(a){a.C!=null&&(g.clearTimeout(a.C),a.C=null)}function ls(a,d){var m=null;if(a.g==d){as(a),mo(a),a.g=null;var _=2}else if(qt(a.h,d))m=d.D,ga(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var L=a.B;_=fi(),yt(_,new Gi(_,m)),Wn(a)}else wi(a);else if(L=d.s,L==3||L==0&&0<d.X||!(_==1&&yu(a,d)||_==2&&os(a)))switch(m&&0<m.length&&(d=a.h,d.i=d.i.concat(m)),L){case 1:dr(a,5);break;case 4:dr(a,10);break;case 3:dr(a,6);break;default:dr(a,2)}}}function Ca(a,d){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*d}function dr(a,d){if(a.j.info("Error code "+d),d==2){var m=D(a.fb,a),_=a.Xa;const L=!_;_=new ur(_||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||_i(_,"https"),Nr(_),L?pu(_.toString(),m):wa(_.toString(),m)}else lt(2);a.G=0,a.l&&a.l.sa(d),Ra(a),is(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Ra(a){if(a.G=0,a.ka=[],a.l){const d=ya(a.h);(d.length!=0||a.i.length!=0)&&($(a.ka,d),$(a.ka,a.i),a.h.i.length=0,J(a.i),a.i.length=0),a.l.ra()}}function Pa(a,d,m){var _=m instanceof ur?an(m):new ur(m);if(_.g!="")d&&(_.g=d+"."+_.g),Vr(_,_.s);else{var L=g.location;_=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var U=new ur(null);_&&_i(U,_),d&&(U.g=d),L&&Vr(U,L),m&&(U.l=m),_=U}return m=a.D,d=a.ya,m&&d&&Ge(_,m,d),Ge(_,"VER",a.la),fr(a,_),_}function ka(a,d,m){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Je(new cr({eb:m})):new Je(a.pa),d.Ha(a.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function go(){}i=go.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function us(){}us.prototype.g=function(a,d){return new Qt(a,d)};function Qt(a,d){gt.call(this),this.g=new po(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!ge(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ge(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Kn(this)}Y(Qt,gt),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Dt(this.g)},Qt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Js(a),a=m);d.i.push(new pa(d.Ya++,a)),d.G==3&&Wn(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Qt.aa.N.call(this)};function xa(a){$n.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const m in d){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}Y(xa,$n);function Va(){Qi.call(this),this.status=1}Y(Va,Qi);function Kn(a){this.g=a}Y(Kn,go),Kn.prototype.ua=function(){yt(this.g,"a")},Kn.prototype.ta=function(a){yt(this.g,new xa(a))},Kn.prototype.sa=function(a){yt(this.g,new Va)},Kn.prototype.ra=function(){yt(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,$m=function(){return new us},bm=function(){return fi()},Bm=Hn,nh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,Vl=Ki,ca.COMPLETE="complete",jm=ca,qi.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Bo=qi,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Um=Je}).apply(typeof Al<"u"?Al:typeof self<"u"?self:typeof window<"u"?window:{});const xp="@firebase/firestore",Vp="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Dm("@firebase/firestore");function Vs(){return zi.logLevel}function ne(i,...e){if(zi.logLevel<=Ue.DEBUG){const n=e.map(wh);zi.debug(`Firestore (${qs}): ${i}`,...n)}}function Ir(i,...e){if(zi.logLevel<=Ue.ERROR){const n=e.map(wh);zi.error(`Firestore (${qs}): ${i}`,...n)}}function Fs(i,...e){if(zi.logLevel<=Ue.WARN){const n=e.map(wh);zi.warn(`Firestore (${qs}): ${i}`,...n)}}function wh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Hm(i,s,n)}function Hm(i,e,n){let s=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ir(s),new Error(s)}function He(i,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,i||Hm(e,l,s)}function we(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class fE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dE{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const l=v=>this.i!==s?(s=this.i,n(v)):Promise.resolve();let c=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ni,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable(async()=>{await v.promise,await l(this.currentUser)})},g=v=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ni)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new qm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class pE{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mE{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new pE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,W_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=c=>{c.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ne("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const l=c=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=yE(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function Re(i,e){return i<e?-1:i>e?1:0}function rh(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),l=e.codePointAt(n);if(s!==l){if(s<128&&l<128)return Re(s,l);{const c=Qm(),f=vE(c.encode(Np(i,n)),c.encode(Np(e,n)));return f!==0?f:Re(s,l)}}n+=s>65535?2:1}return Re(i.length,e.length)}function Np(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function vE(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Re(i[n],e[n]);return Re(i.length,e.length)}function zs(i,e,n){return i.length===e.length&&i.every((s,l)=>n(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-62135596800,Lp=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Lp);return new wt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Op)throw new pe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lp}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Op;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new wt(0,0))}static max(){return new Te(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="__name__";class er{constructor(e,n,s){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ve(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return er.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof er?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=er.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Re(e.length,n.length)}static compareSegments(e,n){const s=er.isNumericId(e),l=er.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?er.extractNumericId(e).compare(er.extractNumericId(n)):rh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class at extends er{construct(e,n,s){return new at(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new at(n)}static emptyPath(){return new at([])}}const _E=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends er{construct(e,n,s){return new Mt(e,n,s)}static isValidIdentifier(e){return _E.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mp}static keyField(){return new Mt([Mp])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new pe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new pe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new pe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(c(),l++)}if(c(),f)throw new pe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(at.fromString(e))}static fromName(e){return new me(at.fromString(e).popFirst(5))}static empty(){return new me(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=-1;function EE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,l=Te.fromTimestamp(s===1e9?new wt(n+1,0):new wt(n,s));return new ri(l,me.empty(),e)}function TE(i){return new ri(i.readTime,i.key,Xo)}class ri{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ri(Te.min(),me.empty(),Xo)}static max(){return new ri(Te.max(),me.empty(),Xo)}}function wE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(i.documentKey,e.documentKey),n!==0?n:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(i){if(i.code!==G.FAILED_PRECONDITION||i.message!==SE)throw i;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,s)=>{n(e)})}static reject(e){return new b((n,s)=>{s(e)})}static waitFor(e){return new b((n,s)=>{let l=0,c=0,f=!1;e.forEach(g=>{++l,g.next(()=>{++c,f&&c===l&&n()},v=>s(v))}),f=!0,c===l&&n()})}static or(e){let n=b.resolve(!1);for(const s of e)n=n.next(l=>l?b.resolve(l):s());return n}static forEach(e,n){const s=[];return e.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(e,n){return new b((s,l)=>{const c=e.length,f=new Array(c);let g=0;for(let v=0;v<c;v++){const E=v;n(e[E]).next(I=>{f[E]=I,++g,g===c&&s(f)},I=>l(I))}})}static doWhile(e,n){return new b((s,l)=>{const c=()=>{e()===!0?n().next(()=>{c()},l):s()};c()})}}function AE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Zl.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=-1;function eu(i){return i==null}function bl(i){return i===0&&1/i==-1/0}function CE(i){return typeof i=="number"&&Number.isInteger(i)&&!bl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="";function RE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Fp(e)),e=PE(i.get(n),e);return Fp(e)}function PE(i,e){let n=e;const s=i.length;for(let l=0;l<s;l++){const c=i.charAt(l);switch(c){case"\0":n+="";break;case Wm:n+="";break;default:n+=c}}return n}function Fp(i){return i+Wm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ji(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Km(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??Lt.RED,this.left=l??Lt.EMPTY,this.right=c??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new Lt(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Lt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Up(this.data.getIterator())}getIteratorFrom(e){return new Up(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Up{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new St(Mt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ym("Invalid base64 string: "+c):c}}(e);return new Ft(n)}static fromUint8Array(e){const n=function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c}(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const kE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(i){if(He(!!i,39018),typeof i=="string"){let e=0;const n=kE.exec(i);if(He(!!n,46558,{timestamp:i}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ct(i.seconds),nanos:ct(i.nanos)}}function ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function si(i){return typeof i=="string"?Ft.fromBase64String(i):Ft.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="server_timestamp",Jm="__type__",Zm="__previous_value__",eg="__local_write_time__";function Ih(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jm])===null||n===void 0?void 0:n.stringValue)===Xm}function tu(i){const e=i.mapValue.fields[Zm];return Ih(e)?tu(e):e}function Jo(i){const e=ii(i.mapValue.fields[eg].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,s,l,c,f,g,v,E,I){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=E,this.isUsingEmulator=I}}const $l="(default)";class Zo{constructor(e,n){this.projectId=e,this.database=n||$l}static empty(){return new Zo("","")}get isDefaultDatabase(){return this.database===$l}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="__type__",VE="__max__",Rl={mapValue:{}},ng="__vector__",Hl="value";function oi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ih(i)?4:NE(i)?9007199254740991:DE(i)?10:11:ve(28295,{value:i})}function rr(i,e){if(i===e)return!0;const n=oi(i);if(n!==oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Jo(i).isEqual(Jo(e));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=ii(l.timestampValue),g=ii(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(l,c){return si(l.bytesValue).isEqual(si(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(l,c){return ct(l.geoPointValue.latitude)===ct(c.geoPointValue.latitude)&&ct(l.geoPointValue.longitude)===ct(c.geoPointValue.longitude)}(i,e);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return ct(l.integerValue)===ct(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=ct(l.doubleValue),g=ct(c.doubleValue);return f===g?bl(f)===bl(g):isNaN(f)&&isNaN(g)}return!1}(i,e);case 9:return zs(i.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(l,c){const f=l.mapValue.fields||{},g=c.mapValue.fields||{};if(zp(f)!==zp(g))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(g[v]===void 0||!rr(f[v],g[v])))return!1;return!0}(i,e);default:return ve(52216,{left:i})}}function ea(i,e){return(i.values||[]).find(n=>rr(n,e))!==void 0}function Us(i,e){if(i===e)return 0;const n=oi(i),s=oi(e);if(n!==s)return Re(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return function(c,f){const g=ct(c.integerValue||c.doubleValue),v=ct(f.integerValue||f.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1}(i,e);case 3:return jp(i.timestampValue,e.timestampValue);case 4:return jp(Jo(i),Jo(e));case 5:return rh(i.stringValue,e.stringValue);case 6:return function(c,f){const g=si(c),v=si(f);return g.compareTo(v)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const g=c.split("/"),v=f.split("/");for(let E=0;E<g.length&&E<v.length;E++){const I=Re(g[E],v[E]);if(I!==0)return I}return Re(g.length,v.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const g=Re(ct(c.latitude),ct(f.latitude));return g!==0?g:Re(ct(c.longitude),ct(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Bp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var g,v,E,I;const V=c.fields||{},D=f.fields||{},j=(g=V[Hl])===null||g===void 0?void 0:g.arrayValue,Y=(v=D[Hl])===null||v===void 0?void 0:v.arrayValue,J=Re(((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0,((I=Y==null?void 0:Y.values)===null||I===void 0?void 0:I.length)||0);return J!==0?J:Bp(j,Y)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===Rl.mapValue&&f===Rl.mapValue)return 0;if(c===Rl.mapValue)return 1;if(f===Rl.mapValue)return-1;const g=c.fields||{},v=Object.keys(g),E=f.fields||{},I=Object.keys(E);v.sort(),I.sort();for(let V=0;V<v.length&&V<I.length;++V){const D=rh(v[V],I[V]);if(D!==0)return D;const j=Us(g[v[V]],E[I[V]]);if(j!==0)return j}return Re(v.length,I.length)}(i.mapValue,e.mapValue);default:throw ve(23264,{Pe:n})}}function jp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const n=ii(i),s=ii(e),l=Re(n.seconds,s.seconds);return l!==0?l:Re(n.nanos,s.nanos)}function Bp(i,e){const n=i.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Us(n[l],s[l]);if(c)return c}return Re(n.length,s.length)}function js(i){return ih(i)}function ih(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ii(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return si(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return me.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=ih(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${ih(n.fields[f])}`;return l+"}"}(i.mapValue):ve(61005,{value:i})}function Dl(i){switch(oi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tu(i);return e?16+Dl(e):16;case 5:return 2*i.stringValue.length;case 6:return si(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Dl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let l=0;return ji(s.fields,(c,f)=>{l+=c.length+Dl(f)}),l}(i.mapValue);default:throw ve(13486,{value:i})}}function sh(i){return!!i&&"integerValue"in i}function Ah(i){return!!i&&"arrayValue"in i}function bp(i){return!!i&&"nullValue"in i}function $p(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Nl(i){return!!i&&"mapValue"in i}function DE(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[tg])===null||n===void 0?void 0:n.stringValue)===ng}function qo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ji(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=qo(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function NE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===VE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Nl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(n)}setAll(e){let n=Mt.emptyPath(),s={},l=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=qo(f):l.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Nl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Nl(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ji(n,(l,c)=>e[l]=c);for(const l of s)delete e[l]}clone(){return new Sn(qo(this.value))}}function rg(i){const e=[];return ji(i.fields,(n,s)=>{const l=new Mt([n]);if(Nl(s)){const c=rg(s.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,s,l,c,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Ht(e,0,Te.min(),Te.min(),Te.min(),Sn.empty(),0)}static newFoundDocument(e,n,s,l){return new Ht(e,1,n,Te.min(),s,l,0)}static newNoDocument(e,n){return new Ht(e,2,n,Te.min(),Te.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Te.min(),Te.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.position=e,this.inclusive=n}}function Hp(i,e,n){let s=0;for(let l=0;l<i.position.length;l++){const c=e[l],f=i.position[l];if(c.field.isKeyField()?s=me.comparator(me.fromName(f.referenceValue),n.key):s=Us(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function qp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!rr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function OE(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{}class Tt extends ig{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ME(e,n,s):n==="array-contains"?new UE(e,s):n==="in"?new jE(e,s):n==="not-in"?new BE(e,s):n==="array-contains-any"?new bE(e,s):new Tt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new FE(e,s):new zE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&oi(this.value)===oi(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends ig{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ir(e,n)}matches(e){return sg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sg(i){return i.op==="and"}function og(i){return LE(i)&&sg(i)}function LE(i){for(const e of i.filters)if(e instanceof ir)return!1;return!0}function oh(i){if(i instanceof Tt)return i.field.canonicalString()+i.op.toString()+js(i.value);if(og(i))return i.filters.map(e=>oh(e)).join(",");{const e=i.filters.map(n=>oh(n)).join(",");return`${i.op}(${e})`}}function ag(i,e){return i instanceof Tt?function(s,l){return l instanceof Tt&&s.op===l.op&&s.field.isEqual(l.field)&&rr(s.value,l.value)}(i,e):i instanceof ir?function(s,l){return l instanceof ir&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,f,g)=>c&&ag(f,l.filters[g]),!0):!1}(i,e):void ve(19439)}function lg(i){return i instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${js(n.value)}`}(i):i instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(lg).join(" ,")+"}"}(i):"Filter"}class ME extends Tt{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class FE extends Tt{constructor(e,n){super(e,"in",n),this.keys=ug("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zE extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=ug("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ug(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>me.fromName(s.referenceValue))}class UE extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ah(n)&&ea(n.arrayValue,this.value)}}class jE extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ea(this.value.arrayValue,n)}}class BE extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ea(this.value.arrayValue,n)}}class bE extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ea(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n=null,s=[],l=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=g,this.Ie=null}}function Qp(i,e=null,n=[],s=[],l=null,c=null,f=null){return new $E(i,e,n,s,l,c,f)}function Ch(i){const e=we(i);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>oh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),eu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>js(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>js(s)).join(",")),e.Ie=n}return e.Ie}function Rh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!OE(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!ag(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!qp(i.startAt,e.startAt)&&qp(i.endAt,e.endAt)}function ah(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n=null,s=[],l=[],c=null,f="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=v,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function HE(i,e,n,s,l,c,f,g){return new nu(i,e,n,s,l,c,f,g)}function Ph(i){return new nu(i)}function Gp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function qE(i){return i.collectionGroup!==null}function Qo(i){const e=we(i);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new St(Mt.comparator);return f.filters.forEach(v=>{v.getFlattenedFilters().forEach(E=>{E.isInequality()&&(g=g.add(E.field))})}),g})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Ql(c,s))}),n.has(Mt.keyField().canonicalString())||e.Ee.push(new Ql(Mt.keyField(),s))}return e.Ee}function tr(i){const e=we(i);return e.de||(e.de=QE(e,Qo(i))),e.de}function QE(i,e){if(i.limitType==="F")return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Ql(l.field,c)});const n=i.endAt?new ql(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ql(i.startAt.position,i.startAt.inclusive):null;return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function lh(i,e,n){return new nu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function ru(i,e){return Rh(tr(i),tr(e))&&i.limitType===e.limitType}function cg(i){return`${Ch(tr(i))}|lt:${i.limitType}`}function Ds(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>lg(l)).join(", ")}]`),eu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>js(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>js(l)).join(",")),`Target(${s})`}(tr(i))}; limitType=${i.limitType})`}function iu(i,e){return e.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):me.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,l){for(const c of Qo(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(i,e)&&function(s,l){return!(s.startAt&&!function(f,g,v){const E=Hp(f,g,v);return f.inclusive?E<=0:E<0}(s.startAt,Qo(s),l)||s.endAt&&!function(f,g,v){const E=Hp(f,g,v);return f.inclusive?E>=0:E>0}(s.endAt,Qo(s),l))}(i,e)}function GE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hg(i){return(e,n)=>{let s=!1;for(const l of Qo(i)){const c=WE(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function WE(i,e,n){const s=i.field.isKeyField()?me.comparator(e.key,n.key):function(c,f,g){const v=f.data.field(c),E=g.data.field(c);return v!==null&&E!==null?Us(v,E):ve(42886)}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(n,s)=>{for(const[l,c]of s)e(l,c)})}isEmpty(){return Km(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new it(me.comparator);function Ar(){return KE}const fg=new it(me.comparator);function bo(...i){let e=fg;for(const n of i)e=e.insert(n.key,n);return e}function dg(i){let e=fg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Fi(){return Go()}function pg(){return Go()}function Go(){return new Bi(i=>i.toString(),(i,e)=>i.isEqual(e))}const YE=new it(me.comparator),XE=new St(me.comparator);function De(...i){let e=XE;for(const n of i)e=e.add(n);return e}const JE=new St(Re);function ZE(){return JE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function mg(i){return{integerValue:""+i}}function e0(i,e){return CE(e)?mg(e):kh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this._=void 0}}function t0(i,e,n){return i instanceof ta?function(l,c){const f={fields:{[Jm]:{stringValue:Xm},[eg]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Ih(c)&&(c=tu(c)),c&&(f.fields[Zm]=c),{mapValue:f}}(n,e):i instanceof na?yg(i,e):i instanceof ra?vg(i,e):function(l,c){const f=gg(l,c),g=Wp(f)+Wp(l.Re);return sh(f)&&sh(l.Re)?mg(g):kh(l.serializer,g)}(i,e)}function n0(i,e,n){return i instanceof na?yg(i,e):i instanceof ra?vg(i,e):n}function gg(i,e){return i instanceof Gl?function(s){return sh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class ta extends su{}class na extends su{constructor(e){super(),this.elements=e}}function yg(i,e){const n=_g(e);for(const s of i.elements)n.some(l=>rr(l,s))||n.push(s);return{arrayValue:{values:n}}}class ra extends su{constructor(e){super(),this.elements=e}}function vg(i,e){let n=_g(e);for(const s of i.elements)n=n.filter(l=>!rr(l,s));return{arrayValue:{values:n}}}class Gl extends su{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Wp(i){return ct(i.integerValue||i.doubleValue)}function _g(i){return Ah(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){this.field=e,this.transform=n}}function i0(i,e){return i.field.isEqual(e.field)&&function(s,l){return s instanceof na&&l instanceof na||s instanceof ra&&l instanceof ra?zs(s.elements,l.elements,rr):s instanceof Gl&&l instanceof Gl?rr(s.Re,l.Re):s instanceof ta&&l instanceof ta}(i.transform,e.transform)}class s0{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ol(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ou{}function Eg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new wg(i.key,wr.none()):new oa(i.key,i.data,wr.none());{const n=i.data,s=Sn.empty();let l=new St(Mt.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new bi(i.key,s,new Bn(l.toArray()),wr.none())}}function o0(i,e,n){i instanceof oa?function(l,c,f){const g=l.value.clone(),v=Yp(l.fieldTransforms,c,f.transformResults);g.setAll(v),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):i instanceof bi?function(l,c,f){if(!Ol(l.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Yp(l.fieldTransforms,c,f.transformResults),v=c.data;v.setAll(Tg(l)),v.setAll(g),c.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(i,e,n):function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Wo(i,e,n,s){return i instanceof oa?function(c,f,g,v){if(!Ol(c.precondition,f))return g;const E=c.value.clone(),I=Xp(c.fieldTransforms,v,f);return E.setAll(I),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null}(i,e,n,s):i instanceof bi?function(c,f,g,v){if(!Ol(c.precondition,f))return g;const E=Xp(c.fieldTransforms,v,f),I=f.data;return I.setAll(Tg(c)),I.setAll(E),f.convertToFoundDocument(f.version,I).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(V=>V.field))}(i,e,n,s):function(c,f,g){return Ol(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(i,e,n)}function a0(i,e){let n=null;for(const s of i.fieldTransforms){const l=e.data.field(s.field),c=gg(s.transform,l||null);c!=null&&(n===null&&(n=Sn.empty()),n.set(s.field,c))}return n||null}function Kp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&zs(s,l,(c,f)=>i0(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class oa extends ou{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class bi extends ou{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Tg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Yp(i,e,n){const s=new Map;He(i.length===n.length,32656,{Ve:n.length,me:i.length});for(let l=0;l<n.length;l++){const c=i[l],f=c.transform,g=e.data.field(c.field);s.set(c.field,n0(f,g,n[l]))}return s}function Xp(i,e,n){const s=new Map;for(const l of i){const c=l.transform,f=n.data.field(l.field);s.set(l.field,t0(c,f,e))}return s}class wg extends ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l0 extends ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&o0(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Wo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Wo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=pg();return this.mutations.forEach(l=>{const c=e.get(l.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(l.key)?null:g;const v=Eg(f,g);v!==null&&s.set(l.key,v),f.isValidDocument()||f.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&zs(this.mutations,e.mutations,(n,s)=>Kp(n,s))&&zs(this.baseMutations,e.baseMutations,(n,s)=>Kp(n,s))}}class xh{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){He(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let l=function(){return YE}();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new xh(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,ze;function f0(i){switch(i){case G.OK:return ve(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function Sg(i){if(i===void 0)return Ir("GRPC error has no .code"),G.UNKNOWN;switch(i){case pt.OK:return G.OK;case pt.CANCELLED:return G.CANCELLED;case pt.UNKNOWN:return G.UNKNOWN;case pt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case pt.INTERNAL:return G.INTERNAL;case pt.UNAVAILABLE:return G.UNAVAILABLE;case pt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case pt.NOT_FOUND:return G.NOT_FOUND;case pt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case pt.ABORTED:return G.ABORTED;case pt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case pt.DATA_LOSS:return G.DATA_LOSS;default:return ve(39323,{code:i})}}(ze=pt||(pt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new ti([4294967295,4294967295],0);function Jp(i){const e=Qm().encode(i),n=new zm;return n.update(e),new Uint8Array(n.digest())}function Zp(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ti([n,s],0),new ti([l,c],0)]}class Vh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $o(`Invalid padding: ${n}`);if(s<0)throw new $o(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $o(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ti.fromNumber(this.pe)}we(e,n,s){let l=e.add(n.multiply(ti.fromNumber(s)));return l.compare(d0)===1&&(l=new ti([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Jp(e),[s,l]=Zp(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);if(!this.Se(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Vh(c,l,n);return s.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=Jp(e),[s,l]=Zp(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,aa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new au(Te.min(),l,new it(Re),Ar(),De())}}class aa{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new aa(s,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,s,l){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=l}}class Ig{constructor(e,n){this.targetId=e,this.Ce=n}}class Ag{constructor(e,n,s=Ft.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class em{constructor(){this.Fe=0,this.Me=tm(),this.xe=Ft.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=De(),n=De(),s=De();return this.Me.forEach((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:ve(38017,{changeType:c})}}),new aa(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=tm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,He(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class p0{constructor(e){this.ze=e,this.je=new Map,this.He=Ar(),this.Je=Pl(),this.Ye=Pl(),this.Ze=new it(Re)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(e){const n=e.targetId,s=e.Ce.count,l=this._t(n);if(l){const c=l.target;if(ah(c))if(s===0){const f=new me(c.path);this.tt(n,f,Ht.newNoDocument(f,Te.min()))}else He(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const g=this.ct(e),v=g?this.lt(g,e,f):1;if(v!==0){this.st(n);const E=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,E)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,g;try{f=si(s).toUint8Array()}catch(v){if(v instanceof Ym)return Fs("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Vh(f,l,c)}catch(v){return Fs(v instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.pe===0?null:g}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,c,null),l++)}),l}It(e){const n=new Map;this.je.forEach((c,f)=>{const g=this._t(f);if(g){if(c.current&&ah(g.target)){const v=new me(g.target.path);this.Et(v).has(f)||this.dt(f,v)||this.tt(f,v,Ht.newNoDocument(v,e))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=De();this.Ye.forEach((c,f)=>{let g=!0;f.forEachWhile(v=>{const E=this._t(v);return!E||E.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(e));const l=new au(e,n,this.Ze,this.He,s);return this.He=Ar(),this.Je=Pl(),this.Ye=Pl(),this.Ze=new it(Re),l}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const l=this.rt(e);this.dt(e,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new em,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new St(Re),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new St(Re),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new em),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Pl(){return new it(me.comparator)}function tm(){return new it(me.comparator)}const m0={asc:"ASCENDING",desc:"DESCENDING"},g0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y0={and:"AND",or:"OR"};class v0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uh(i,e){return i.useProto3Json||eu(e)?e:{value:e}}function Wl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function _0(i,e){return Wl(i,e.toTimestamp())}function nr(i){return He(!!i,49232),Te.fromTimestamp(function(n){const s=ii(n);return new wt(s.seconds,s.nanos)}(i))}function Dh(i,e){return ch(i,e).canonicalString()}function ch(i,e){const n=function(l){return new at(["projects",l.projectId,"databases",l.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Rg(i){const e=at.fromString(i);return He(Dg(e),10190,{key:e.toString()}),e}function hh(i,e){return Dh(i.databaseId,e.path)}function Qc(i,e){const n=Rg(e);if(n.get(1)!==i.databaseId.projectId)throw new pe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new pe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new me(kg(n))}function Pg(i,e){return Dh(i.databaseId,e)}function E0(i){const e=Rg(i);return e.length===4?at.emptyPath():kg(e)}function fh(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function kg(i){return He(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function nm(i,e,n){return{name:hh(i,e),fields:n.value.mapValue.fields}}function T0(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ve(39313,{state:E})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=function(E,I){return E.useProto3Json?(He(I===void 0||typeof I=="string",58123),Ft.fromBase64String(I||"")):(He(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),Ft.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(E){const I=E.code===void 0?G.UNKNOWN:Sg(E.code);return new pe(I,E.message||"")}(f);n=new Ag(s,l,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Qc(i,s.document.name),c=nr(s.document.updateTime),f=s.document.createTime?nr(s.document.createTime):Te.min(),g=new Sn({mapValue:{fields:s.document.fields}}),v=Ht.newFoundDocument(l,c,f,g),E=s.targetIds||[],I=s.removedTargetIds||[];n=new Ll(E,I,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Qc(i,s.document),c=s.readTime?nr(s.readTime):Te.min(),f=Ht.newNoDocument(l,c),g=s.removedTargetIds||[];n=new Ll([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Qc(i,s.document),c=s.removedTargetIds||[];n=new Ll([],c,l,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new h0(l,c),g=s.targetId;n=new Ig(g,f)}}return n}function w0(i,e){let n;if(e instanceof oa)n={update:nm(i,e.key,e.value)};else if(e instanceof wg)n={delete:hh(i,e.key)};else if(e instanceof bi)n={update:nm(i,e.key,e.data),updateMask:V0(e.fieldMask)};else{if(!(e instanceof l0))return ve(16599,{ft:e.type});n={verify:hh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const g=f.transform;if(g instanceof ta)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof na)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ra)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Gl)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw ve(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:_0(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ve(27497)}(i,e.precondition)),n}function S0(i,e){return i&&i.length>0?(He(e!==void 0,14353),i.map(n=>function(l,c){let f=l.updateTime?nr(l.updateTime):nr(c);return f.isEqual(Te.min())&&(f=nr(c)),new s0(f,l.transformResults||[])}(n,e))):[]}function I0(i,e){return{documents:[Pg(i,e.path)]}}function A0(i,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Pg(i,l);const c=function(E){if(E.length!==0)return Vg(ir.create(E,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(E){if(E.length!==0)return E.map(I=>function(D){return{field:Ns(D.field),direction:P0(D.dir)}}(I))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=uh(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{gt:n,parent:l}}function C0(i){let e=E0(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){He(s===1,65062);const I=n.from[0];I.allDescendants?l=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=function(V){const D=xg(V);return D instanceof ir&&og(D)?D.getFilters():[D]}(n.where));let f=[];n.orderBy&&(f=function(V){return V.map(D=>function(Y){return new Ql(Os(Y.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Y.direction))}(D))}(n.orderBy));let g=null;n.limit&&(g=function(V){let D;return D=typeof V=="object"?V.value:V,eu(D)?null:D}(n.limit));let v=null;n.startAt&&(v=function(V){const D=!!V.before,j=V.values||[];return new ql(j,D)}(n.startAt));let E=null;return n.endAt&&(E=function(V){const D=!V.before,j=V.values||[];return new ql(j,D)}(n.endAt)),HE(e,l,f,c,g,"F",v,E)}function R0(i,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:l})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Os(n.unaryFilter.field);return Tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Os(n.unaryFilter.field);return Tt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Os(n.unaryFilter.field);return Tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Os(n.unaryFilter.field);return Tt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(i):i.fieldFilter!==void 0?function(n){return Tt.create(Os(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(s=>xg(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(i):ve(30097,{filter:i})}function P0(i){return m0[i]}function k0(i){return g0[i]}function x0(i){return y0[i]}function Ns(i){return{fieldPath:i.canonicalString()}}function Os(i){return Mt.fromServerFormat(i.fieldPath)}function Vg(i){return i instanceof Tt?function(n){if(n.op==="=="){if($p(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if(bp(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($p(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if(bp(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:k0(n.op),value:n.value}}}(i):i instanceof ir?function(n){const s=n.getFilters().map(l=>Vg(l));return s.length===1?s[0]:{compositeFilter:{op:x0(n.op),filters:s}}}(i):ve(54877,{filter:i})}function V0(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s,l,c=Te.min(),f=Te.min(),g=Ft.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.wt=e}}function N0(i){const e=C0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.Cn=new L0}addToCollectionParentIndex(e,n){return this.Cn.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}deleteAllFieldIndexes(e){return b.resolve()}createTargetIndexes(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(ri.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(ri.min())}updateCollectionGroup(e,n,s){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class L0{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new St(at.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new St(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ng=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(Ng,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Bs(0)}static lr(){return new Bs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="LruGarbageCollector",M0=1048576;function sm([i,e],[n,s]){const l=Re(i,n);return l===0?Re(e,s):l}class F0{constructor(e){this.Er=e,this.buffer=new St(sm),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();sm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z0{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ne(im,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gs(n)?ne(im,"Ignoring IndexedDB error during garbage collection: ",n):await Qs(n)}await this.mr(3e5)})}}class U0{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return b.resolve(Zl.le);const s=new F0(n);return this.gr.forEachTarget(e,l=>s.Rr(l.sequenceNumber)).next(()=>this.gr.yr(e,l=>s.Rr(l))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),b.resolve(rm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rm):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,l,c,f,g,v,E;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(V=>(V>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${V}`),l=this.params.maximumSequenceNumbersToCollect):l=V,f=Date.now(),this.nthSequenceNumber(e,l))).next(V=>(s=V,g=Date.now(),this.removeTargets(e,s,n))).next(V=>(c=V,v=Date.now(),this.removeOrphanedDocuments(e,s))).next(V=>(E=Date.now(),Vs()<=Ue.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-I}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${c} targets in `+(v-g)+`ms
	Removed ${V} documents in `+(E-v)+`ms
Total Duration: ${E-I}ms`),b.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:V})))}}function j0(i,e){return new U0(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?b.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(s!==null&&Wo(s.mutation,l,Bn.empty(),wt.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,De()).next(()=>s))}getLocalViewOfDocuments(e,n,s=De()){const l=Fi();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,s).next(c=>{let f=bo();return c.forEach((g,v)=>{f=f.insert(g,v.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Fi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,De()))}populateOverlays(e,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(e,l).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,s,l){let c=Ar();const f=Go(),g=function(){return Go()}();return n.forEach((v,E)=>{const I=s.get(E.key);l.has(E.key)&&(I===void 0||I.mutation instanceof bi)?c=c.insert(E.key,E):I!==void 0?(f.set(E.key,I.mutation.getFieldMask()),Wo(I.mutation,E,I.mutation.getFieldMask(),wt.now())):f.set(E.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,c).next(v=>(v.forEach((E,I)=>f.set(E,I)),n.forEach((E,I)=>{var V;return g.set(E,new b0(I,(V=f.get(E))!==null&&V!==void 0?V:null))}),g))}recalculateAndSaveOverlays(e,n){const s=Go();let l=new it((f,g)=>f-g),c=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(v=>{const E=n.get(v);if(E===null)return;let I=s.get(v)||Bn.empty();I=g.applyToLocalView(E,I),s.set(v,I);const V=(l.get(g.batchId)||De()).add(v);l=l.insert(g.batchId,V)})}).next(()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),E=v.key,I=v.value,V=pg();I.forEach(D=>{if(!c.has(D)){const j=Eg(n.get(D),s.get(D));j!==null&&V.set(D,j),c=c.add(D)}}),f.push(this.documentOverlayCache.saveOverlays(e,E,V))}return b.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,l){return function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next(c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):b.resolve(Fi());let g=Xo,v=c;return f.next(E=>b.forEach(E,(I,V)=>(g<V.largestBatchId&&(g=V.largestBatchId),c.get(I)?b.resolve():this.remoteDocumentCache.getEntry(e,I).next(D=>{v=v.insert(I,D)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,v,E,De())).next(I=>({batchId:g,changes:dg(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(s=>{let l=bo();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let f=bo();return this.indexManager.getCollectionParents(e,c).next(g=>b.forEach(g,v=>{const E=function(V,D){return new nu(D,null,V.explicitOrderBy.slice(),V.filters.slice(),V.limit,V.limitType,V.startAt,V.endAt)}(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,l).next(I=>{I.forEach((V,D)=>{f=f.insert(V,D)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l))).next(f=>{c.forEach((v,E)=>{const I=E.getKey();f.get(I)===null&&(f=f.insert(I,Ht.newInvalidDocument(I)))});let g=bo();return f.forEach((v,E)=>{const I=c.get(v);I!==void 0&&Wo(I.mutation,E,Bn.empty(),wt.now()),iu(n,E)&&(g=g.insert(v,E))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return b.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:nr(l.createTime)}}(n)),b.resolve()}getNamedQuery(e,n){return b.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(l){return{name:l.name,query:N0(l.bundledQuery),readTime:nr(l.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.overlays=new it(me.comparator),this.Qr=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Fi();return b.forEach(n,l=>this.getOverlay(e,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((l,c)=>{this.bt(e,n,c)}),b.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.Qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),b.resolve()}getOverlaysForCollection(e,n,s){const l=Fi(),c=n.length+1,f=new me(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const v=g.getNext().value,E=v.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&v.largestBatchId>s&&l.set(v.getKey(),v)}return b.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new it((E,I)=>E-I);const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let I=c.get(E.largestBatchId);I===null&&(I=Fi(),c=c.insert(E.largestBatchId,I)),I.set(E.getKey(),E)}}const g=Fi(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((E,I)=>g.set(E,I)),!(g.size()>=l)););return b.resolve(g)}bt(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Qr.get(l.largestBatchId).delete(s.key);this.Qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new c0(n,s));let c=this.Qr.get(n);c===void 0&&(c=De(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return b.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,b.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.$r=new St(kt.Ur),this.Kr=new St(kt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new kt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new kt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new me(new at([])),s=new kt(n,e),l=new kt(n,e+1),c=[];return this.Kr.forEachInRange([s,l],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new me(new at([])),s=new kt(n,e),l=new kt(n,e+1);let c=De();return this.Kr.forEachInRange([s,l],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new kt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return me.comparator(e.key,n.key)||Re(e.Zr,n.Zr)}static Wr(e,n){return Re(e.Zr,n.Zr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new St(kt.Ur)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new u0(c,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Xr=this.Xr.add(new kt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return b.resolve(f)}lookupMutationBatch(e,n){return b.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ti(s),c=l<0?0:l;return b.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?Sh:this.nr-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new kt(n,0),l=new kt(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,l],f=>{const g=this.ei(f.Zr);c.push(g)}),b.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new St(Re);return n.forEach(l=>{const c=new kt(l,0),f=new kt(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],g=>{s=s.add(g.Zr)})}),b.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;me.isDocumentKey(c)||(c=c.child(""));const f=new kt(new me(c),0);let g=new St(Re);return this.Xr.forEachWhile(v=>{const E=v.key.path;return!!s.isPrefixOf(E)&&(E.length===l&&(g=g.add(v.Zr)),!0)},f),b.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(s=>{const l=this.ei(s);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){He(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return b.forEach(n.mutations,l=>{const c=new kt(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new kt(n,0),l=this.Xr.firstAfterOrEqual(s);return b.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.ii=e,this.docs=function(){return new it(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return b.resolve(s?s.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let s=Ar();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ht.newInvalidDocument(l))}),b.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Ar();const f=n.path,g=new me(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:E,value:{document:I}}=v.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||wE(TE(I),s)<=0||(l.has(I.key)||iu(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return b.resolve(c)}getAllFromCollectionGroup(e,n,s,l){ve(9500)}si(e,n){return b.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new K0(this)}getSize(e){return b.resolve(this.size)}}class K0 extends B0{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(e,l)):this.Br.removeEntry(s)}),b.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.persistence=e,this.oi=new Bi(n=>Ch(n),Rh),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this._i=0,this.ai=new Nh,this.targetCount=0,this.ui=Bs.cr()}forEachTarget(e,n){return this.oi.forEach((s,l)=>n(l)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),b.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.Tr(n),b.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),b.waitFor(c).next(()=>l)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return b.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),b.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(f=>{c.push(l.markPotentiallyOrphaned(e,f))}),b.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),b.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return b.resolve(s)}containsKey(e,n){return b.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){this.ci={},this.overlays={},this.li=new Zl(0),this.hi=!1,this.hi=!0,this.Pi=new Q0,this.referenceDelegate=e(this),this.Ti=new Y0(this),this.indexManager=new O0,this.remoteDocumentCache=function(l){return new W0(l)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new D0(n),this.Ei=new H0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new q0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new G0(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const l=new X0(this.li.next());return this.referenceDelegate.di(),s(l).next(c=>this.referenceDelegate.Ai(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ri(e,n){return b.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class X0 extends IE{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Vi=new Nh,this.mi=null}static fi(e){return new Oh(e)}get gi(){if(this.mi)return this.mi;throw ve(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),b.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),b.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.gi,s=>{const l=me.fromPath(s);return this.pi(e,l).next(c=>{c||n.removeEntry(l,Te.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return b.or([()=>b.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Kl{constructor(e,n){this.persistence=e,this.yi=new Bi(s=>RE(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=j0(this,n)}static fi(e,n){return new Kl(e,n)}di(){}Ai(e){return b.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(l=>s+l))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return b.forEach(this.yi,(s,l)=>this.Dr(e,s,l).next(c=>c?b.resolve():n(l)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.si(e,f=>this.Dr(e,f,n).next(g=>{g||(s++,c.removeEntry(f,Te.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),b.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),b.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),b.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),b.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dl(e.data.value)),n}Dr(e,n,s){return b.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.yi.get(n);return b.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.ds=s,this.As=l}static Rs(e,n){let s=De(),l=De();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Lh(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return qv()?8:AE($v())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ws(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.Ss(e,n,l,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new J0;return this.bs(e,n,f).next(g=>{if(c.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>c.result)}Ds(e,n,s,l){return s.documentReadCount<this.gs?(Vs()<=Ue.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),b.resolve()):(Vs()<=Ue.DEBUG&&ne("QueryEngine","Query:",Ds(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ps*l?(Vs()<=Ue.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):b.resolve())}ws(e,n){if(Gp(n))return b.resolve(null);let s=tr(n);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=lh(n,null,"F"),s=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=De(...c);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,s).next(v=>{const E=this.vs(n,g);return this.Cs(n,E,f,v.readTime)?this.ws(e,lh(n,null,"F")):this.Fs(e,E,n,v)}))})))}Ss(e,n,s,l){return Gp(n)||l.isEqual(Te.min())?b.resolve(null):this.ys.getDocuments(e,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,l)?b.resolve(null):(Vs()<=Ue.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ds(n)),this.Fs(e,f,n,EE(l,Xo)).next(g=>g))})}vs(e,n){let s=new St(hg(e));return n.forEach((l,c)=>{iu(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}bs(e,n,s){return Vs()<=Ue.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.ys.getDocumentsMatchingQuery(e,n,ri.min(),s)}Fs(e,n,s,l){return this.ys.getDocumentsMatchingQuery(e,s,l).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="LocalStore",eT=3e8;class tT{constructor(e,n,s,l){this.persistence=e,this.Ms=n,this.serializer=l,this.xs=new it(Re),this.Os=new Bi(c=>Ch(c),Rh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $0(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function nT(i,e,n,s){return new tT(i,e,n,s)}async function Lg(i,e){const n=we(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],g=[];let v=De();for(const E of l){f.push(E.batchId);for(const I of E.mutations)v=v.add(I.key)}for(const E of c){g.push(E.batchId);for(const I of E.mutations)v=v.add(I.key)}return n.localDocuments.getDocuments(s,v).next(E=>({ks:E,removedBatchIds:f,addedBatchIds:g}))})})}function rT(i,e){const n=we(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,v,E,I){const V=E.batch,D=V.keys();let j=b.resolve();return D.forEach(Y=>{j=j.next(()=>I.getEntry(v,Y)).next(J=>{const $=E.docVersions.get(Y);He($!==null,48541),J.version.compareTo($)<0&&(V.applyToRemoteDocument(J,E),J.isValidDocument()&&(J.setReadTime(E.commitVersion),I.addEntry(J)))})}),j.next(()=>g.mutationQueue.removeMutationBatch(v,V))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let v=De();for(let E=0;E<g.mutationResults.length;++E)g.mutationResults[E].transformResults.length>0&&(v=v.add(g.batch.mutations[E].key));return v}(e))).next(()=>n.localDocuments.getDocuments(s,l))})}function Mg(i){const e=we(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function iT(i,e){const n=we(i),s=e.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const g=[];e.targetChanges.forEach((I,V)=>{const D=l.get(V);if(!D)return;g.push(n.Ti.removeMatchingKeys(c,I.removedDocuments,V).next(()=>n.Ti.addMatchingKeys(c,I.addedDocuments,V)));let j=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(V)!==null?j=j.withResumeToken(Ft.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):I.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(I.resumeToken,s)),l=l.insert(V,j),function(J,$,Se){return J.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=eT?!0:Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0}(D,j,I)&&g.push(n.Ti.updateTargetData(c,j))});let v=Ar(),E=De();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))}),g.push(sT(c,f,e.documentUpdates).next(I=>{v=I.qs,E=I.Qs})),!s.isEqual(Te.min())){const I=n.Ti.getLastRemoteSnapshotVersion(c).next(V=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(I)}return b.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,v,E)).next(()=>v)}).then(c=>(n.xs=l,c))}function sT(i,e,n){let s=De(),l=De();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Ar();return n.forEach((g,v)=>{const E=c.get(g);v.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(g)),v.isNoDocument()&&v.version.isEqual(Te.min())?(e.removeEntry(g,v.readTime),f=f.insert(g,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||v.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(v),f=f.insert(g,v)):ne(Mh,"Ignoring outdated watch update for ",g,". Current version:",E.version," Watch version:",v.version)}),{qs:f,Qs:l}})}function oT(i,e){const n=we(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Sh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function aT(i,e){const n=we(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Ti.getTargetData(s,e).next(c=>c?(l=c,b.resolve(l)):n.Ti.allocateTargetId(s).next(f=>(l=new Jr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.xs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function dh(i,e,n){const s=we(i),l=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!Gs(f))throw f;ne(Mh,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(l.target)}function om(i,e,n){const s=we(i);let l=Te.min(),c=De();return s.persistence.runTransaction("Execute query","readwrite",f=>function(v,E,I){const V=we(v),D=V.Os.get(I);return D!==void 0?b.resolve(V.xs.get(D)):V.Ti.getTargetData(E,I)}(s,f,tr(e)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,g.targetId).next(v=>{c=v})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?l:Te.min(),n?c:De())).next(g=>(lT(s,GE(e),g),{documents:g,$s:c})))}function lT(i,e,n){let s=i.Ns.get(e)||Te.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Ns.set(e,s)}class am{constructor(){this.activeTargetIds=ZE()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uT{constructor(){this.xo=new am,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new am,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="ConnectivityMonitor";class um{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ne(lm,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ne(lm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl=null;function ph(){return kl===null?kl=function(){return 268435456+Math.round(2147483648*Math.random())}():kl++,"0x"+kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="RestConnection",hT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fT{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${l}`,this.Go=this.databaseId.database===$l?`project_id=${s}`:`project_id=${s}&database_id=${l}`}zo(e,n,s,l,c){const f=ph(),g=this.jo(e,n.toUriEncodedString());ne(Gc,`Sending RPC '${e}' ${f}:`,g,s);const v={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(v,l,c);const{host:E}=new URL(g),I=Eh(E);return this.Jo(e,g,v,s,I).then(V=>(ne(Gc,`Received RPC '${e}' ${f}: `,V),V),V=>{throw Fs(Gc,`RPC '${e}' ${f} failed with error: `,V,"url: ",g,"request:",s),V})}Yo(e,n,s,l,c,f){return this.zo(e,n,s,l,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>e[c]=l),s&&s.headers.forEach((l,c)=>e[c]=l)}jo(e,n){const s=hT[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class pT extends fT{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const f=ph();return new Promise((g,v)=>{const E=new Um;E.setWithCredentials(!0),E.listenOnce(jm.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case Vl.NO_ERROR:const V=E.getResponseJson();ne(bt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(V)),g(V);break;case Vl.TIMEOUT:ne(bt,`RPC '${e}' ${f} timed out`),v(new pe(G.DEADLINE_EXCEEDED,"Request time out"));break;case Vl.HTTP_ERROR:const D=E.getStatus();if(ne(bt,`RPC '${e}' ${f} failed with status:`,D,"response text:",E.getResponseText()),D>0){let j=E.getResponseJson();Array.isArray(j)&&(j=j[0]);const Y=j==null?void 0:j.error;if(Y&&Y.status&&Y.message){const J=function(Se){const ge=Se.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(ge)>=0?ge:G.UNKNOWN}(Y.status);v(new pe(J,Y.message))}else v(new pe(G.UNKNOWN,"Server responded with status "+E.getStatus()))}else v(new pe(G.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:f,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{ne(bt,`RPC '${e}' ${f} completed.`)}});const I=JSON.stringify(l);ne(bt,`RPC '${e}' ${f} sending request:`,l),E.send(n,"POST",I,s,15)})}T_(e,n,s){const l=ph(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=$m(),g=bm(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Ho(v.initMessageHeaders,n,s),v.encodeInitMessageHeaders=!0;const I=c.join("");ne(bt,`Creating RPC '${e}' stream ${l}: ${I}`,v);const V=f.createWebChannel(I,v);let D=!1,j=!1;const Y=new dT({Zo:$=>{j?ne(bt,`Not sending because RPC '${e}' stream ${l} is closed:`,$):(D||(ne(bt,`Opening RPC '${e}' stream ${l} transport.`),V.open(),D=!0),ne(bt,`RPC '${e}' stream ${l} sending:`,$),V.send($))},Xo:()=>V.close()}),J=($,Se,ge)=>{$.listen(Se,Ee=>{try{ge(Ee)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return J(V,Bo.EventType.OPEN,()=>{j||(ne(bt,`RPC '${e}' stream ${l} transport opened.`),Y.__())}),J(V,Bo.EventType.CLOSE,()=>{j||(j=!0,ne(bt,`RPC '${e}' stream ${l} transport closed`),Y.u_())}),J(V,Bo.EventType.ERROR,$=>{j||(j=!0,Fs(bt,`RPC '${e}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),Y.u_(new pe(G.UNAVAILABLE,"The operation could not be completed")))}),J(V,Bo.EventType.MESSAGE,$=>{var Se;if(!j){const ge=$.data[0];He(!!ge,16349);const Ee=ge,Ae=(Ee==null?void 0:Ee.error)||((Se=Ee[0])===null||Se===void 0?void 0:Se.error);if(Ae){ne(bt,`RPC '${e}' stream ${l} received error:`,Ae);const tt=Ae.status;let ke=function(A){const R=pt[A];if(R!==void 0)return Sg(R)}(tt),k=Ae.message;ke===void 0&&(ke=G.INTERNAL,k="Unknown error status: "+tt+" with message "+Ae.message),j=!0,Y.u_(new pe(ke,k)),V.close()}else ne(bt,`RPC '${e}' stream ${l} received:`,ge),Y.c_(ge)}}),J(g,Bm.STAT_EVENT,$=>{$.stat===nh.PROXY?ne(bt,`RPC '${e}' stream ${l} detected buffering proxy`):$.stat===nh.NOPROXY&&ne(bt,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{Y.a_()},0),Y}}function Wc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(i){return new v0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,s=1e3,l=1.5,c=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=l,this.d_=c,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),l=Math.max(0,n-s);l>0&&ne("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="PersistentStream";class zg{constructor(e,n,s,l,c,f,g,v){this.xi=e,this.y_=s,this.w_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Fg(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Ir(n.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.S_===n&&this.K_(s,l)},s=>{e(()=>{const l=new pe(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(l)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{s(()=>this.W_(l))}),this.stream.onMessage(l=>{s(()=>++this.v_==1?this.z_(l):this.onNext(l))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ne(cm,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(ne(cm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mT extends zg{constructor(e,n,s,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=T0(this.serializer,e),s=function(c){if(!("targetChange"in c))return Te.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Te.min():f.readTime?nr(f.readTime):Te.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=fh(this.serializer),n.addTarget=function(c,f){let g;const v=f.target;if(g=ah(v)?{documents:I0(c,v)}:{query:A0(c,v).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Cg(c,f.resumeToken);const E=uh(c,f.expectedCount);E!==null&&(g.expectedCount=E)}else if(f.snapshotVersion.compareTo(Te.min())>0){g.readTime=Wl(c,f.snapshotVersion.toTimestamp());const E=uh(c,f.expectedCount);E!==null&&(g.expectedCount=E)}return g}(this.serializer,e);const s=R0(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=fh(this.serializer),n.removeTarget=e,this.L_(n)}}class gT extends zg{constructor(e,n,s,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=S0(e.writeResults,e.commitTime),s=nr(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=fh(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>w0(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{}class vT extends yT{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.na=!1}ra(){if(this.na)throw new pe(G.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,l){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(e,ch(n,s),l,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(G.UNKNOWN,c.toString())})}Yo(e,n,s,l,c){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,ch(n,s),l,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(G.UNKNOWN,f.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class _T{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ir(n),this.oa=!1):ne("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="RemoteStore";class ET{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=c,this.Ea.No(f=>{s.enqueueAndForget(async()=>{$i(this)&&(ne(Ui,"Restarting streams for network reachability change."),await async function(v){const E=we(v);E.Ta.add(4),await la(E),E.da.set("Unknown"),E.Ta.delete(4),await uu(E)}(this))})}),this.da=new _T(s,l)}}async function uu(i){if($i(i))for(const e of i.Ia)await e(!0)}async function la(i){for(const e of i.Ia)await e(!1)}function Ug(i,e){const n=we(i);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),jh(n)?Uh(n):Ws(n).M_()&&zh(n,e))}function Fh(i,e){const n=we(i),s=Ws(n);n.Pa.delete(e),s.M_()&&jg(n,e),n.Pa.size===0&&(s.M_()?s.N_():$i(n)&&n.da.set("Unknown"))}function zh(i,e){if(i.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(i).H_(e)}function jg(i,e){i.Aa.Ke(e),Ws(i).J_(e)}function Uh(i){i.Aa=new p0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Pa.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Ws(i).start(),i.da._a()}function jh(i){return $i(i)&&!Ws(i).F_()&&i.Pa.size>0}function $i(i){return we(i).Ta.size===0}function Bg(i){i.Aa=void 0}async function TT(i){i.da.set("Online")}async function wT(i){i.Pa.forEach((e,n)=>{zh(i,e)})}async function ST(i,e){Bg(i),jh(i)?(i.da.ca(e),Uh(i)):i.da.set("Unknown")}async function IT(i,e,n){if(i.da.set("Online"),e instanceof Ag&&e.state===2&&e.cause)try{await async function(l,c){const f=c.cause;for(const g of c.targetIds)l.Pa.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Pa.delete(g),l.Aa.removeTarget(g))}(i,e)}catch(s){ne(Ui,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yl(i,s)}else if(e instanceof Ll?i.Aa.Xe(e):e instanceof Ig?i.Aa.ot(e):i.Aa.nt(e),!n.isEqual(Te.min()))try{const s=await Mg(i.localStore);n.compareTo(s)>=0&&await function(c,f){const g=c.Aa.It(f);return g.targetChanges.forEach((v,E)=>{if(v.resumeToken.approximateByteSize()>0){const I=c.Pa.get(E);I&&c.Pa.set(E,I.withResumeToken(v.resumeToken,f))}}),g.targetMismatches.forEach((v,E)=>{const I=c.Pa.get(v);if(!I)return;c.Pa.set(v,I.withResumeToken(Ft.EMPTY_BYTE_STRING,I.snapshotVersion)),jg(c,v);const V=new Jr(I.target,v,E,I.sequenceNumber);zh(c,V)}),c.remoteSyncer.applyRemoteEvent(g)}(i,n)}catch(s){ne(Ui,"Failed to raise snapshot:",s),await Yl(i,s)}}async function Yl(i,e,n){if(!Gs(e))throw e;i.Ta.add(1),await la(i),i.da.set("Offline"),n||(n=()=>Mg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ne(Ui,"Retrying IndexedDB access"),await n(),i.Ta.delete(1),await uu(i)})}function bg(i,e){return e().catch(n=>Yl(i,n,e))}async function cu(i){const e=we(i),n=ai(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:Sh;for(;AT(e);)try{const l=await oT(e.localStore,s);if(l===null){e.ha.length===0&&n.N_();break}s=l.batchId,CT(e,l)}catch(l){await Yl(e,l)}$g(e)&&Hg(e)}function AT(i){return $i(i)&&i.ha.length<10}function CT(i,e){i.ha.push(e);const n=ai(i);n.M_()&&n.Y_&&n.Z_(e.mutations)}function $g(i){return $i(i)&&!ai(i).F_()&&i.ha.length>0}function Hg(i){ai(i).start()}async function RT(i){ai(i).ta()}async function PT(i){const e=ai(i);for(const n of i.ha)e.Z_(n.mutations)}async function kT(i,e,n){const s=i.ha.shift(),l=xh.from(s,e,n);await bg(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),await cu(i)}async function xT(i,e){e&&ai(i).Y_&&await async function(s,l){if(function(f){return f0(f)&&f!==G.ABORTED}(l.code)){const c=s.ha.shift();ai(s).O_(),await bg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await cu(s)}}(i,e),$g(i)&&Hg(i)}async function hm(i,e){const n=we(i);n.asyncQueue.verifyOperationInProgress(),ne(Ui,"RemoteStore received new credentials");const s=$i(n);n.Ta.add(3),await la(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await uu(n)}async function VT(i,e){const n=we(i);e?(n.Ta.delete(2),await uu(n)):e||(n.Ta.add(2),await la(n),n.da.set("Unknown"))}function Ws(i){return i.Ra||(i.Ra=function(n,s,l){const c=we(n);return c.ra(),new mT(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(i.datastore,i.asyncQueue,{e_:TT.bind(null,i),n_:wT.bind(null,i),i_:ST.bind(null,i),j_:IT.bind(null,i)}),i.Ia.push(async e=>{e?(i.Ra.O_(),jh(i)?Uh(i):i.da.set("Unknown")):(await i.Ra.stop(),Bg(i))})),i.Ra}function ai(i){return i.Va||(i.Va=function(n,s,l){const c=we(n);return c.ra(),new gT(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:RT.bind(null,i),i_:xT.bind(null,i),X_:PT.bind(null,i),ea:kT.bind(null,i)}),i.Ia.push(async e=>{e?(i.Va.O_(),await cu(i)):(await i.Va.stop(),i.ha.length>0&&(ne(Ui,`Stopping write stream with ${i.ha.length} pending writes`),i.ha=[]))})),i.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const f=Date.now()+s,g=new Bh(e,n,f,l,c);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bh(i,e){if(Ir("AsyncQueue",`${e}: ${i}`),Gs(i))return new pe(G.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{static emptySet(e){return new Ms(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=bo(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ms;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.ma=new it(me.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):ve(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class bs{constructor(e,n,s,l,c,f,g,v,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,l,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new bs(e,n,Ms.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class NT{constructor(){this.queries=dm(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const l=we(n),c=l.queries;l.queries=dm(),c.forEach((f,g)=>{for(const v of g.ya)v.onError(s)})})(this,new pe(G.ABORTED,"Firestore shutting down"))}}function dm(){return new Bi(i=>cg(i),ru)}async function OT(i,e){const n=we(i);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.wa()&&e.Sa()&&(s=2):(c=new DT,s=e.Sa()?0:1);try{switch(s){case 0:c.pa=await n.onListen(l,!0);break;case 1:c.pa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=bh(f,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,c),c.ya.push(e),e.Da(n.onlineState),c.pa&&e.va(c.pa)&&$h(n)}async function LT(i,e){const n=we(i),s=e.query;let l=3;const c=n.queries.get(s);if(c){const f=c.ya.indexOf(e);f>=0&&(c.ya.splice(f,1),c.ya.length===0?l=e.Sa()?0:1:!c.wa()&&e.Sa()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function MT(i,e){const n=we(i);let s=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const g of f.ya)g.va(l)&&(s=!0);f.pa=l}}s&&$h(n)}function FT(i,e,n){const s=we(i),l=s.queries.get(e);if(l)for(const c of l.ya)c.onError(n);s.queries.delete(e)}function $h(i){i.ba.forEach(e=>{e.next()})}var mh,pm;(pm=mh||(mh={})).Ca="default",pm.Cache="cache";class zT{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new bs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.key=e}}class Qg{constructor(e){this.key=e}}class UT{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=De(),this.mutatedKeys=De(),this.Ha=hg(e),this.Ja=new Ms(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new fm,l=n?n.Ja:this.Ja;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((I,V)=>{const D=l.get(I),j=iu(this.query,V)?V:null,Y=!!D&&this.mutatedKeys.has(D.key),J=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let $=!1;D&&j?D.data.isEqual(j.data)?Y!==J&&(s.track({type:3,doc:j}),$=!0):this.eu(D,j)||(s.track({type:2,doc:j}),$=!0,(v&&this.Ha(j,v)>0||E&&this.Ha(j,E)<0)&&(g=!0)):!D&&j?(s.track({type:0,doc:j}),$=!0):D&&!j&&(s.track({type:1,doc:D}),$=!0,(v||E)&&(g=!0)),$&&(j?(f=f.add(j),c=J?c.add(I):c.delete(I)):(f=f.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const I=this.query.limitType==="F"?f.last():f.first();f=f.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{Ja:f,Xa:s,Cs:g,mutatedKeys:c}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const f=e.Xa.ga();f.sort((I,V)=>function(j,Y){const J=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:$})}};return J(j)-J(Y)}(I.type,V.type)||this.Ha(I.doc,V.doc)),this.tu(s),l=l!=null&&l;const g=n&&!l?this.nu():[],v=this.ja.size===0&&this.current&&!l?1:0,E=v!==this.za;return this.za=v,f.length!==0||E?{snapshot:new bs(this.query,e.Ja,c,f,e.mutatedKeys,v===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:g}:{ru:g}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new fm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=De(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new Qg(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new qg(s))}),n}su(e){this.Ga=e.$s,this.ja=De();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return bs.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Hh="SyncEngine";class jT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class BT{constructor(e){this.key=e,this._u=!1}}class bT{constructor(e,n,s,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.au={},this.uu=new Bi(g=>cg(g),ru),this.cu=new Map,this.lu=new Set,this.hu=new it(me.comparator),this.Pu=new Map,this.Tu=new Nh,this.Iu={},this.Eu=new Map,this.du=Bs.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function $T(i,e,n=!0){const s=Jg(i);let l;const c=s.uu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.ou()):l=await Gg(s,e,n,!0),l}async function HT(i,e){const n=Jg(i);await Gg(n,e,!0,!1)}async function Gg(i,e,n,s){const l=await aT(i.localStore,tr(e)),c=l.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await qT(i,e,c,f==="current",l.resumeToken)),i.isPrimaryClient&&n&&Ug(i.remoteStore,l),g}async function qT(i,e,n,s,l){i.Ru=(V,D,j)=>async function(J,$,Se,ge){let Ee=$.view.Za(Se);Ee.Cs&&(Ee=await om(J.localStore,$.query,!1).then(({documents:k})=>$.view.Za(k,Ee)));const Ae=ge&&ge.targetChanges.get($.targetId),tt=ge&&ge.targetMismatches.get($.targetId)!=null,ke=$.view.applyChanges(Ee,J.isPrimaryClient,Ae,tt);return gm(J,$.targetId,ke.ru),ke.snapshot}(i,V,D,j);const c=await om(i.localStore,e,!0),f=new UT(e,c.$s),g=f.Za(c.documents),v=aa.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",l),E=f.applyChanges(g,i.isPrimaryClient,v);gm(i,n,E.ru);const I=new jT(e,n,f);return i.uu.set(e,I),i.cu.has(n)?i.cu.get(n).push(e):i.cu.set(n,[e]),E.snapshot}async function QT(i,e,n){const s=we(i),l=s.uu.get(e),c=s.cu.get(l.targetId);if(c.length>1)return s.cu.set(l.targetId,c.filter(f=>!ru(f,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await dh(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Fh(s.remoteStore,l.targetId),gh(s,l.targetId)}).catch(Qs)):(gh(s,l.targetId),await dh(s.localStore,l.targetId,!0))}async function GT(i,e){const n=we(i),s=n.uu.get(e),l=n.cu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Fh(n.remoteStore,s.targetId))}async function WT(i,e,n){const s=tw(i);try{const l=await function(f,g){const v=we(f),E=wt.now(),I=g.reduce((j,Y)=>j.add(Y.key),De());let V,D;return v.persistence.runTransaction("Locally write mutations","readwrite",j=>{let Y=Ar(),J=De();return v.Bs.getEntries(j,I).next($=>{Y=$,Y.forEach((Se,ge)=>{ge.isValidDocument()||(J=J.add(Se))})}).next(()=>v.localDocuments.getOverlayedDocuments(j,Y)).next($=>{V=$;const Se=[];for(const ge of g){const Ee=a0(ge,V.get(ge.key).overlayedDocument);Ee!=null&&Se.push(new bi(ge.key,Ee,rg(Ee.value.mapValue),wr.exists(!0)))}return v.mutationQueue.addMutationBatch(j,E,Se,g)}).next($=>{D=$;const Se=$.applyToLocalDocumentSet(V,J);return v.documentOverlayCache.saveOverlays(j,$.batchId,Se)})}).then(()=>({batchId:D.batchId,changes:dg(V)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(f,g,v){let E=f.Iu[f.currentUser.toKey()];E||(E=new it(Re)),E=E.insert(g,v),f.Iu[f.currentUser.toKey()]=E}(s,l.batchId,n),await ua(s,l.changes),await cu(s.remoteStore)}catch(l){const c=bh(l,"Failed to persist write");n.reject(c)}}async function Wg(i,e){const n=we(i);try{const s=await iT(n.localStore,e);e.targetChanges.forEach((l,c)=>{const f=n.Pu.get(c);f&&(He(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f._u=!0:l.modifiedDocuments.size>0?He(f._u,14607):l.removedDocuments.size>0&&(He(f._u,42227),f._u=!1))}),await ua(n,s,e)}catch(s){await Qs(s)}}function mm(i,e,n){const s=we(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.uu.forEach((c,f)=>{const g=f.view.Da(e);g.snapshot&&l.push(g.snapshot)}),function(f,g){const v=we(f);v.onlineState=g;let E=!1;v.queries.forEach((I,V)=>{for(const D of V.ya)D.Da(g)&&(E=!0)}),E&&$h(v)}(s.eventManager,e),l.length&&s.au.j_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KT(i,e,n){const s=we(i);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Pu.get(e),c=l&&l.key;if(c){let f=new it(me.comparator);f=f.insert(c,Ht.newNoDocument(c,Te.min()));const g=De().add(c),v=new au(Te.min(),new Map,new it(Re),f,g);await Wg(s,v),s.hu=s.hu.remove(c),s.Pu.delete(e),qh(s)}else await dh(s.localStore,e,!1).then(()=>gh(s,e,n)).catch(Qs)}async function YT(i,e){const n=we(i),s=e.batch.batchId;try{const l=await rT(n.localStore,e);Yg(n,s,null),Kg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ua(n,l)}catch(l){await Qs(l)}}async function XT(i,e,n){const s=we(i);try{const l=await function(f,g){const v=we(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let I;return v.mutationQueue.lookupMutationBatch(E,g).next(V=>(He(V!==null,37113),I=V.keys(),v.mutationQueue.removeMutationBatch(E,V))).next(()=>v.mutationQueue.performConsistencyCheck(E)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(E,I,g)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,I)).next(()=>v.localDocuments.getDocuments(E,I))})}(s.localStore,e);Yg(s,e,n),Kg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ua(s,l)}catch(l){await Qs(l)}}function Kg(i,e){(i.Eu.get(e)||[]).forEach(n=>{n.resolve()}),i.Eu.delete(e)}function Yg(i,e,n){const s=we(i);let l=s.Iu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Iu[s.currentUser.toKey()]=l}}function gh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.cu.get(e))i.uu.delete(s),n&&i.au.Vu(s,n);i.cu.delete(e),i.isPrimaryClient&&i.Tu.Hr(e).forEach(s=>{i.Tu.containsKey(s)||Xg(i,s)})}function Xg(i,e){i.lu.delete(e.path.canonicalString());const n=i.hu.get(e);n!==null&&(Fh(i.remoteStore,n),i.hu=i.hu.remove(e),i.Pu.delete(n),qh(i))}function gm(i,e,n){for(const s of n)s instanceof qg?(i.Tu.addReference(s.key,e),JT(i,s)):s instanceof Qg?(ne(Hh,"Document no longer in limbo: "+s.key),i.Tu.removeReference(s.key,e),i.Tu.containsKey(s.key)||Xg(i,s.key)):ve(19791,{mu:s})}function JT(i,e){const n=e.key,s=n.path.canonicalString();i.hu.get(n)||i.lu.has(s)||(ne(Hh,"New document in limbo: "+n),i.lu.add(s),qh(i))}function qh(i){for(;i.lu.size>0&&i.hu.size<i.maxConcurrentLimboResolutions;){const e=i.lu.values().next().value;i.lu.delete(e);const n=new me(at.fromString(e)),s=i.du.next();i.Pu.set(s,new BT(n)),i.hu=i.hu.insert(n,s),Ug(i.remoteStore,new Jr(tr(Ph(n.path)),s,"TargetPurposeLimboResolution",Zl.le))}}async function ua(i,e,n){const s=we(i),l=[],c=[],f=[];s.uu.isEmpty()||(s.uu.forEach((g,v)=>{f.push(s.Ru(v,e,n).then(E=>{var I;if((E||n)&&s.isPrimaryClient){const V=E?!E.fromCache:(I=n==null?void 0:n.targetChanges.get(v.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(v.targetId,V?"current":"not-current")}if(E){l.push(E);const V=Lh.Rs(v.targetId,E);c.push(V)}}))}),await Promise.all(f),s.au.j_(l),await async function(v,E){const I=we(v);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",V=>b.forEach(E,D=>b.forEach(D.ds,j=>I.persistence.referenceDelegate.addReference(V,D.targetId,j)).next(()=>b.forEach(D.As,j=>I.persistence.referenceDelegate.removeReference(V,D.targetId,j)))))}catch(V){if(!Gs(V))throw V;ne(Mh,"Failed to update sequence numbers: "+V)}for(const V of E){const D=V.targetId;if(!V.fromCache){const j=I.xs.get(D),Y=j.snapshotVersion,J=j.withLastLimboFreeSnapshotVersion(Y);I.xs=I.xs.insert(D,J)}}}(s.localStore,c))}async function ZT(i,e){const n=we(i);if(!n.currentUser.isEqual(e)){ne(Hh,"User change. New user:",e.toKey());const s=await Lg(n.localStore,e);n.currentUser=e,function(c,f){c.Eu.forEach(g=>{g.forEach(v=>{v.reject(new pe(G.CANCELLED,f))})}),c.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ua(n,s.ks)}}function ew(i,e){const n=we(i),s=n.Pu.get(e);if(s&&s._u)return De().add(s.key);{let l=De();const c=n.cu.get(e);if(!c)return l;for(const f of c){const g=n.uu.get(f);l=l.unionWith(g.view.Ya)}return l}}function Jg(i){const e=we(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ew.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KT.bind(null,e),e.au.j_=MT.bind(null,e.eventManager),e.au.Vu=FT.bind(null,e.eventManager),e}function tw(i){const e=we(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XT.bind(null,e),e}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lu(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return nT(this.persistence,new Z0,e.initialUser,this.serializer)}yu(e){return new Og(Oh.fi,this.serializer)}pu(e){return new uT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class nw extends Xl{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){He(this.persistence.referenceDelegate instanceof Kl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new z0(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Og(s=>Kl.fi(s,n),this.serializer)}}class yh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZT.bind(null,this.syncEngine),await VT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NT}()}createDatastore(e){const n=lu(e.databaseInfo.databaseId),s=function(c){return new pT(c)}(e.databaseInfo);return function(c,f,g,v){return new vT(c,f,g,v)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,l,c,f,g){return new ET(s,l,c,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>mm(this.syncEngine,n,0),function(){return um.C()?new um:new cT}())}createSyncEngine(e,n){return function(l,c,f,g,v,E,I){const V=new bT(l,c,f,g,v,E);return I&&(V.Au=!0),V}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const c=we(l);ne(Ui,"RemoteStore shutting down."),c.Ta.add(5),await la(c),c.Ea.shutdown(),c.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}yh.provider={build:()=>new yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="FirestoreClient";class iw{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=$t.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{ne(li,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ne(li,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=bh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Kc(i,e){i.asyncQueue.verifyOperationInProgress(),ne(li,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async l=>{s.isEqual(l)||(await Lg(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ym(i,e){i.asyncQueue.verifyOperationInProgress();const n=await sw(i);ne(li,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>hm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,l)=>hm(e.remoteStore,l)),i._onlineComponents=e}async function sw(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ne(li,"Using user provided OfflineComponentProvider");try{await Kc(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===G.FAILED_PRECONDITION||l.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await Kc(i,new Xl)}}else ne(li,"Using default OfflineComponentProvider"),await Kc(i,new nw(void 0));return i._offlineComponents}async function Zg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ne(li,"Using user provided OnlineComponentProvider"),await ym(i,i._uninitializedComponentsProvider._online)):(ne(li,"Using default OnlineComponentProvider"),await ym(i,new yh))),i._onlineComponents}function ow(i){return Zg(i).then(e=>e.syncEngine)}async function aw(i){const e=await Zg(i),n=e.eventManager;return n.onListen=$T.bind(null,e.syncEngine),n.onUnlisten=QT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GT.bind(null,e.syncEngine),n}function lw(i,e,n={}){const s=new ni;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,g,v,E){const I=new rw({next:D=>{I.Cu(),f.enqueueAndForget(()=>LT(c,V));const j=D.docs.has(g);!j&&D.fromCache?E.reject(new pe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&D.fromCache&&v&&v.source==="server"?E.reject(new pe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(D)},error:D=>E.reject(D)}),V=new zT(Ph(g.path),I,{includeMetadataChanges:!0,La:!0});return OT(c,V)}(await aw(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(i,e,n){if(!n)throw new pe(G.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cw(i,e,n,s){if(e===!0&&s===!0)throw new pe(G.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function _m(i){if(!me.isDocumentKey(i))throw new pe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Qh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function ia(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qh(i);throw new pe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="firestore.googleapis.com",Em=!0;class Tm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ty,this.ssl=Em}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Em;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ng;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M0)throw new pe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ey((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new hE;switch(s.type){case"firstParty":return new mE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=vm.get(n);s&&(ne("ComponentProvider","Removing Datastore"),vm.delete(n),s.terminate())}(this),Promise.resolve()}}function hw(i,e,n,s={}){var l;i=ia(i,Gh);const c=Eh(e),f=i._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),v=`${e}:${n}`;c&&(zv(`https://${v}`),bv("Firestore",!0)),f.host!==ty&&f.host!==v&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E=Object.assign(Object.assign({},f),{host:v,ssl:c,emulatorOptions:s});if(!zl(E,g)&&(i._setSettings(E),s.mockUserToken)){let I,V;if(typeof s.mockUserToken=="string")I=s.mockUserToken,V=$t.MOCK_USER;else{I=Uv(s.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new pe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");V=new $t(D)}i._authCredentials=new fE(new qm(I,V))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wh(this.firestore,e,this._query)}}class In{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class sa extends Wh{constructor(e,n,s){super(e,n,Ph(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new me(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function Yc(i,e,...n){if(i=Ul(i),arguments.length===1&&(e=Gm.newId()),uw("doc","path",e),i instanceof Gh){const s=at.fromString(e,...n);return _m(s),new In(i,null,new me(s))}{if(!(i instanceof In||i instanceof sa))throw new pe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return _m(s),new In(i.firestore,i instanceof sa?i.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="AsyncQueue";class Sm{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Fg(this,"async_queue_retry"),this.ec=()=>{const s=Wc();s&&ne(wm,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Wc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Wc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new ni;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Gs(e))throw e;ne(wm,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,Ir("INTERNAL UNHANDLED ERROR: ",Im(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const l=Bh.createAndSchedule(this,e,n,s,c=>this.oc(c));return this.Hu.push(l),l}nc(){this.Ju&&ve(47125,{_c:Im(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Im(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Kh extends Gh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new Sm,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sm(e),this._firestoreClient=void 0,await e}}}function fw(i,e){const n=typeof i=="object"?i:J_(),s=typeof i=="string"?i:$l,l=G_(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Mv("firestore");c&&hw(l,...c)}return l}function ny(i){if(i._terminated)throw new pe(G.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||dw(i),i._firestoreClient}function dw(i){var e,n,s;const l=i._freezeSettings(),c=function(g,v,E,I){return new xE(g,v,E,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,ey(I.experimentalLongPollingOptions),I.useFetchStreams,I.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,l);i._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),i._firestoreClient=new iw(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Ft.fromBase64String(e))}catch(n){throw new pe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $s(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=/^__.*__$/;class mw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}function ry(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{hc:i})}}class ef{constructor(e,n,s,l,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Pc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new ef(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.Tc({path:s,Ec:!1});return l.dc(e),l}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.Tc({path:s,Ec:!1});return l.Pc(),l}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Jl(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(ry(this.hc)&&pw.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class gw{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||lu(e)}gc(e,n,s,l=!1){return new ef({hc:e,methodName:n,fc:s,path:Mt.emptyPath(),Ec:!1,mc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yw(i){const e=i._freezeSettings(),n=lu(i._databaseId);return new gw(i._databaseId,!!e.ignoreUndefinedProperties,n)}function vw(i,e,n,s,l,c={}){const f=i.gc(c.merge||c.mergeFields?2:0,e,n,l);ay("Data must be an object, but it was:",f,s);const g=sy(s,f);let v,E;if(c.merge)v=new Bn(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const I=[];for(const V of c.mergeFields){const D=_w(e,V,n);if(!f.contains(D))throw new pe(G.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);Tw(I,D)||I.push(D)}v=new Bn(I),E=f.fieldTransforms.filter(V=>v.covers(V.field))}else v=null,E=f.fieldTransforms;return new mw(new Sn(g),v,E)}class tf extends Xh{_toFieldTransform(e){return new r0(e.path,new ta)}isEqual(e){return e instanceof tf}}function iy(i,e){if(oy(i=Ul(i)))return ay("Unsupported field value:",e,i),sy(i,e);if(i instanceof Xh)return function(s,l){if(!ry(l.hc))throw l.Vc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Vc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,l){const c=[];let f=0;for(const g of s){let v=iy(g,l.Rc(f));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,l){if((s=Ul(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return e0(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=wt.fromDate(s);return{timestampValue:Wl(l.serializer,c)}}if(s instanceof wt){const c=new wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wl(l.serializer,c)}}if(s instanceof Jh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof $s)return{bytesValue:Cg(l.serializer,s._byteString)};if(s instanceof In){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Vc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Dh(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Zh)return function(f,g){return{mapValue:{fields:{[tg]:{stringValue:ng},[Hl]:{arrayValue:{values:f.toArray().map(E=>{if(typeof E!="number")throw g.Vc("VectorValues must only contain numeric values.");return kh(g.serializer,E)})}}}}}}(s,l);throw l.Vc(`Unsupported field value: ${Qh(s)}`)}(i,e)}function sy(i,e){const n={};return Km(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(i,(s,l)=>{const c=iy(l,e.Ic(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function oy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof wt||i instanceof Jh||i instanceof $s||i instanceof In||i instanceof Xh||i instanceof Zh)}function ay(i,e,n){if(!oy(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=Qh(n);throw s==="an object"?e.Vc(i+" a custom object"):e.Vc(i+" "+s)}}function _w(i,e,n){if((e=Ul(e))instanceof Yh)return e._internalPath;if(typeof e=="string")return ly(i,e);throw Jl("Field path arguments must be of type string or ",i,!1,void 0,n)}const Ew=new RegExp("[~\\*/\\[\\]]");function ly(i,e,n){if(e.search(Ew)>=0)throw Jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Yh(...e.split("."))._internalPath}catch{throw Jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Jl(i,e,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||f)&&(v+=" (found",c&&(v+=` in field ${s}`),f&&(v+=` in document ${l}`),v+=")"),new pe(G.INVALID_ARGUMENT,g+i+v)}function Tw(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ww(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ww extends uy{data(){return super.data()}}function cy(i,e){return typeof e=="string"?ly(i,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}class Sw{convertValue(e,n="none"){switch(oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ji(e,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,l;const c=(l=(s=(n=e.fields)===null||n===void 0?void 0:n[Hl].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(f=>ct(f.doubleValue));return new Zh(c)}convertGeoPoint(e){return new Jh(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=tu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=ii(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=at.fromString(e);He(Dg(s),9688,{name:e});const l=new Zo(s.get(1),s.get(3)),c=new me(s.popFirst(5));return l.isEqual(n)||Ir(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hy extends uy{constructor(e,n,s,l,c,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(cy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Cw extends hy{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(i){i=ia(i,In);const e=ia(i.firestore,Kh);return lw(ny(e),i._key).then(n=>xw(e,i,n))}class Pw extends Sw{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}function Am(i,e,n){i=ia(i,In);const s=ia(i.firestore,Kh),l=Iw(i.converter,e);return kw(s,[vw(yw(s),"setDoc",i._key,l,i.converter!==null,n).toMutation(i._key,wr.none())])}function kw(i,e){return function(s,l){const c=new ni;return s.asyncQueue.enqueueAndForget(async()=>WT(await ow(s),l,c)),c.promise}(ny(i),e)}function xw(i,e,n){const s=n.docs.get(e._key),l=new Pw(i);return new hy(i,l,e._key,s,new Aw(n.hasPendingWrites,n.fromCache),e.converter)}function Cm(){return new tf("serverTimestamp")}(function(e,n=!0){(function(l){qs=l})(X_),Bl(new Ko("firestore",(s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new Kh(new dE(s.getProvider("auth-internal")),new gE(f,s.getProvider("app-check-internal")),function(E,I){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new pe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(E.options.projectId,I)}(f,l),f);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Ls(xp,Vp,e),Ls(xp,Vp,"esm2017")})();const Vw={apiKey:"AIzaSyCYJvEXn7Ku8CjibOKqKQKTPoc-dcJ6jVg",authDomain:"manuten-uai.firebaseapp.com",projectId:"manuten-uai",storageBucket:"manuten-uai.firebasestorage.app",messagingSenderId:"13564728422",appId:"1:13564728422:web:e1553008bb03ef5f330400",measurementId:"G-Z6MH267PRL"};let Ml;try{console.log("Inicializando Firebase...");const i=Lm(Vw);console.log("Firebase inicializado com sucesso!"),console.log("Conectando ao Firestore..."),Ml=fw(i),console.log("Conexo com Firestore estabelecida!")}catch(i){throw console.error("Erro ao inicializar Firebase:",i),console.error("Detalhes do erro:",JSON.stringify(i)),i}class Dw{async testConnection(){try{console.log("Testando conexo com o Firestore...");const e=Yc(Ml,"processStatus","test-connection");return await Am(e,{timestamp:Cm(),test:!0}),console.log("Conexo com o Firestore estabelecida com sucesso!"),!0}catch(e){return console.error("Erro ao testar conexo com o Firestore:",e),console.error("Detalhes do erro:",JSON.stringify(e)),!1}}async saveProcessStatus(e){try{console.log("Iniciando salvamento no Firestore...");const n=Yc(Ml,"processStatus","current");return console.log("Dados a serem salvos:",e),await Am(n,{status:e,updatedAt:Cm()}),console.log("Dados salvos com sucesso no Firestore!"),!0}catch(n){return console.error("Erro ao salvar status no Firestore:",n),console.error("Detalhes do erro:",JSON.stringify(n)),!1}}async getProcessStatus(){try{console.log("Tentando obter dados do Firestore...");const e=Yc(Ml,"processStatus","current"),n=await Rw(e);return n.exists()?(console.log("Documento encontrado no Firestore!"),console.log("Dados recuperados:",n.data()),n.data().status):(console.log("Nenhum documento encontrado no Firestore!"),null)}catch(e){return console.error("Erro ao obter status do Firestore:",e),console.error("Detalhes do erro:",JSON.stringify(e)),null}}async processImage(e){try{return e.length>9e5&&console.warn("Imagem muito grande, pode exceder o limite do Firestore"),e}catch(n){return console.error("Erro ao processar a imagem:",n),null}}}const xl=new Dw;function Nw(){const[i]=et.useState({cip:{name:"CIP",steps:[{title:"Incio - gua Estril",description:"",hasTimer:!0,timerDuration:60,position:1,options:[{type:"checkbox",label:"Esperar Esvaziamento",required:!0}]},{title:"Configurar Painel de rota para CIP",description:"",hasTimer:!1,allowImages:!0,position:2},{title:"Tirar o alarme de memria no painel",description:"",hasTimer:!1,position:3},{title:"Aguardar Presso de Vapor",description:"Confira na Caldeira a Presso ela deve chegar a 8.0 kgf",hasTimer:!1,position:4},{title:"Definir Tipo de CIP",description:"",hasTimer:!1,position:5,options:[{type:"radio",name:"cip-type",label:"Soda+cido",required:!0},{type:"radio",name:"cip-type",label:"Soda",required:!0},{type:"radio",name:"cip-type",label:"Soda+Soda",required:!0},{type:"radio",name:"cip-type",label:"Soda+Soda+cido",required:!0},{type:"radio",name:"cip-type",label:"Enxague",required:!0}]},{title:"Enxague Inicial",description:"",hasTimer:!1,position:6,options:[{type:"checkbox",label:"Ativar CIP da linha de retorno para abrir a valvula 15 e limpar a linha",required:!0}]},{title:"Tirar O Leite da Linha",description:"",hasTimer:!1,position:7,options:[{type:"checkbox",label:"Na Plataforma Direcionar a Agua para Empurrar p leite",required:!0},{type:"checkbox",label:"Ligar o registro de agua para empurrar",required:!0},{type:"checkbox",label:"Direcionar o retorno do CIP",required:!0}]},{title:"Dosagem de soda (Aquecimento 1)",description:"",hasTimer:!0,timerDuration:60,position:8},{title:"Finalizar CIP da Linha",description:"",hasTimer:!1,position:9},{title:"TSL-71",description:"Aguardar at que a temperatura chegue a 120C",hasTimer:!1,position:10},{title:"Dosagem de soda (Aquecimento 2)",description:"",hasTimer:!1,position:11,options:[{type:"checkbox",label:"Esperar dosagem TSL-71 = 80C",required:!0}]},{title:"Torre de Resfriamento",description:"Ao entrar Soda Fria desligue a Torre",hasTimer:!1,position:12},{title:"Limpeza Com soda",description:"",hasTimer:!0,timerDuration:60,position:13},{title:"Limpeza com cido",description:"",hasTimer:!0,timerDuration:60,position:14},{title:"Esvaziando Homogeneizador",description:"",hasTimer:!0,timerDuration:60,position:15},{title:"Enxague Final",description:"",hasTimer:!0,timerDuration:60,position:16},{title:"Parado",description:"",hasTimer:!1,position:17},{title:"Conferir vazamentos e limpeza do retardador",description:"",hasTimer:!1,position:18},{title:"Conferir os Amortecedores do Homogeneizador",description:"",hasTimer:!1,position:19},{title:"CIP Concludo",description:"O processo de CIP foi concludo com sucesso.",hasTimer:!1,isFinal:!0,position:20}]},aquecimento:{name:"Aquecimento",steps:[{title:"Mudar a Rota para Produo",description:"",hasTimer:!1,position:1},{title:"Resetar Alarme de Memria",description:"",hasTimer:!1,position:2},{title:"Esterilizao",description:"",hasTimer:!1,position:3},{title:"Enxague",description:"",hasTimer:!1,position:4},{title:"Ligar a Torre",description:"",hasTimer:!1,position:5,options:[{type:"checkbox",label:"Torre Ligada",required:!0}]},{title:"Aquecimento",description:"",hasTimer:!1,position:6},{title:"Ligar Registro do Tanque de Produto",description:"",hasTimer:!1,position:7,options:[{type:"checkbox",label:"Esperar chegar at a placa",required:!0}]},{title:"Esterilizao",description:"Processo de esterilizao concludo.",hasTimer:!1,isFinal:!0,position:8}]},producao:{name:"Produo",steps:[{title:"Em desenvolvimento",description:"O fluxo de Produo ainda est em desenvolvimento.",hasTimer:!1,isFinal:!0,position:1}]}}),[e,n]=et.useState(null),[s,l]=et.useState(0),[c,f]=et.useState({cip:{completed:!1,steps:[]},aquecimento:{completed:!1,steps:[]},producao:{completed:!1,steps:[]}}),[g,v]=et.useState(null),[E,I]=et.useState(0),[V,D]=et.useState(!1),[j,Y]=et.useState(!1),[J,$]=et.useState(""),[Se,ge]=et.useState(""),[Ee,Ae]=et.useState(!1),[tt,ke]=et.useState(!1),[k,w]=et.useState(""),[A,R]=et.useState(!1),[x,O]=et.useState(0),[S,Le]=et.useState(null),[mt,It]=et.useState(null),be=et.useRef(null),W=et.useRef(null),he=et.useRef(null);et.useEffect(()=>{const se={};for(const ye in i)se[ye]={completed:!1,steps:i[ye].steps.map(Ne=>({status:"pending",observation:"",timerDuration:Ne.timerDuration||null,hasTimer:Ne.hasTimer||null,images:[],position:Ne.position||0}))};const ce=()=>{try{console.log("Carregando dados do localStorage...");const ye=localStorage.getItem("processStatus");if(ye){const Ne=JSON.parse(ye);console.log("Dados carregados do localStorage:",Ne),f(Ne)}else console.log("Nenhum dado encontrado no localStorage. Usando estado inicial."),f(se)}catch(ye){console.error("Erro ao carregar dados do localStorage:",ye),f(se)}};(async()=>{try{if(console.log("Verificando conexo com o Firestore..."),!await xl.testConnection()){console.warn("No foi possvel estabelecer conexo com o Firestore. Usando localStorage como fallback."),ce();return}console.log("Tentando carregar dados do Firebase...");const Ne=await xl.getProcessStatus();if(Ne){console.log("Dados carregados do Firebase com sucesso:",Ne),f(Ne);return}else console.log("Nenhum dado encontrado no Firebase. Tentando localStorage..."),ce()}catch(ye){console.error("Erro ao carregar dados do Firebase:",ye),console.error("Detalhes do erro:",JSON.stringify(ye)),ce()}})();try{const ye=document.createElement("audio");ye.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YWoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZSA0PVqzn77BdGAg+l9zzx3QpBSl+zPDaizsIGGS57OihUBELTKXh8bpmHgU2jdXzzn0vBSF1xe/glEILElyx6OyrWBUIQ5zd8sFuJAUuhM/z1YU2Bhxqvu7mnEoODlOq5O+zYBoGPJTa88p3KwUme8rx3I4+CRZiturqpVITC0mi4PK8aR8GM4nU8tGAMQYfcsLu45ZFDBFYr+ftrVoXCECY3PLEcSYELIHO8diJOQcZaLvt559NEAxPqOPwtmMcBjiP1/PMeSwFJHfH8N2RQAoUXrTp66hVFAlGnt/yvmwhBTCG0fPTgjQGHW/A7eSaRw0PVqzl77BeGQc+mN3zx3QpBSl+zPDaizsIGGS57OihUBELTKXh8bpmHgU1jdT0z30vBSJ0xe/glEILElyx6OyrWRUIRJve8sFuJAUug8/z1oU2Bhxqvu7mnEoPDVOq5O+zYRsGPJXb88p3KwUme8rx3I4+CRVht+rqpVMSC0mh4PK8aiAFM4nU8tGAMQYfccPu45ZFDBFYr+ftrVwWCECZ3fLEcSYELIHO8diJOQcZZ7zs559NEAxPpuPxtmQcBjiP1/PMeSwFJHfH8N2RQAoUXrTp66hWFAlGnt/yvmwhBTCG0fPTgzQGHW/A7eSaSA0PVqvm77BeGQc+mN3zx3QpBSl9y/HaizsIGGS57OihUBELTKXh8bpmHgU1jdT0z30vBSJ0xe/glEILElyx6OyrWRUIRJzd8sFuJAUug8/z1oY2Bhxqvu7mnEoPDVOq5O+zYRsGO5Tb88p3KwUmfMrx3I4+CRVht+rqpVMSC0mh4PK8aiAFM4nU8tGAMQYfccPu45ZFDBFYr+ftrVwXCECZ3fLEcSYELIHO8diJOQcZZ7zs559NEAxPpuPxtmQcBjiP1/PMeSwFJHfH8N2RQAoUXrTp66hWFAlGnt/yvmwhBTCG0fPTgzQGHW/A7eSaSA0PVqvm77BeGQc+mN3zx3QpBSl9y/HaizsIGGS57OihUBELTKXh8bpmHgU1jdT0z30vBSJ0xe/glEILElyx6OyrWRUIRJzd8sFuJAUug8/z1oY2Bhxqvu7mnEoPDVOq5O+zYRsGO5Tb88p3KwUmfMrx3I4+CRVht+rqpVMSC0mh4PK8aiAFM4nU8tGAMQYfccPu45ZFDBFYr+ftrVwXCECZ3fLEcSYELIHO8diJOQcZZ7zs559NEAxPpuPxtmQcBjiP1/PMeSwFJHfH8N2RQAoUXrTp66hWFAlGnt/yvmwhBTCG0fPTgzQGHW/A7eSaSA0PVqvm77BeGQc+mN3zx3QpBSl9y/HaizsIGGS57OihUBELTKXh8bpmHgU1jdT0z30vBSJ0xe/glEILElyx6OyrWRUIRJzd8sFuJAUug8/z1oY2Bhxqvu7mnEoPDVOq5O+zYRsGO5Tb88p3KwUmfMrx3I4+CRVht+rqpVMSC0mh4PK8aiAFM4nU8tGAMQYfccPu45ZFDBFYr+ftrVwXCECZ3fLEcSYELIHO8diJOQcZZ7zs559NEAxPpuPxtmQcBjiP1/PMeSwFJHfH8N2RQAoUXrTp66hWFAlGnt/yvmwhBTCG0fPTgzQGHW/A7eSaSA0PVqvm77BeGQc+mN3zx3QpBSl9y/HaizsIGGS57OihUBELTKXh8bpmHgU1jdT0z30vBSJ0xe/glEILElyx6OyrWRUIRJzd8sFuJAUug8/z1oY2Bhxqvu7mnEoPDVOq5O+zYRsGO5Tb88p3KwUmfMrx3I4+CRVht+rqpVMSC0mh4PK8aiAFM4nU8tGAMQYfccPu45ZFDBFYr+ftrVwXCECZ3fLEcSYELIHO8diJOQcZZ7zs559NEAxPpuPxtmQcBjiP1/PMeSwFJHfH8N2RQAoUXrTp66hWFA==",ye.loop=!0,W.current=ye}catch(ye){console.error("Erro ao criar elemento de udio:",ye)}const xe=setInterval(()=>{e&&he.current&&he.current.value!==""&&N()},2e3);return It(xe),()=>{g&&clearInterval(g),mt&&clearInterval(mt),W.current&&W.current.pause()}},[i]),et.useEffect(()=>{try{localStorage.setItem("processStatus",JSON.stringify(c)),ee()}catch(se){console.error("Erro ao salvar dados no localStorage:",se)}},[c]),et.useEffect(()=>{if(e&&c[e].steps.length>s){$(c[e].steps[s].observation||"");const se=c[e].steps[s].images;se&&se.length>0?Le(se[0]):Le(null)}},[e,s,c]);const ee=async()=>{try{if(console.log("Tentando salvar dados no Firebase..."),console.log("Estado atual:",c),!c){console.error("Nenhum dado para salvar!");return}console.log("Chamando firebaseService.saveProcessStatus..."),await xl.saveProcessStatus(c)?console.log("Dados salvos com sucesso no Firebase"):console.error("Falha ao salvar dados no Firebase")}catch(se){console.error("Erro ao salvar dados no servidor:",se),console.error("Detalhes do erro:",JSON.stringify(se))}},N=()=>{e&&f(se=>{const ce={...se};return(!ce[e].steps||ce[e].steps.length!==i[e].steps.length)&&(ce[e].steps=i[e].steps.map(ae=>({status:"pending",observation:"",timerDuration:ae.timerDuration||null,hasTimer:ae.hasTimer||null,images:[],position:ae.position||0}))),ce[e].steps[s].observation=J,ce})},B=se=>{if(n(se),l(0),c[se].steps.length>0){$(c[se].steps[0].observation||"");const ce=c[se].steps[0].images;ce&&ce.length>0?Le(ce[0]):Le(null)}else $(""),Le(null)},ue=()=>{if(!e)return;const se=i[e].steps[s];if(se.hasTimer&&se.timerDuration){I(se.timerDuration);const ce=setInterval(()=>{I(ae=>ae<=1?(clearInterval(ce),v(null),R(!0),W.current&&(W.current.play().catch(xe=>console.error("Erro ao tocar udio:",xe)),"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200])),0):ae-1)},1e3);v(ce)}},Ie=()=>{var ce;if(!e)return!1;const se=i[e].steps[s];if(se.options&&se.options.length>0){const ae=document.querySelectorAll('input[type="checkbox"]');for(let Ne=0;Ne<ae.length;Ne++){const xt=ae[Ne];if(!xt.checked)return w(`Voc deve marcar "${(ce=xt.nextElementSibling)==null?void 0:ce.textContent}"`),ke(!0),!1}const xe={},ye=document.querySelectorAll('input[type="radio"]');for(let Ne=0;Ne<ye.length;Ne++){const xt=ye[Ne];xt.name&&(xe[xt.name]=xe[xt.name]||xt.checked)}for(const Ne in xe)if(!xe[Ne])return w("Voc deve selecionar uma das opes"),ke(!0),!1}return!0},Ce=()=>{if(!e||(N(),!Ie()))return;f(ce=>{const ae={...ce};return(!ae[e].steps||ae[e].steps.length!==i[e].steps.length)&&(ae[e].steps=i[e].steps.map(xe=>({status:"pending",observation:"",timerDuration:xe.timerDuration||null,hasTimer:xe.hasTimer||null,images:[],position:xe.position||0}))),ae[e].steps[s].status="completed",S&&(ae[e].steps[s].images=[...ae[e].steps[s].images,S]),ae}),g&&(clearInterval(g),v(null)),W.current&&(W.current.pause(),W.current.currentTime=0);const se=i[e];if(s===se.steps.length-1)f(ce=>{const ae={...ce};return ae[e].completed=!0,ae}),Me("Processo concludo com sucesso!");else{l(ae=>ae+1);const ce=s+1;if(c[e].steps.length>ce){$(c[e].steps[ce].observation||"");const ae=c[e].steps[ce].images;ae&&ae.length>0?Le(ae[0]):Le(null)}else $(""),Le(null)}R(!1)},Ve=()=>{e&&window.confirm("Tem certeza que deseja resetar este processo? Todos os dados sero perdidos.")&&(f(se=>{const ce={...se};return ce[e].completed=!1,ce[e].steps=i[e].steps.map(ae=>({status:"pending",observation:"",timerDuration:ae.timerDuration||null,hasTimer:ae.hasTimer||null,images:[],position:ae.position||0})),ce}),l(0),$(""),Le(null),g&&(clearInterval(g),v(null)),W.current&&(W.current.pause(),W.current.currentTime=0),R(!1),Me("Processo resetado com sucesso!"))},Me=se=>{ge(se),Ae(!0),setTimeout(()=>{Ae(!1)},3e3)},je=()=>{ke(!1)},Qe=()=>{R(!1),W.current&&(W.current.pause(),W.current.currentTime=0)},ht=async se=>{if(!e||!se.target.files||se.target.files.length===0)return;const ce=se.target.files;se.target.value="",Array.from(ce).forEach(async ae=>{const xe=new FileReader;xe.onloadend=async()=>{const ye=xe.result;try{const Ne=await xl.processImage(ye);f(xt=>{const st={...xt};(!st[e].steps||st[e].steps.length!==i[e].steps.length)&&(st[e].steps=i[e].steps.map(or=>({status:"pending",observation:"",timerDuration:or.timerDuration||null,hasTimer:or.hasTimer||null,images:[],position:or.position||0})));const sn=Ne||ye;return st[e].steps[s].images.includes(sn)||(st[e].steps[s].images=[sn,...st[e].steps[s].images]),st}),Le(Ne||ye)}catch(Ne){console.error("Erro ao fazer upload da imagem:",Ne),f(xt=>{const st={...xt};return(!st[e].steps||st[e].steps.length!==i[e].steps.length)&&(st[e].steps=i[e].steps.map(sn=>({status:"pending",observation:"",timerDuration:sn.timerDuration||null,hasTimer:sn.hasTimer||null,images:[],position:sn.position||0}))),st[e].steps[s].images.includes(ye)||(st[e].steps[s].images=[ye,...st[e].steps[s].images]),st}),Le(ye)}},xe.readAsDataURL(ae)})},An=se=>{e&&f(ce=>{const ae={...ce},xe=[...ae[e].steps[s].images];return xe.splice(se,1),ae[e].steps[s].images=xe,S===ae[e].steps[s].images[se]&&Le(""),ae})},Cr=()=>{be.current&&be.current.click()},bn=()=>{if(e){if(x>0){const se=i[e].steps.findIndex(ce=>ce.position===x);if(se>=0){const ce=i[e].steps[s].position||0,ae=[...i[e].steps];ae[s].position=x,ae[se].position=ce,ae.sort((xe,ye)=>(xe.position||0)-(ye.position||0)),l(x-1)}}Y(!1),O(0)}},sr=()=>{if(!e)return X.jsx("div",{className:"step-content",children:X.jsx("p",{children:"Por favor, selecione uma das opes acima para iniciar o processo."})});const se=i[e],ce=se.steps[s];if(!c[e].steps||c[e].steps.length!==se.steps.length)return X.jsx("div",{className:"step-content",children:X.jsx("p",{children:"Carregando..."})});const ae=c[e].steps[s];return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"step-content",children:[ce.description&&X.jsx("p",{children:ce.description}),ce.options&&ce.options.length>0&&X.jsx("div",{children:ce.options.map((xe,ye)=>X.jsx("div",{className:"checkbox-option",children:xe.type==="checkbox"?X.jsxs(X.Fragment,{children:[X.jsx("input",{type:"checkbox",id:`option-${ye}`,"data-required":"true"}),X.jsx("label",{htmlFor:`option-${ye}`,children:xe.label})]}):X.jsxs(X.Fragment,{children:[X.jsx("input",{type:"radio",name:xe.name,id:`option-${ye}`}),X.jsx("label",{htmlFor:`option-${ye}`,children:xe.label})]})},ye))}),ae&&ae.images&&ae.images.length>0&&X.jsx("div",{className:"image-gallery",children:ae.images.map((xe,ye)=>X.jsx("div",{className:"image-container",style:{width:`${Math.max(100/Math.min(ae.images.length,4),25)}%`,padding:"5px"},children:X.jsxs("div",{className:"image-preview",children:[X.jsx("img",{src:xe,alt:`Imagem ${ye+1}`}),X.jsx("button",{className:"remove-image-btn",onClick:()=>An(ye),title:"Remover imagem",children:""})]})},ye))})]}),ce.hasTimer&&X.jsx("div",{className:"progress-container",children:X.jsx("div",{className:"progress-bar",style:{width:`${E/(ce.timerDuration||60)*100}%`}})})]})},Rr=se=>[...i[se].steps].sort((ce,ae)=>(ce.position||0)-(ae.position||0));return X.jsxs("div",{className:"container",children:[X.jsxs("header",{children:[X.jsx("h1",{children:"Sistema de Esterilizao"}),X.jsx("h2",{children:"Uai Bonfim"})]}),X.jsxs("div",{className:"main-options",children:[X.jsx("button",{className:`option-btn ${e==="cip"?"active":""} ${c.cip.completed?"completed":""}`,onClick:()=>B("cip"),children:"CIP"}),X.jsx("button",{className:`option-btn ${e==="aquecimento"?"active":""} ${c.aquecimento.completed?"completed":""}`,onClick:()=>B("aquecimento"),children:"Aquecimento"}),X.jsx("button",{className:`option-btn ${e==="producao"?"active":""} ${c.producao.completed?"completed":""}`,onClick:()=>B("producao"),children:"Produo"})]}),X.jsxs("div",{className:"step-container",children:[X.jsxs("div",{className:"step-title",children:[X.jsx("h3",{children:e?i[e].steps[s].title:"Selecione um processo para iniciar"}),X.jsx("button",{className:"config-btn",onClick:()=>Y(!0),children:""})]}),sr(),e&&X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"action-buttons",children:[e&&i[e].steps[s].hasTimer&&X.jsx("button",{className:"btn btn-primary",onClick:ue,children:"Iniciar"}),X.jsx("button",{className:"btn btn-success",onClick:Ce,children:"Concludo"}),X.jsx("button",{className:"btn btn-info",onClick:Cr,children:"Adicionar Imagem"}),X.jsx("input",{type:"file",ref:be,style:{display:"none"},accept:"image/*",onChange:ht,multiple:!0})]}),X.jsxs("div",{className:"observation-box",children:[X.jsx("h4",{children:"Observaes:"}),X.jsx("textarea",{ref:he,placeholder:"Digite suas observaes aqui...",value:J,onChange:se=>$(se.target.value)}),X.jsx("div",{className:"autosave-indicator",children:"Salvamento automtico ativado"})]})]})]}),X.jsx("button",{className:"btn btn-primary",onClick:()=>D(!0),children:"Ver rvore Completa"}),e&&X.jsx("button",{className:"btn btn-danger",onClick:Ve,children:"Resetar Processo"}),V&&X.jsx("div",{className:"modal",style:{display:"block"},children:X.jsxs("div",{className:"modal-content",children:[X.jsx("span",{className:"close",onClick:()=>D(!1),children:""}),X.jsx("h2",{children:"rvore Completa de Passos"}),X.jsx("ul",{className:"tree-view",children:e&&Rr(e).map((se,ce)=>{if(!c[e].steps||c[e].steps.length!==i[e].steps.length)return X.jsxs("li",{children:[se.title," - Carregando..."]},ce);const ae=i[e].steps.findIndex(xe=>xe.title===se.title);return X.jsxs("li",{className:c[e].steps[ae].status==="completed"?"completed":c[e].steps[ae].status==="error"?"error":"",children:[X.jsx("span",{children:se.title}),X.jsx("span",{className:`status ${c[e].steps[ae].status}`,children:c[e].steps[ae].status==="completed"?"Concludo":c[e].steps[ae].status==="error"?"Erro":"Pendente"})]},ce)})})]})}),j&&X.jsx("div",{className:"modal",style:{display:"block"},children:X.jsxs("div",{className:"modal-content",children:[X.jsx("span",{className:"close",onClick:()=>Y(!1),children:""}),X.jsx("h2",{children:"Configuraes do Passo"}),X.jsxs("div",{children:[X.jsxs("div",{className:"config-option",children:[X.jsx("label",{htmlFor:"timer-enabled",children:"Ativar Temporizador:"}),X.jsx("input",{type:"checkbox",id:"timer-enabled"})]}),X.jsxs("div",{className:"config-option",children:[X.jsx("label",{htmlFor:"timer-duration",children:"Durao (segundos):"}),X.jsx("input",{type:"number",id:"timer-duration",min:"1",defaultValue:"60"})]}),X.jsxs("div",{className:"config-option",children:[X.jsx("label",{htmlFor:"step-position",children:"Posio do Passo:"}),X.jsx("input",{type:"number",id:"step-position",min:"1",max:e?i[e].steps.length:1,value:x,onChange:se=>O(parseInt(se.target.value))})]}),X.jsx("button",{className:"btn btn-primary",onClick:bn,children:"Salvar Configuraes"})]})]})}),Ee&&X.jsx("div",{className:"alert",style:{display:"block"},children:Se}),tt&&X.jsxs("div",{className:"error-alert",style:{display:"block",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(220, 53, 69, 0.9)",color:"white",padding:"20px",borderRadius:"5px",zIndex:2e3,textAlign:"center"},children:[X.jsx("h3",{children:"Ateno!"}),X.jsx("p",{children:k}),X.jsx("button",{className:"btn btn-light",onClick:je,style:{marginTop:"10px"},children:"OK"})]}),A&&X.jsxs("div",{className:"timer-alert",style:{display:"block",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(220, 53, 69, 0.9)",color:"white",padding:"20px",borderRadius:"5px",zIndex:2e3,textAlign:"center",animation:"blink 1s infinite"},children:[X.jsx("h3",{children:"Tempo Esgotado!"}),X.jsx("p",{children:"O temporizador chegou ao fim."}),X.jsx("button",{className:"btn btn-light",onClick:Qe,style:{marginTop:"10px"},children:"OK"})]})]})}Av.createRoot(document.getElementById("root")).render(X.jsx(vv.StrictMode,{children:X.jsx(Nw,{})}));
